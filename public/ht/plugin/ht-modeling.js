!function(n,J,S){"use strict";var u="ht",h=n[u],g=null,O=Math,Q=O.PI,z=O.cos,$=O.sin,w=O.abs,m=O.max,F=O.sqrt,E=1e-5,C=h.Default,R=C.def,x=C.startAnim,a=C.createMatrix,j=C.transformVec,Y=C.getInternal(),d=Y.addMethod,A=Y.superCall,b=Y.toPointsArray,e=Y.createNormals,W=Y.toFloatArray,r=Y.glMV,k=Y.batchShape,G=Y.createNodeMatrix,t=Y.getFaceInfo,H=Y.transformAppend,o=Y.drawFaceInfo,X=Y.createAnim,l=Y.cube(),V=l.is,N=l.vs,y=l.uv,K=Y.ui(),P=h.Node,I=h.Shape,M="h",v="v",D="front",_="back",s="left",q="right",f="top",i="bottom",U="dw.expanded",Z=".expanded",p="dw.angle",L=".angle",T=function(q,S,A){R(u+"."+q,S,A)},B=function(u,k,J){J?u.push(k.x,k.y):u.push(k.x,k.y,k.z)},c=[1,0,0],Rh=function(u,k,G,o){var E,e,l,x,r=0,p=[];if(o)for(E=o.length;E>r;r+=3)e=o[r],l=o[r+1],x=o[r+2],p.push(new Sd([new Uj([k[3*e],k[3*e+1],k[3*e+2]],c,G?[G[2*e],G[2*e+1],0]:g),new Uj([k[3*l],k[3*l+1],k[3*l+2]],c,G?[G[2*l],G[2*l+1],0]:g),new Uj([k[3*x],k[3*x+1],k[3*x+2]],c,G?[G[2*x],G[2*x+1],0]:g)],u));else for(E=k.length;E>r;r+=3)e=r,l=r+1,x=r+2,p.push(new Sd([new Uj([k[3*e],k[3*e+1],k[3*e+2]],c,G?[G[2*e],G[2*e+1],0]:g),new Uj([k[3*l],k[3*l+1],k[3*l+2]],c,G?[G[2*l],G[2*l+1],0]:g),new Uj([k[3*x],k[3*x+1],k[3*x+2]],c,G?[G[2*x],G[2*x+1],0]:g)],u));return p},Pq=[s,D,q,_,f,i],xm=Pq.concat("csg"),dr=[0,6,12,18,24,30],pg=function(F,D,J){for(var M=G(F),U=[],a=0;6>a;a++)for(var b=Pq[a],s=dr[a],A=J?D.getFaceUv(F,b):g,Z=J?D.getFaceUvScale(F,b):g,w=J?D.getFaceUvOffset(F,b):g,x=0;2>x;x++){var o,z,l,C=V[s+3*x],m=V[s+3*x+1],Y=V[s+3*x+2];if(J){if(A){var T=8*a;o=[A[2*C-T],A[2*C+1-T],0],z=[A[2*m-T],A[2*m+1-T],0],l=[A[2*Y-T],A[2*Y+1-T],0]}else o=[y[2*C],y[2*C+1],0],z=[y[2*m],y[2*m+1],0],l=[y[2*Y],y[2*Y+1],0];Z&&(o[0]*=Z[0],o[1]*=Z[1],z[0]*=Z[0],z[1]*=Z[1],l[0]*=Z[0],l[1]*=Z[1]),w&&(o[0]+=w[0],o[1]+=w[1],z[0]+=w[0],z[1]+=w[1],l[0]+=w[0],l[1]+=w[1])}U.push(new Sd([new Uj(j([N[3*C],N[3*C+1],N[3*C+2]],M),c,o),new Uj(j([N[3*m],N[3*m+1],N[3*m+2]],M),c,z),new Uj(j([N[3*Y],N[3*Y+1],N[3*Y+2]],M),c,l)],F))}return ug.$15n(U)},xr=function(M,G){var c,y=M.data.getAttaches();if(y&&y.each(function(q){q instanceof Dg&&q.s("attach.operation")&&(c||(c=[]),c.push(q))}),c){var S;Pq.forEach(function(j){var L=Rh(j,M[j].vs,M[j].tuv);S=S?S.concat(L):L}),S=ug.$15n(S),c.forEach(function(x){var t=x.s("attach.operation");S[t]&&(S=S[t](pg(x,M.gv,M.csg.tuv)))}),Pq.forEach(function(e){e=M[e],e.vs=[],e.tuv&&(e.tuv=[])}),S.$19n().forEach(function(Z){var P=Z.$10n;if(P instanceof Dg){if(P.s("attach.cull"))return;P="csg"}for(var x=M[P],R=x.vs,d=x.tuv,k=Z.$9n,C=2;C<k.length;C++)B(R,k[0].$24n),B(R,k[C-1].$24n),B(R,k[C].$24n),d&&(B(d,k[0].uv,!0),B(d,k[C-1].uv,!0),B(d,k[C].uv,!0))})}xm.forEach(function(b){var v=M[b];v.visible&&v.vs.length?(v.ns=e(v.vs),W(v,"vs"),W(v,"tuv")):delete M[b]}),G&&(k(M,g,G),M.clear())};d(C,{createFrameModel:function(I,P,D,e){I=I==g?.07:I,P=P==g?I:P,D=D==g?I:D,e=e?e:{};var a=e.top,l=e.bottom,G=e.left,K=e.right,S=e.front,r=e.back,A=[],C=[];return S===!0?(A.push(-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5),C.push(0,0,0,1,1,1,1,1,1,0,0,0)):S===!1||(A.push(-.5,.5,.5,-.5,-.5,.5,-.5+I,-.5,.5,-.5+I,-.5,.5,-.5+I,.5,.5,-.5,.5,.5,.5-I,.5,.5,.5-I,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5-I,.5,.5,-.5+I,.5,.5,-.5+I,.5-P,.5,.5-I,.5-P,.5,.5-I,.5-P,.5,.5-I,.5,.5,-.5+I,.5,.5,-.5+I,-.5+P,.5,-.5+I,-.5,.5,.5-I,-.5,.5,.5-I,-.5,.5,.5-I,-.5+P,.5,-.5+I,-.5+P,.5),C.push(0,0,0,1,I,1,I,1,I,0,0,0,1-I,0,1-I,1,1,1,1,1,1,0,1-I,0,I,0,I,P,1-I,P,1-I,P,1-I,0,I,0,I,1-P,I,1,1-I,1,1-I,1,1-I,1-P,I,1-P)),r===!0?(A.push(-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5),C.push(1,0,0,1,1,1,0,1,1,0,0,0)):r===!1||(A.push(-.5,.5,-.5,-.5+I,-.5,-.5,-.5,-.5,-.5,-.5+I,-.5,-.5,-.5,.5,-.5,-.5+I,.5,-.5,.5-I,.5,-.5,.5,-.5,-.5,.5-I,-.5,-.5,.5,-.5,-.5,.5-I,.5,-.5,.5,.5,-.5,-.5+I,.5,-.5,.5-I,.5-P,-.5,-.5+I,.5-P,-.5,.5-I,.5-P,-.5,-.5+I,.5,-.5,.5-I,.5,-.5,-.5+I,-.5+P,-.5,.5-I,-.5,-.5,-.5+I,-.5,-.5,.5-I,-.5,-.5,-.5+I,-.5+P,-.5,.5-I,-.5+P,-.5),C.push(1,0,1-I,1,1,1,1-I,1,1,0,1-I,0,I,0,0,1,I,1,0,1,I,0,0,0,1-I,0,I,P,1-I,P,I,P,1-I,0,I,0,1-I,1-P,I,1,1-I,1,I,1,1-I,1-P,I,1-P)),G===!0?(A.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5),C.push(0,0,0,1,1,1,1,1,1,0,0,0)):G===!1||(A.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5+D,-.5,-.5,-.5+D,-.5,.5,-.5+D,-.5,.5,-.5,-.5,.5,.5-D,-.5,-.5,.5-D,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5-D,-.5,.5,-.5+D,-.5,.5-P,-.5+D,-.5,.5-P,.5-D,-.5,.5-P,.5-D,-.5,.5,.5-D,-.5,.5,-.5+D,-.5,-.5+P,-.5+D,-.5,-.5,-.5+D,-.5,-.5,.5-D,-.5,-.5,.5-D,-.5,-.5+P,.5-D,-.5,-.5+P,-.5+D),C.push(0,0,0,1,D,1,D,1,D,0,0,0,1-D,0,1-D,1,1,1,1,1,1,0,1-D,0,D,0,D,P,1-D,P,1-D,P,1-D,0,D,0,D,1-P,D,1,1-D,1,1-D,1,1-D,1-P,D,1-P)),K===!0?(A.push(.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5),C.push(1,0,0,1,1,1,0,1,1,0,0,0)):K===!1||(A.push(.5,.5,-.5,.5,-.5,-.5+D,.5,-.5,-.5,.5,-.5,-.5+D,.5,.5,-.5,.5,.5,-.5+D,.5,.5,.5-D,.5,-.5,.5,.5,-.5,.5-D,.5,-.5,.5,.5,.5,.5-D,.5,.5,.5,.5,.5,-.5+D,.5,.5-P,.5-D,.5,.5-P,-.5+D,.5,.5-P,.5-D,.5,.5,-.5+D,.5,.5,.5-D,.5,-.5+P,-.5+D,.5,-.5,.5-D,.5,-.5,-.5+D,.5,-.5,.5-D,.5,-.5+P,-.5+D,.5,-.5+P,.5-D),C.push(1,0,1-D,1,1,1,1-D,1,1,0,1-D,0,D,0,0,1,D,1,0,1,D,0,0,0,1-D,0,D,P,1-D,P,D,P,1-D,0,D,0,1-D,1-P,D,1,1-D,1,D,1,1-D,1-P,D,1-P)),a===!0?(A.push(.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5),C.push(1,1,1,0,0,0,0,0,0,1,1,1)):a===!1||(A.push(.5,.5,.5,.5,.5,-.5,.5-I,.5,-.5,.5-I,.5,-.5,.5-I,.5,.5,.5,.5,.5,-.5+I,.5,.5,-.5+I,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5+I,.5,.5,.5-I,.5,.5,.5-I,.5,.5-D,-.5+I,.5,.5-D,-.5+I,.5,.5-D,-.5+I,.5,.5,.5-I,.5,.5,.5-I,.5,-.5+D,.5-I,.5,-.5,-.5+I,.5,-.5,-.5+I,.5,-.5,-.5+I,.5,-.5+D,.5-I,.5,-.5+D),C.push(1,1,1,0,1-I,0,1-I,0,1-I,1,1,1,I,1,I,0,0,0,0,0,0,1,I,1,1-I,1,1-I,1-D,I,1-D,I,1-D,I,1,1-I,1,1-I,D,1-I,0,I,0,I,0,I,D,1-I,D)),l===!0?(A.push(.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5),C.push(1,0,0,1,1,1,0,1,1,0,0,0)):l===!1||(A.push(.5,-.5,.5,.5-I,-.5,-.5,.5,-.5,-.5,.5-I,-.5,-.5,.5,-.5,.5,.5-I,-.5,.5,-.5+I,-.5,.5,-.5,-.5,-.5,-.5+I,-.5,-.5,-.5,-.5,-.5,-.5+I,-.5,.5,-.5,-.5,.5,.5-I,-.5,.5,-.5+I,-.5,.5-D,.5-I,-.5,.5-D,-.5+I,-.5,.5-D,.5-I,-.5,.5,-.5+I,-.5,.5,.5-I,-.5,-.5+D,-.5+I,-.5,-.5,.5-I,-.5,-.5,-.5+I,-.5,-.5,.5-I,-.5,-.5+D,-.5+I,-.5,-.5+D),C.push(1,0,1-I,1,1,1,1-I,1,1,0,1-I,0,I,0,0,1,I,1,0,1,I,0,0,0,1-I,0,I,D,1-I,D,I,D,1-I,0,I,0,1-I,1-D,I,1,1-I,1,I,1,1-I,1-D,I,1-D)),{vs:A,uv:C}}}),d(h.Style,{"dw.flip":!1,"dw.s3":[.999,.999,.5],"dw.t3":S,"dw.expanded":!1,"dw.toggleable":!0,"dw.axis":"left","dw.start":0,"dw.end":Q/2,"dw.angle":0,"attach.cull":!1,"attach.operation":"subtract"},!0),Pq.forEach(function(w){var n={};n[w+Z]=!1,n[w+".toggleable"]=!1,n[w+".axis"]=s,n[w+".start"]=0,n[w+".end"]=Q/2,n[w+L]=0,d(h.Style,n,!0)});var ug=function(){this.$4n=[]};ug.$15n=function(r){var w=new ug;return w.$4n=r,w},ug.prototype={clone:function(){var J=new ug;return J.$4n=this.$4n.map(function(g){return g.clone()}),J},$19n:function(){return this.$4n},union:function(W){var X=new Pg(this.clone().$4n),y=new Pg(W.clone().$4n);return X.$3n(y),y.$3n(X),y.$6n(),y.$3n(X),y.$6n(),X.$7n(y.$2n()),ug.$15n(X.$2n())},subtract:function(n){var f=new Pg(this.clone().$4n),b=new Pg(n.clone().$4n);return f.$6n(),f.$3n(b),b.$3n(f),b.$6n(),b.$3n(f),b.$6n(),f.$7n(b.$2n()),f.$6n(),ug.$15n(f.$2n())},intersect:function(J){var W=new Pg(this.clone().$4n),F=new Pg(J.clone().$4n);return W.$6n(),F.$3n(W),F.$6n(),W.$3n(F),F.$3n(W),W.$7n(F.$2n()),W.$6n(),ug.$15n(W.$2n())},inverse:function(){var e=this.clone();return e.$4n.map(function(O){O.flip()}),e}},ug.cube=function(V){V=V||{};var S=new ud(V.center||[0,0,0]),r=V.radius?V.radius.length?V.radius:[V.radius,V.radius,V.radius]:[1,1,1];return ug.$15n([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(Z){return new Sd(Z[0].map(function(t){var s=new ud(S.x+r[0]*(2*!!(1&t)-1),S.y+r[1]*(2*!!(2&t)-1),S.z+r[2]*(2*!!(4&t)-1));return new Uj(s,new ud(Z[1]))}))}))},ug.sphere=function(V){function i(p,_){p*=2*Q,_*=Q;var R=new ud(z(p)*$(_),z(_),$(p)*$(_));L.push(new Uj(m.$20n(R.$21n(A)),R))}V=V||{};for(var L,m=new ud(V.center||[0,0,0]),A=V.radius||1,F=V.slices||16,y=V.stacks||8,w=[],S=0;F>S;S++)for(var D=0;y>D;D++)L=[],i(S/F,D/y),D>0&&i((S+1)/F,D/y),y-1>D&&i((S+1)/F,(D+1)/y),i(S/F,(D+1)/y),w.push(new Sd(L));return ug.$15n(w)},ug.cylinder=function(e){function o(c,u,H){var l=2*u*Q,y=g.$21n(z(l)).$20n(j.$21n($(l))),U=V.$20n(A.$21n(c)).$20n(y.$21n(Z)),k=y.$21n(1-w(H)).$20n(h.$21n(H));return new Uj(U,k)}e=e||{};for(var V=new ud(e.start||[0,-1,0]),q=new ud(e.end||[0,1,0]),A=q.$13n(V),Z=e.radius||1,n=e.slices||16,h=A.$14n(),L=w(h.y)>.5,g=new ud(L,!L,0).$12n(h).$14n(),j=g.$12n(h).$14n(),r=new Uj(V,h.$11n()),C=new Uj(q,h.$14n()),a=[],U=0;n>U;U++){var D=U/n,s=(U+1)/n;a.push(new Sd([r,o(0,D,-1),o(0,s,-1)])),a.push(new Sd([o(0,s,0),o(0,D,0),o(1,D,0),o(1,s,0)])),a.push(new Sd([C,o(1,s,1),o(1,D,1)]))}return ug.$15n(a)};var ud=function($,K,T){var v=this;3==arguments.length?(v.x=$,v.y=K,v.z=T):"x"in $?(v.x=$.x,v.y=$.y,v.z=$.z):(v.x=$[0],v.y=$[1],v.z=$[2])};ud.prototype={clone:function(){return new ud(this.x,this.y,this.z)},$11n:function(){return new ud(-this.x,-this.y,-this.z)},$20n:function(Y){return new ud(this.x+Y.x,this.y+Y.y,this.z+Y.z)},$13n:function(L){return new ud(this.x-L.x,this.y-L.y,this.z-L.z)},$21n:function(L){return new ud(this.x*L,this.y*L,this.z*L)},$16n:function(p){return new ud(this.x/p,this.y/p,this.z/p)},$23n:function(Y){return this.x*Y.x+this.y*Y.y+this.z*Y.z},lerp:function(Y,E){return this.$20n(Y.$13n(this).$21n(E))},length:function(){return F(this.$23n(this))},$14n:function(){return this.$16n(this.length())},$12n:function(Q){var Z=this;return new ud(Z.y*Q.z-Z.z*Q.y,Z.z*Q.x-Z.x*Q.z,Z.x*Q.y-Z.y*Q.x)}};var Uj=function(v,V,W){var _=this;_.$24n=new ud(v),_.$22n=new ud(V),_.uv=W?new ud(W):null};Uj.prototype={clone:function(){var N=this;return new Uj(N.$24n.clone(),N.$22n.clone(),N.uv?N.uv.clone():null)},flip:function(){this.$22n=this.$22n.$11n()},$18n:function(z,_){var h=this;return new Uj(h.$24n.lerp(z.$24n,_),h.$22n.lerp(z.$22n,_),h.uv?h.uv.lerp(z.uv,_):null)}};var rs=function(O,A){this.$22n=O,this.w=A};rs.$17n=function($,T,t){var b=T.$13n($).$12n(t.$13n($)).$14n();return new rs(b,b.$23n($))},rs.prototype={clone:function(){return new rs(this.$22n.clone(),this.w)},flip:function(){var $=this;$.$22n=$.$22n.$11n(),$.w=-$.w},$5n:function(A,U,Z,M,N){for(var Q=this,d=0,u=1,h=2,m=3,L=0,Y=[],$=0;$<A.$9n.length;$++){var o=Q.$22n.$23n(A.$9n[$].$24n)-Q.w,r=-E>o?h:o>E?u:d;L|=r,Y.push(r)}switch(L){case d:(Q.$22n.$23n(A.$8n.$22n)>0?U:Z).push(A);break;case u:M.push(A);break;case h:N.push(A);break;case m:for(var a=[],H=[],$=0;$<A.$9n.length;$++){var x=($+1)%A.$9n.length,P=Y[$],t=Y[x],B=A.$9n[$],b=A.$9n[x];if(P!=h&&a.push(B),P!=u&&H.push(P!=h?B.clone():B),(P|t)==m){var o=(Q.w-this.$22n.$23n(B.$24n))/Q.$22n.$23n(b.$24n.$13n(B.$24n)),i=B.$18n(b,o);a.push(i),H.push(i.clone())}}a.length>=3&&M.push(new Sd(a,A.$10n)),H.length>=3&&N.push(new Sd(H,A.$10n))}}};var Sd=function(Y,e){var M=this;M.$9n=Y,M.$10n=e,M.$8n=rs.$17n(Y[0].$24n,Y[1].$24n,Y[2].$24n)};Sd.prototype={clone:function(){var w=this.$9n.map(function(x){return x.clone()});return new Sd(w,this.$10n)},flip:function(){this.$9n.reverse().map(function(u){u.flip()}),this.$8n.flip()}};var Pg=function(w){var o=this;o.$8n=null,o.front=null,o.back=null,o.$4n=[],w&&o.$7n(w)};Pg.prototype={clone:function(){var s=this,B=new Pg;return B.$8n=s.$8n&&s.$8n.clone(),B.front=s.front&&s.front.clone(),B.back=s.back&&s.back.clone(),B.$4n=s.$4n.map(function(v){return v.clone()}),B},$6n:function(){for(var X=this,I=0;I<X.$4n.length;I++)X.$4n[I].flip();X.$8n.flip(),X.front&&X.front.$6n(),X.back&&X.back.$6n();var x=X.front;X.front=X.back,X.back=x},$1n:function(G){var D=this;if(!D.$8n)return G.slice();for(var g=[],S=[],I=0;I<G.length;I++)D.$8n.$5n(G[I],g,S,g,S);return D.front&&(g=D.front.$1n(g)),S=D.back?D.back.$1n(S):[],g.concat(S)},$3n:function(h){var H=this;H.$4n=h.$1n(H.$4n),H.front&&H.front.$3n(h),H.back&&H.back.$3n(h)},$2n:function(){var e=this,A=e.$4n.slice();return e.front&&(A=A.concat(e.front.$2n())),e.back&&(A=A.concat(e.back.$2n())),A},$7n:function(E){var u=this;if(E.length){u.$8n||(u.$8n=E[0].$8n.clone());for(var r=[],o=[],V=0;V<E.length;V++)this.$8n.$5n(E[V],u.$4n,u.$4n,r,o);r.length&&(u.front||(u.front=new Pg),this.front.$7n(r)),o.length&&(u.back||(u.back=new Pg),u.back.$7n(o))}}};var Ul="symbol",vo=h.Symbol=function($,f,y){var u=this;A(vo,u),u.s3(20,20,20),u.s({"all.visible":!1,shape:"rect"}),u.setIcon($,f,y)};T("Symbol",P,{setIcon:function(s,q,A){var k,d=this;return vo.superClass.setIcon.call(d,s),s?(k={for3d:!0,face:"center",position:44,names:[s]},A&&(k.transaprent=!0),q&&(k.autorotate=q),d.addStyleIcon(Ul,k)):d.removeStyleIcon(Ul),d.setWidth(Y.getImageWidth(C.getImage(s),d)||20),k}});var Dg=h.CSGNode=function(){A(Dg,this),this.s({shape:"rect","attach.thickness":1.001})},$r={position:1,width:1,height:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,tall:1,elevation:1,"s:attach.cull":1,"s:attach.operation":1};T("CSGNode",P,{_22Q:function(){return lb},onPropertyChanged:function(W){var h=this,o=h.getHost();Dg.superClass.onPropertyChanged.call(h,W),$r[W.property]&&(o instanceof Lb||o instanceof Dg)&&o.fp("csgNodeChange",!0,!1)}});var lb=function(l,$){A(lb,this,[l,$])};R(lb,K.Node3dUI,{_80o:function(Q,u,p){var F=this;F._shape3d?lb.superClass._80o.call(F,Q,u,p):(r(F.gv),xm.forEach(function(e){o(F,Q,u,F[e],p)}))},validate:function(A,d){var h=this,X=h.gv,K=h.data;if(K.s("shape3d"))return lb.superClass.validate.call(h,A,d),h._shape3d=!0,void 0;h._shape3d=!1;var M=G(K,X.getMat(K)),r=A&&A.uv;h.vf2("csg",r);for(var L=0;6>L;L++)for(var f=Pq[L],q=dr[L],F=h.vf2(f,r,d),a=F.mat||M,J=F.vs,k=F.uv,D=F.tuv,u=0;2>u;u++){var S=V[q+3*u],Q=V[q+3*u+1],T=V[q+3*u+2];if(H(J,a,[N[3*S],N[3*S+1],N[3*S+2]]),H(J,a,[N[3*Q],N[3*Q+1],N[3*Q+2]]),H(J,a,[N[3*T],N[3*T+1],N[3*T+2]]),D)if(k){var x=8*L;D.push(k[2*S-x],k[2*S+1-x],k[2*Q-x],k[2*Q+1-x],k[2*T-x],k[2*T+1-x])}else D.push(y[2*S],y[2*S+1],y[2*Q],y[2*Q+1],y[2*T],y[2*T+1])}xr(h,A,d)},vf2:function(q,h,k){var m,x=this,c=x.gv.getFaceVisible(x.data,q);return m=t(x,q,k),m.vs=[],m.tuv=c&&(m.texture||h)?[]:g,m.visible=c,m}});var Lb=h.CSGShape=function(){var t=this;A(Lb,t),t.s({"shape.background":g,"shape.border.width":8}),t.setTall(240),t.setElevation(120),t.setThickness(14)};T("CSGShape",I,{IRotatable:!1,_22Q:function(){return qi},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setSegments:function(){}});var qi=function(S,V){A(qi,this,[S,V])};R(qi,K.Shape3dUI,{_80o:function(E,T,u){var e=this;e.undrawable||(r(e.gv),xm.forEach(function(q){o(e,E,T,e[q],u)}))},validate:function(_,L){var i=this,Q=i.data,c=Q.getPoints();if(i.undrawable=c.size()<2)return i.clear(),void 0;var T=Q.isClosePath(),x=m(Q._thickness/2,E),e=b(c,g,g,T);xm.forEach(function(l){i.vf(l,_&&_.uv,!0,L)}),T&&(i.left.visible=!1,i.right.visible=!1),i._12O(e,x),i._20Q(e),xr(i,_,L)}});var oh=h.DoorWindow=function(){var M=this;A(oh,M),M.setElevation(100),M.s3(100,200,14)};T("DoorWindow",Dg,{IDoorWindow:!0,toggle:function(W){this.setExpanded(!this.s(U),W)},isExpanded:function(){return this.s(U)},setExpanded:function(E,Y){var K=this,S=K.$25n,m=K.getDataModel(),Z=K.s(U);if(S&&(S.stop(!0),delete K.$25n),Z!==E){m&&m.beginTransaction();var f=E?K.s("dw.end"):K.s("dw.start");K.s(U,E),Y=X(Y),Y?(Z=K.s(p),Y.action=function(Y){K.s(p,Z+(f-Z)*Y)},Y.finishFunc=function(){m&&m.endTransaction()},K.$25n=x(Y)):(K.s(p,f),m&&m.endTransaction())}},getMat:function(){var z=this,G=z.s("dw.s3"),U=z.s("dw.t3"),D=z.s("dw.flip"),r=z.s(p);if(G||r||U||D){var k=[];if(D&&k.push({r3:[0,Q,0]}),G&&k.push({s3:G}),r){G=z.getFinalScale3d();var x=z.s("dw.axis"),L=G[0]/2,y=G[1]/2;G[2]/2,x===s?k.push({t3:[L,0,0]},{r3:[0,-r,0]},{t3:[-L,0,0]}):x===q?k.push({t3:[-L,0,0]},{r3:[0,r,0]},{t3:[L,0,0]}):x===f?k.push({t3:[0,-y,0]},{r3:[-r,0,0]},{t3:[0,y,0]}):x===i?k.push({t3:[0,y,0]},{r3:[r,0,0]},{t3:[0,-y,0]}):x===v?k.push({r3:[0,r,0]}):x===M&&k.push({r3:[r,0,0]})}return U&&k.push({t3:U}),a(k)}return g}});var hr=h.CSGBox=function(){var d=this;A(hr,d),d.setElevation(100),d.s3(100,200,100)};T("CSGBox",Dg,{ICSGBox:!0,toggleFace:function(S,U){this.setFaceExpanded(S,!this.s(S+Z),U)},isFaceExpanded:function(v){return this.s(v+Z)},setFaceExpanded:function(H,R,q){var z=this,h=z.$25n,A=z.s(H+Z);if(h&&(h.stop(!0),delete z.$25n),A!==R){var U=R?z.s(H+".end"):z.s(H+".start");z.s(H+Z,R),q=X(q),q?(A=z.s(H+L),q.action=function(I){z.s(H+L,A+(U-A)*I)},z.$25n=x(q)):z.s(H+L,U)}},getFaceMat:function(S){var d=this,Q=d.s(S+L);if(!Q)return g;var u=d.s(S+".axis"),Z=d.s3(),H=Z[0]/2,O=Z[1]/2,P=Z[2]/2,W=[];return S===D&&(u===s?W.push({t3:[H,0,-P]},{r3:[0,-Q,0]},{t3:[-H,0,P]}):u===q?W.push({t3:[-H,0,-P]},{r3:[0,Q,0]},{t3:[H,0,P]}):u===f?W.push({t3:[0,-O,-P]},{r3:[-Q,0,0]},{t3:[0,O,P]}):u===i?W.push({t3:[0,O,-P]},{r3:[Q,0,0]},{t3:[0,-O,P]}):u===v?W.push({t3:[0,0,-P]},{r3:[0,Q,0]},{t3:[0,0,P]}):u===M&&W.push({t3:[0,0,-P]},{r3:[Q,0,0]},{t3:[0,0,P]})),S===_&&(u===s?W.push({t3:[-H,0,P]},{r3:[0,-Q,0]},{t3:[H,0,-P]}):u===q?W.push({t3:[H,0,P]},{r3:[0,Q,0]},{t3:[-H,0,-P]}):u===f?W.push({t3:[0,-O,P]},{r3:[Q,0,0]},{t3:[0,O,-P]}):u===i?W.push({t3:[0,O,P]},{r3:[-Q,0,0]},{t3:[0,-O,-P]}):u===v?W.push({t3:[0,0,P]},{r3:[0,Q,0]},{t3:[0,0,-P]}):u===M&&W.push({t3:[0,0,P]},{r3:[Q,0,0]},{t3:[0,0,-P]})),S===s&&(u===s?W.push({t3:[H,0,P]},{r3:[0,-Q,0]},{t3:[-H,0,-P]}):u===q?W.push({t3:[H,0,-P]},{r3:[0,Q,0]},{t3:[-H,0,P]}):u===f?W.push({t3:[H,-O,0]},{r3:[0,0,-Q]},{t3:[-H,O,0]}):u===i?W.push({t3:[H,O,0]},{r3:[0,0,Q]},{t3:[-H,-O,0]}):u===v?W.push({t3:[H,0,0]},{r3:[0,Q,0]},{t3:[-H,0,0]}):u===M&&W.push({t3:[H,0,0]},{r3:[0,0,Q]},{t3:[-H,0,0]})),S===q&&(u===s?W.push({t3:[-H,0,-P]},{r3:[0,-Q,0]},{t3:[H,0,P]}):u===q?W.push({t3:[-H,0,P]},{r3:[0,Q,0]},{t3:[H,0,-P]}):u===f?W.push({t3:[-H,-O,0]},{r3:[0,0,Q]},{t3:[H,O,0]}):u===i?W.push({t3:[-H,O,0]},{r3:[0,0,-Q]},{t3:[H,-O,0]}):u===v?W.push({t3:[-H,0,0]},{r3:[0,Q,0]},{t3:[H,0,0]}):u===M&&W.push({t3:[-H,0,0]},{r3:[0,0,Q]},{t3:[H,0,0]})),S===f&&(u===s?W.push({t3:[H,-O,0]},{r3:[0,0,Q]},{t3:[-H,O,0]}):u===q?W.push({t3:[-H,-O,0]},{r3:[0,0,-Q]},{t3:[H,O,0]}):u===f?W.push({t3:[0,-O,P]},{r3:[-Q,0,0]},{t3:[0,O,-P]}):u===i?W.push({t3:[0,-O,-P]},{r3:[Q,0,0]},{t3:[0,O,P]}):u===v?W.push({t3:[0,-O,0]},{r3:[0,0,Q]},{t3:[0,O,0]}):u===M&&W.push({t3:[0,-O,0]},{r3:[Q,0,0]},{t3:[0,O,0]})),S===i&&(u===s?W.push({t3:[H,O,0]},{r3:[0,0,-Q]},{t3:[-H,-O,0]}):u===q?W.push({t3:[-H,O,0]},{r3:[0,0,Q]},{t3:[H,-O,0]}):u===f?W.push({t3:[0,O,-P]},{r3:[-Q,0,0]},{t3:[0,-O,P]}):u===i?W.push({t3:[0,O,P]},{r3:[Q,0,0]},{t3:[0,-O,-P]}):u===v?W.push({t3:[0,O,0]},{r3:[0,0,Q]},{t3:[0,-O,0]}):u===M&&W.push({t3:[0,O,0]},{r3:[Q,0,0]},{t3:[0,-O,0]})),a(W)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);