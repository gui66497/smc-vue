!function(B,q){"use strict";var v="ht",g=B[v],r="position",u="absolute",L="px",z="left",i="top",H="innerHTML",Z="className",e="width",f="height",R="0",w="display",W="none",F="visibility",O="user-select",k="margin",J="padding",S=null,y=g.Color,C=g.Default,K=C.getInternal(),n=B.setTimeout,o=B.setInterval,G=B.clearTimeout,Y=B.clearInterval,$=B.parseInt,b=C.isLeftButton,a=C.isDragging,E=C.startDragging,Q=C.getDistance,U=C.isTouchable,A=y.widgetIconHighlight,M=y.widgetIconBorder,X=y.widgetIconGradient,d=function(){return document},P=function(t,y){return t.querySelectorAll(y)},D=function(O){var Z=d().createElement(O);return"ul"===O&&(V(Z,r,"relative"),V(Z,k,R),V(Z,J,R),V(Z,"list-style",W),V(Z,"box-sizing","border-box"),V(Z,"-moz-box-sizing","border-box"),V(Z,w,"inline-block"),V(Z,"vertical-align","text-bottom"),V(Z,"border","1px solid "+C.contextMenuBorderColor),V(Z,"box-shadow","0 0 16px 1px "+C.contextMenuShadowColor),V(Z,"overflow","hidden"),C.contextMenuBorderRadius&&V(Z,"border-radius",C.contextMenuBorderRadius+L)),Z},m=function(U){var J=U.touches[0];return J?J:U.changedTouches[0]},p=function(){return D("div")},h=function(){return D("canvas")},V=function(Z,K,J){Z.style.setProperty(K,J,S)},T=function(N,S,r){C.def(g.widget[N],S,r)},x=function(i,G){i.appendChild(G)},I=function(V,o){V.removeChild(o)},l=K.addEventListener,c=K.removeEventListener;K.addMethod(C,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:M},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:A}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:M},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:A,gradient:C.imageGradient,gradientColor:X,background:A}]},contextMenuLabelFont:(U?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var t=function(X){var F=this,o=X._view;if(F.$11b=X,F.addListeners(),l(o,"contextmenu",function(Z){Z.preventDefault()}),!U){var y=F.$37b=F.$36b.bind(F);l(o,"mouseover",y),l(o,"mouseout",y)}};C.def(t,q,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(x){if(C.preventDefault(x),b(x)){for(var A=this,v=A.$11b,q=A.getView(),$=q.children,Q=0;Q<$.length;Q++){var W=$[Q],L=W.$24b,_=W.$25b;if(L&&L.contains(x.target))return v.scrollUp(W),A.$28b=n(function(){A.$29b=o(function(){v.scrollUp(W)},100)},500),E(A,x),void 0;if(_&&_.contains(x.target))return v.scrollDown(W),A.$28b=n(function(){A.$29b=o(function(){v.scrollDown(W)},100)},500),E(A,x),void 0}U&&(x=m(x)),A.$30b={x:x.pageX,y:x.pageY}}},handle_mousedown:function(U){this.handle_touchstart(U)},handle_touchend:function(_){if(b(_)){var V=this,I=V.$30b,e=U?{x:m(_).pageX,y:m(_).pageY}:{x:_.pageX,y:_.pageY};if(!I||Q(I,e)>1)return delete V.$30b,void 0;for(var i=V.getView(),H=V.$11b,r=_.target,u=S,z=S,W=H._items,s=i.$26b,Z=0;Z<s.length;Z++)if(z=s[Z],z.contains(r)){u=z.getAttribute("data-id");break}if(u&&W){var w=H.$17b(W,function(g){return g._id===u});if(w){var G=!1;w.disabled instanceof Function?G=w.disabled.call(H,w):w.disabled===!0&&(G=!0),G||(w.items?U&&V.$36b(z,!0):H.$1b(w,_))}}delete V.$30b}},$36b:function(u,k){if(!a()){var I,y=this,r=y.$11b,v=y.getView(),n=r.$20b||v.children[0],Q=r.$19b,p=v.$26b,B=v.children,e=u.target,j=v.getBoundingClientRect(),c=C.getWindowInfo(),w=c.width,E=c.height,R=function(T){for(var f=0;f<B.length;f++){var h=B[f],A=new RegExp(T+"$"),o=h[Z];if(o&&(A.test(o)||o.indexOf(T+" ")>=0))return h}},H=function(a){for(var m=0;m<p.length;m++){var y=p[m],l=new RegExp(a+"$"),e=y[Z];if(e&&(l.test(e)||e.indexOf(a+" ")>=0))return y}},_=function(W){var k=H("menu-item"+W.$45b),x=k.getBoundingClientRect(),o=x.top-j.top,R=x.left-j.left;V(W,i,o+L),V(W,z,R+x.width+L);var G=W.getBoundingClientRect(),M=G.top,n=G.left,Q=G.height,D=G.width,t=M+Q+2,c=n+D+2;t>E&&V(W,i,o+E-t+L),c>w&&V(W,z,R-D+L)};if(k)I=u;else{if("mouseover"===u.type){for(var M=0;M<p.length;M++){var P=p[M];if(P.contains(e)){I=P;break}}if(!I&&Q){var N=Q.parentNode,s=R("submenu"+Q.getAttribute("data-id"));(s&&s.contains(e)||N&&N.contains(e))&&(I=Q)}}else if("mouseout"===u.type){for(var W=!1,S=u.relatedTarget,M=0;M<B.length;M++){var d=B[M];if("hidden"!==d.style.visibility&&d.contains(S)){W=!0;break}}if(W)return}!I&&n&&(I=H("menu-item"+(n.$45b||"NaN")))}if(I!=Q){if(Q)for(var U=Q;U;){if(U[Z]=U[Z].replace(" menu-item-hover",""),U[Z].indexOf("disabled")<0){var $=r.getItemByProperty("_id",U.getAttribute("data-id"));null!=$.background?$.background instanceof Function?V(U,"background-color",$.background.call(r,$)):V(U,"background-color",$.background):V(U,"background-color",C.contextMenuBackground),V(U,"color",C.contextMenuLabelColor)}var q=R("submenu"+U.getAttribute("data-id"));q&&V(q,F,"hidden");var D=U.parentNode;U=H("menu-item"+(D.$45b||"NaN"))}if(I){for(var g=I,l=[];g;){g[Z]+=" menu-item-hover",g[Z].indexOf("disabled")<0&&(V(g,"background-color",C.contextMenuHoverBackground),V(g,"color",C.contextMenuHoverLabelColor));var A=R("submenu"+g.getAttribute("data-id"));A&&(V(A,F,"visible"),l.push(A));var D=g.parentNode;g=H("menu-item"+(D.$45b||"NaN"))}l.reverse(),l.forEach(function(h){_(h)})}}r.$19b=I,r.$20b=I?I.parentNode:v.children[0]}},handle_mouseup:function(f){this.handle_touchend(f)},handleWindowTouchEnd:function(){var y=this;y.$28b!=S&&(G(y.$28b),delete y.$28b),y.$29b!=S&&(Y(y.$29b),delete y.$29b),delete y.$34b,delete y.$30b,delete y.$35b},handleWindowMouseUp:function(u){this.handleWindowTouchEnd(u)},handle_mousemove:function(r){this.handle_touchmove(r)},handle_touchmove:function(I){if(!a()&&b(I)){for(var t=this,$=t.getView().children,l=S,A=0;A<$.length;A++){var s=$[A];if(s.contains(I.target)){l=s;break}}var D=t.$30b,V=U?{x:m(I).pageX,y:m(I).pageY}:{x:I.pageX,y:I.pageY};l&&D&&Q(D,V)>2&&(E(t,I),t.$34b=l,t.$35b=l.$18b)}},handleWindowTouchMove:function(f){f.preventDefault();var x=this,A=x.$11b,X=x.$34b,n=x.$35b,d=x.$30b;if(d&&X){var g=U?{x:m(f).pageX,y:m(f).pageY}:{x:f.pageX,y:f.pageY},k=g.y-d.y;k>0?A.scrollUp(X,X.$18b-(n-k)):A.scrollDown(X,n-k-X.$18b)}},handleWindowMouseMove:function(h){this.handleWindowTouchMove(h)},$10b:function(o,h){o.preventDefault();for(var A=this,Y=A.getView().children,U=S,z=0;z<Y.length;z++){var t=Y[z];if(t.contains(o.target)){U=t;break}}if(U){var D=this.$11b,R=D.getRowHeight();Math.abs(h)>.05&&(h>0?D.scrollUp(U,h*R):0>h&&D.scrollDown(U,-h*R))}},handle_mousewheel:function(O){this.$10b(O,O.wheelDelta/40)},handle_DOMMouseScroll:function(n){this.$10b(n,-n.detail)},$44b:function(R){this.getView().contains(R.target)||this.$11b.hide()},$41b:function(r){this.$11b.show(r)},$4b:function(k,f){var H=this.$11b;if(f=f||H._items,f&&f.length&&k.keyCode){var s=[k.keyCode];k.shiftKey&&s.push(16),k.ctrlKey&&s.push(17),k.altKey&&s.push(18),/mac/.test(B.navigator?B.navigator.userAgent.toLowerCase():"")?k.metaKey&&s.push(17):k.metaKey&&s.push(91),s.sort();var j=s.join(),c=H.$17b(f,function(W){if(W.key){var p=W.key.slice(0);return p.sort(),j===p.join()}});if(c){c.preventDefault!==!1&&k.preventDefault();var n=!1;c.disabled instanceof Function?n=c.disabled.call(H,c):c.disabled===!0&&(n=!0),n||H.$1b(c,k)}}},$39b:function(X){var p=this,N=m(X);p.$32b={x:N.pageX,y:N.pageY}},$38b:function(p){var R=this,x=m(p);R.$31b={x:x.pageX,y:x.pageY},R.$33b=n(function(){R.$31b&&(R.$32b?Q(R.$31b,R.$32b)<10&&R.$11b.show(p):R.$11b.show(p)),delete R.$33b,delete R.$31b,delete R.$32b},600)},$40b:function(){var W=this;W.$33b!=S&&(G(W.$33b),delete W.$33b,delete W.$31b,delete W.$32b)}}),g.widget.ContextMenu=function(m){var Y=this,X=Y._view=K.createView(null,Y);X[Z]="ht-widget-contextmenu",Y.setItems(m),Y.$13b=new t(Y),V(X,"font",C.contextMenuLabelFont),V(X,r,u),V(X,"cursor","default"),V(X,"-webkit-"+O,W),V(X,"-moz-"+O,W),V(X,"-ms-"+O,W),V(X,O,W),V(X,"box-sizing","border-box"),V(X,"-moz-box-sizing","border-box"),C.baseZIndex!=S&&V(X,"z-index",$(C.baseZIndex)+2+""),Y.$3b=function(I){Y.$13b.$4b(I)}},T("ContextMenu",q,{$5b:0,_items:S,$21b:S,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var J=this,V=J._enableGlobalKey;V===!1&&(l(d(),"keydown",J.$3b),J._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,c(d(),"keydown",this.$3b)},setItems:function(i){this._items=i},getItems:function(){return this._items},setVisibleFunc:function(W){this.$16b=W},setLabelMaxWidth:function(y){this.$43b=y},$1b:function(L,U){var R=this;if("check"===L.type)L.selected=!L.selected;else if("radio"===L.type){var X=L.groupId;R.$17b(R._items,function(M){M.groupId===X&&(M.selected=!1)}),L.selected=!0}if(R.hide(),L.action)L.action.apply(L.scope||R,[L,U]);else if(L.href){var Z=L.linkTarget||"_self";B.open(L.href,Z)}},getItemById:function(c){return this.getItemByProperty("id",c)},setItemVisible:function(n,Z){var u=this.getItemById(n);u&&(u.visible=Z)},getItemByProperty:function(b,U,X){var i=this;if(X=X||i._items,!X||0===X.length)return S;var I=i.$17b(X,function(l){return l[b]===U});return I||S},scrollUp:function(T,s){var p=this;if(s=s==S?20:s,s=$(s),0!==s){var Y=0;T.$18b>s&&(Y=T.$18b-s),p.$42b(T,Y),T.scrollTop=Y,T.$18b=Y}},scrollDown:function(W,i){var x=this;if(i=i==S?20:i,i=$(i),0!==i){var J=W.$22b,H=W.$23b,t=J-H;H+W.$18b+i<J&&(t=W.$18b+i),x.$42b(W,t),W.scrollTop=t,W.$18b=t}},$42b:function(i,j){j=j==S?i.$18b:j;var C=i.$24b,n=i.$25b;C&&(V(C,"top",j+L),0==j?V(C,w,W):V(C,w,"block")),n&&(V(n,"bottom",-j+L),j==i.$22b-i.$23b?V(n,w,W):V(n,w,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(i,L){for(var r=0;r<i.length;r++){var p=i[r];if(L(p))return p;if(p.items){var P=this.$17b(p.items,L);if(P)return P}}},$2b:function(j,o){for(var P=this,I=0;I<j.length;I++){P.$5b++;var l=j[I];if(l.visible!==!1&&!(C.isFunction(l.visible)&&l.visible()===!1||P.$16b&&!P.$16b.call(P,l))){var _=D("li"),b=P.$5b+"";if(V(_,"white-space","nowrap"),V(_,w,"block"),"separator"===l||l.separator===!0){var c=p();c[Z]="separator",V(c,f,C.contextMenuSeparatorWidth+L),V(c,"background",C.contextMenuSeparatorColor),x(_,c)}else{l._id=b,_.setAttribute("data-id",b);var z=D("span"),O=D("span"),i=h(),Q=p();if(V(z,w,"inline-block"),V(z,f,"1.2em"),V(O,w,"inline-block"),V(O,f,"1.2em"),V(O,"line-height","1.2em"),i[Z]="prefix",V(i,w,"inline-block"),V(i,e,"1em"),V(i,f,"1em"),V(i,"vertical-align","middle"),V(i,k,"0 0.2em"),"check"===l.type&&l.selected?i[Z]+=" check-prefix":"radio"===l.type&&l.selected&&(i[Z]+=" radio-prefix"),x(_,i),l.icon){var s=h();s[Z]="contextmenu-item-icon",V(s,w,"inline-block"),V(s,f,"1.2em"),V(s,e,"1.2em"),V(s,"margin-right","0.2em"),V(s,"float","left"),s.$50b=l.icon,s._item=l,x(z,s)}if(O[H]=l.label,x(z,O),x(_,z),Q[Z]="suffix",V(Q,w,"inline-block"),V(Q,"margin-left","1em"),V(Q,"margin-right","0.4em"),V(Q,"text-align","right"),V(Q,"font-size","75%"),l.items&&(Q[H]=C.contextMenuSubmenuMark),l.suffix&&(Q[H]=l.suffix),x(_,Q),_[Z]="menu-item menu-item"+b,null!=l.background?l.background instanceof Function?V(_,"background-color",l.background.call(P,l)):V(_,"background-color",l.background):V(_,"background-color",C.contextMenuBackground),V(_,"color",C.contextMenuLabelColor),V(_,J,"3px 0"),l.disabled instanceof Function){var m=l.disabled.call(P,l);m&&(_[Z]+=" disabled",V(_,"color",C.contextMenuDisabledLabelColor))}else l.disabled&&(_[Z]+=" disabled",V(_,"color",C.contextMenuDisabledLabelColor));if(l.items){P.$21b||(P.$21b=new g.List);var S=D("ul");S[Z]="submenu"+b,S.$45b=b,V(S,F,"hidden"),V(S,r,u),x(P._view,S),P.$21b.add(S),P.$2b(l.items,S)}}x(o,_)}}},rebuild:function(){var U=this,c=U._items,X=U._view;if(X&&(X[H]="",U.$21b=S,U.$5b=0,U.$19b=S,U.$20b=S,X.$26b=S,c&&0!==c.length)){var T=D("ul",U._r);x(X,T),U.$2b(c,T)}},addTo:function(e){if(e){var w=this,J=w.$13b;if(w.$12b=e,w.$9b=function(y){J.$44b(y)},w.$27b=function(R){J.$41b(R)},U){var S=w.$6b=function(t){J.$38b(t)},Q=w.$7b=function(P){J.$39b(P)},E=w.$8b=function(g){J.$40b(g)};l(e,"touchstart",S,!0),l(e,"touchmove",Q),l(e,"touchend",E)}else l(e,"contextmenu",w.$27b)}},showOnView:function(V,j,x){V=V.getView?V.getView():V;var f=C.getWindowInfo(),d=V.getBoundingClientRect();this.show(d.left+f.left+j,d.top+f.top+x)},show:function(X,I,M){var J=this,M=M==S?!0:!1,G=J._view;if(G){if(J.invalidate(),1===arguments.length){var N=X;if(U){var E=m(N);X=E.pageX,I=E.pageY}else X=N.pageX,I=N.pageY}var b=C.getWindowInfo(),B=b.width,F=b.height,Y=b.left,h=b.top,K={pageX:X,pageY:I,clientX:X-Y,clientY:I-h,target:1,originEvent:N},n=K.clientX,Q=K.clientY,$=function(W){W.style.height=F-6+L;var f=p(),z=p(),$=function(c){V(c,r,u),V(c,"text-align","center"),V(c,e,"100%"),V(c,"font-size",10+L),V(c,"padding","2px 0"),V(c,"border","0px solid "+C.contextMenuScrollerBorderColor),V(c,"background-color",C.contextMenuScrollerColor1),c.style.backgroundImage="-webkit-linear-gradient(top, "+C.contextMenuScrollerColor1+", "+C.contextMenuScrollerColor2+")",c.style.backgroundImage="linear-gradient(to bottom, "+C.contextMenuScrollerColor1+", "+C.contextMenuScrollerColor2+")"};f[Z]="menu-arrow-item menu-arrow-item-top",z[Z]="menu-arrow-item menu-arrow-item-bottom",$(f),V(f,"top",R),V(f,"left",R),V(f,"border-bottom-width",1+L),f[H]="▲",$(z),V(z,"bottom",R),V(z,"left",R),V(z,"border-top-width",1+L),z[H]="▼",W.$24b=f,W.$25b=z,W.$18b=W.scrollTop,W.$22b=W.scrollHeight,W.$23b=W.clientHeight,x(W,f),x(W,z),J.$42b(W)};J.beforeShow&&J.beforeShow(K);var f=J._items;if(f&&(N&&N.preventDefault(),f.length)){J.rebuild(),C.appendToScreen(G),G.$26b=P(G,".menu-item");var c=G.children[0];c.offsetHeight>F&&$(c);var q=Q+(M?1:0),g=n+(M?1:0),k=function(g){for(var S=0,O=0,U=0,m=J.$43b;U<g.children.length;U++){var v=g.children[U];if(v.getAttribute("data-id")){var r=v.children[1],M=v.children[2],Y=r.children;if(m){var K=Y[0];Y.length>1&&(K=Y[1]),K.offsetWidth>m&&(K[H]="<marquee scrollamount='3'>"+K[H]+"</marquee>",K.children[0].style.verticalAlign="text-bottom",V(K,e,m+L),V(K,w,"inline-block"))}var W=r.offsetWidth,G=M.offsetWidth;W>S&&(S=W),G>O&&(O=G)}}for(U=0;U<g.children.length;U++){var v=g.children[U];if(v.getAttribute("data-id")){var r=v.children[1],M=v.children[2],s=r.children[0],k=r.children[1];!k&&s.style.width&&V(s,e,S+L),V(r,e,S+L),V(M,e,O+L)}}};k(c);var O=Q+3+G.offsetHeight,t=n+3+G.offsetWidth;O>F?V(G,i,q-(O-F)+h+L):V(G,i,q+h+L),t>B?V(G,z,g-(t-B)+Y+L):V(G,z,g+Y+L);var T=J.$21b;T&&T.each(function(v){k(v),v.offsetHeight>F&&$(v)}),J.$9b&&l(d(),U?"touchstart":"mousedown",J.$9b,!0),J.afterShow&&J.afterShow(K),J.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=S:!1},getRelatedView:function(){return this.$12b},hide:function(){var m=this,Z=m._view;Z&&Z.parentNode&&(I(Z.parentNode,Z),c(d(),U?"touchstart":"mousedown",m.$9b,!0),m.afterHide&&m.afterHide())},dispose:function(){var u=this,d=u.$12b,D=u._view;D&&(D.parentNode&&I(D.parentNode,D),u.disableGlobalKey(),d&&(U?(c(d,"touchstart",u.$6b,!0),c(d,"touchmove",u.$7b),c(d,"touchend",u.$8b)):c(d,"contextmenu",u.$27b)),u._view=u._items=u.$21b=u.$19b=u.$12b=u.beforeShow=u.afterShow=u.afterHide=u.$9b=u.$3b=u.$6b=u.$7b=u.$8b=u.$27b=S)},$46b:function(_,V,d,a,R){var z=K.initContext(_);K.translateAndScale(z,0,0,1),z.clearRect(0,0,d,a),C.drawStretchImage(z,C.getImage(V),"fill",0,0,d,a,R,this),z.restore()},$47b:function(){var A,d,L,t=this,N=t._view;if(t.isShowing()){var y=P(N,".check-prefix");for(L=0;L<y.length;L++){var b=y[L];A=b.clientWidth,d=b.clientHeight,b.$48b=A,b.$49b=d,K.setCanvas(b,A,d)}var z=P(N,".radio-prefix");for(L=0;L<z.length;L++){var h=z[L];A=h.clientWidth,d=h.clientHeight,h.$48b=A,h.$49b=d,K.setCanvas(h,A,d)}var r=P(N,".contextmenu-item-icon");for(L=0;L<r.length;L++){var x=r[L];A=x.clientWidth,d=x.clientHeight,x.$48b=A,x.$49b=d,K.setCanvas(x,A,d)}}},validateImpl:function(){var p,j,m,V=this,e=V._view;if(V.isShowing()){var M=P(e,".check-prefix");for(m=0;m<M.length;m++){var b=M[m];p=b.$48b,j=b.$49b,p&&j&&V.$46b(b,C.contextMenuCheckIcon,p,j)}var n=P(e,".radio-prefix");for(m=0;m<n.length;m++){var Z=n[m];p=Z.$48b,j=Z.$49b,p&&j&&V.$46b(Z,C.contextMenuRadioIcon,p,j)}var O=P(e,".contextmenu-item-icon");for(m=0;m<O.length;m++){var U=O[m];p=U.$48b,j=U.$49b,p&&j&&V.$46b(U,C.getImage(U.$50b),p,j,U._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);