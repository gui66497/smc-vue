!function(Y){"use strict";var E="ht",$=Y[E],U=Math,o=U.max,y=U.min,s=U.abs,N=U.atan2,h=(U.cos,U.sin,U.ceil),z=$.Default,w=z.getInternal(),F=$.List,k=w.Mat,f=w.getNodeRect,J=w.intersectionLineRect,I=z.getDistance,i=z.setEdgeType,b="left",x="right",v="top",t="bottom",q="edge.type",V="edge.gap",A="edge.center",d="edge.extend",p=function(m,W){return f(m,W).width},M=function(G,n){return f(G,n).height},Q=function(j,F){return w.getEdgeHostPosition(j,F,"source")},j=function(i,Z){return w.getEdgeHostPosition(i,Z,"target")},O=function(p,k){var C=p.s(q),S=p.getEdgeGroup();if(S){var i=0;if(S.eachSiblingEdge(function(p){k.isVisible(p)&&p.s(q)==C&&i++}),i>1)return p.s(V)*(i-1)/2}return 0},u=function(H,j){var i=H.s(q),e=H.isLooped();if(!H.getEdgeGroup())return e?H.s(V):0;var x,E=0,m=0,C=0;return H.getEdgeGroup().getSiblings().each(function(Z){Z.each(function(T){if(T._40I===H._40I&&T.s(q)==i&&j.isVisible(T)){var K=T.s(V);x?(m+=C/2+K/2,C=K):(x=T,C=K),T===H&&(E=m)}})}),e?m-E+C:E-m/2},W=function(V,x){var J=x.s("edge.corner.radius");return z.toRoundedCorner(V,J)};w.addMethod($.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),i("boundary",function(i,D,P,V){V||(D=-D);var w,Y=Q(P,i),e=j(P,i),S=f(P,i._40I),m=f(P,i._41I),C=new k(N(e.y-Y.y,e.x-Y.x)),h=I(Y,e),U=Y.x,c=Y.y;return w=C.tf(0,D),Y={x:w.x+U,y:w.y+c},w=C.tf(h,D),e={x:w.x+U,y:w.y+c},w=J(Y,e,S),w&&(Y={x:w[0],y:w[1]}),w=J(Y,e,m),w&&(e={x:w[0],y:w[1]}),{points:new F([Y,e])}}),i("ripple",function(E,z,n,q){q||(z=-z);var S=Q(n,E),B=j(n,E),e=I(S,B),W=y(E.s("edge.offset"),e/2),G=E.s("edge.ripple.size"),R=E.s("edge.ripple.length"),o=E.s("edge.ripple.both"),s=E.s(A),O=E.s("edge.ripple.elevation"),u=new F,a=E.s("edge.ripple.straight")?null:new F,D=new k(N(B.y-S.y,B.x-S.x));q||(O=-O),e-=2*W,R>0&&(G=h(e/R));var K=e/G;a&&a.add(1);for(var Z=0;G>Z;Z++)a&&a.add(3),0===Z?u.add({x:W+K*Z,y:s?0:z}):u.add({x:W+K*Z,y:z}),u.add({x:W+K*Z+K/2,y:O+z}),o&&(O=-O);for(u.add({x:W+e,y:s?0:z}),Z=0;Z<u.size();Z++){var b=D.tf(u.get(Z));b.x+=S.x,b.y+=S.y,u.set(Z,b)}return{points:u,segments:a}}),i("h.v",function(r,D,h){D=u(r,h);var y=new F,J=r.s(A),Z=Q(h,r),s=Z.x,t=Z.y,H=j(h,r),L=H.x,z=H.y,k=r._40I instanceof $.Edge,i=r._41I instanceof $.Edge,Y=0,w=0,T=L-s,I=z-t;return J||(Y=k?0:p(h,r._40I)/2,w=i?0:M(h,r._41I)/2),T>=0&&0>=I?(y.add({x:s+Y,y:t+D}),y.add({x:L+D,y:t+D}),y.add({x:L+D,y:z+w})):0>=T&&I>=0?(y.add({x:s-Y,y:t+D}),y.add({x:L+D,y:t+D}),y.add({x:L+D,y:z-w})):T>=0&&I>=0?(y.add({x:s+Y,y:t+D}),y.add({x:L-D,y:t+D}),y.add({x:L-D,y:z-w})):(y.add({x:s-Y,y:t+D}),y.add({x:L-D,y:t+D}),y.add({x:L-D,y:z+w})),W(y,r)}),i("v.h",function(g,J,h){J=u(g,h);var f=new F,s=g.s(A),D=Q(h,g),P=D.x,m=D.y,G=j(h,g),V=G.x,n=G.y,b=g._40I instanceof $.Edge,_=g._41I instanceof $.Edge,X=0,c=0,E=V-P,v=n-m;return s||(X=_?0:p(h,g._41I)/2,c=b?0:M(h,g._40I)/2),E>=0&&0>=v?(f.add({x:P+J,y:m-c}),f.add({x:P+J,y:n+J}),f.add({x:V-X,y:n+J})):0>=E&&v>=0?(f.add({x:P+J,y:m+c}),f.add({x:P+J,y:n+J}),f.add({x:V+X,y:n+J})):E>=0&&v>=0?(f.add({x:P-J,y:m+c}),f.add({x:P-J,y:n+J}),f.add({x:V-X,y:n+J})):(f.add({x:P-J,y:m-c}),f.add({x:P-J,y:n+J}),f.add({x:V+X,y:n+J})),W(f,g)}),i("ortho",function(m,k,d){var g=new F,o=m.s(A),l=m.s("edge.ortho"),x=m._40I,H=m._41I,E=Q(d,m),z=E.x,t=E.y,B=j(d,m),y=B.x,q=B.y,T=y-z,e=q-t,J=x instanceof $.Edge,Y=H instanceof $.Edge,U=o||J?0:p(d,x)/2,V=o||J?0:M(d,x)/2,C=o||Y?0:p(d,H)/2,Z=o||Y?0:M(d,H)/2,b=(T-(U+C)*(T>0?1:-1))*l,r=(e-(V+Z)*(e>0?1:-1))*l;return s(T)<s(e)?T>=0&&0>=e?(g.add({x:z+k,y:t-V}),g.add({x:z+k,y:t+r+k-V}),g.add({x:y+k,y:t+r+k-V}),g.add({x:y+k,y:q+Z})):0>=T&&e>=0?(g.add({x:z+k,y:t+V}),g.add({x:z+k,y:t+r+k+V}),g.add({x:y+k,y:t+r+k+V}),g.add({x:y+k,y:q-Z})):T>=0&&e>=0?(g.add({x:z+k,y:t+V}),g.add({x:z+k,y:t+r-k+V}),g.add({x:y+k,y:t+r-k+V}),g.add({x:y+k,y:q-Z})):(g.add({x:z+k,y:t-V}),g.add({x:z+k,y:t+r-k-V}),g.add({x:y+k,y:t+r-k-V}),g.add({x:y+k,y:q+Z})):T>=0&&0>=e?(g.add({x:z+U,y:t+k}),g.add({x:z+b+k+U,y:t+k}),g.add({x:z+b+k+U,y:q+k}),g.add({x:y-C,y:q+k})):0>=T&&e>=0?(g.add({x:z-U,y:t+k}),g.add({x:z+b+k-U,y:t+k}),g.add({x:z+b+k-U,y:q+k}),g.add({x:y+C,y:q+k})):T>=0&&e>=0?(g.add({x:z+U,y:t+k}),g.add({x:z+b-k+U,y:t+k}),g.add({x:z+b-k+U,y:q+k}),g.add({x:y-C,y:q+k})):(g.add({x:z-U,y:t+k}),g.add({x:z+b-k-U,y:t+k}),g.add({x:z+b-k-U,y:q+k}),g.add({x:y+C,y:q+k})),W(g,m)}),i("flex",function(E,n,Y){var l=new F,y=E.s("edge.flex")+O(E,Y),g=E.s(A),Z=E._40I,H=E._41I,N=Q(Y,E),w=N.x,a=N.y,D=j(Y,E),z=D.x,o=D.y,u=Z instanceof $.Edge,U=H instanceof $.Edge,t=z-w,q=o-a,d=g||u?0:p(Y,Z)/2,R=g||u?0:M(Y,Z)/2,r=g||U?0:p(Y,H)/2,m=g||U?0:M(Y,H)/2,K=t>0?y:-y,S=q>0?y:-y;return s(t)<s(q)?t>=0&&0>=q?(l.add({x:w+n,y:a-R}),l.add({x:w+n,y:a+S+n-R}),l.add({x:z+n,y:o-S+n+m}),l.add({x:z+n,y:o+m})):0>=t&&q>=0?(l.add({x:w+n,y:a+R}),l.add({x:w+n,y:a+S+n+R}),l.add({x:z+n,y:o-S+n-m}),l.add({x:z+n,y:o-m})):t>=0&&q>=0?(l.add({x:w+n,y:a+R}),l.add({x:w+n,y:a+S-n+R}),l.add({x:z+n,y:o-S-n-m}),l.add({x:z+n,y:o-m})):(l.add({x:w+n,y:a-R}),l.add({x:w+n,y:a+S-n-R}),l.add({x:z+n,y:o-S-n+m}),l.add({x:z+n,y:o+m})):t>=0&&0>=q?(l.add({x:w+d,y:a+n}),l.add({x:w+K+n+d,y:a+n}),l.add({x:z-K+n-r,y:o+n}),l.add({x:z-r,y:o+n})):0>=t&&q>=0?(l.add({x:w-d,y:a+n}),l.add({x:w+K+n-d,y:a+n}),l.add({x:z-K+n+r,y:o+n}),l.add({x:z+r,y:o+n})):t>=0&&q>=0?(l.add({x:w+d,y:a+n}),l.add({x:w+K-n+d,y:a+n}),l.add({x:z-K-n-r,y:o+n}),l.add({x:z-r,y:o+n})):(l.add({x:w-d,y:a+n}),l.add({x:w+K-n-d,y:a+n}),l.add({x:z-K-n+r,y:o+n}),l.add({x:z+r,y:o+n})),W(l,E)}),i("extend.east",function(r,_,M){var e=new F,U=r.s(d)+O(r,M),G=r.s(A),s=Q(M,r),i=r._40I instanceof $.Edge,t=r._41I instanceof $.Edge,b=s.x+(G||i?0:p(M,r._40I)/2),Y=s.y,q=j(M,r),L=q.x+(G||t?0:p(M,r._41I)/2),v=q.y,S=o(b,L)+U;return Y>v?(e.add({x:b,y:Y+_}),e.add({x:S+_,y:Y+_}),e.add({x:S+_,y:v-_}),e.add({x:L,y:v-_})):(e.add({x:b,y:Y-_}),e.add({x:S+_,y:Y-_}),e.add({x:S+_,y:v+_}),e.add({x:L,y:v+_})),W(e,r)}),i("extend.west",function(q,I,c){var X=new F,J=q.s(d)+O(q,c),r=q.s(A),D=q._40I instanceof $.Edge,Z=q._41I instanceof $.Edge,V=Q(c,q),o=V.x-(r||D?0:p(c,q._40I)/2),g=V.y,i=j(c,q),m=i.x-(r||Z?0:p(c,q._41I)/2),n=i.y,H=y(o,m)-J;return g>n?(X.add({x:o,y:g+I}),X.add({x:H-I,y:g+I}),X.add({x:H-I,y:n-I}),X.add({x:m,y:n-I})):(X.add({x:o,y:g-I}),X.add({x:H-I,y:g-I}),X.add({x:H-I,y:n+I}),X.add({x:m,y:n+I})),W(X,q)}),i("extend.north",function(n,t,U){var V=new F,R=n.s(d)+O(n,U),h=n.s(A),w=n._40I instanceof $.Edge,q=n._41I instanceof $.Edge,p=Q(U,n),T=p.x,S=p.y-(h||w?0:M(U,n._40I)/2),D=j(U,n),L=D.x,Z=D.y-(h||q?0:M(U,n._41I)/2),z=y(S,Z)-R;return T>L?(V.add({y:S,x:T+t}),V.add({y:z-t,x:T+t}),V.add({y:z-t,x:L-t}),V.add({y:Z,x:L-t})):(V.add({y:S,x:T-t}),V.add({y:z-t,x:T-t}),V.add({y:z-t,x:L+t}),V.add({y:Z,x:L+t})),W(V,n)}),i("extend.south",function(v,J,g){var w=new F,q=v.s(d)+O(v,g),l=v.s(A),e=v._40I instanceof $.Edge,I=v._41I instanceof $.Edge,X=Q(g,v),U=X.x,r=X.y+(l||e?0:M(g,v._40I)/2),V=j(g,v),u=V.x,K=V.y+(l||I?0:M(g,v._41I)/2),n=o(r,K)+q;return U>u?(w.add({y:r,x:U+J}),w.add({y:n+J,x:U+J}),w.add({y:n+J,x:u-J}),w.add({y:K,x:u-J})):(w.add({y:r,x:U-J}),w.add({y:n+J,x:U-J}),w.add({y:n+J,x:u+J}),w.add({y:K,x:u+J})),W(w,v)});var G=function(A,g,m,I,$){if(I.sort(function(n,u){var E=n.getSourceAgent()===g?n.getTargetAgent():n.getSourceAgent(),F=u.getSourceAgent()===g?u.getTargetAgent():u.getSourceAgent(),K=E.p(),t=F.p();if(m===b||m===x){if(K.y>t.y)return 1;if(K.y<t.y)return-1}else{if(K.x>t.x)return 1;if(K.x<t.x)return-1}return z.sortFunc(n.getId(),u.getId())}),$){for(var O,W,Z,T=A.getSourceAgent(),N=A.getTargetAgent(),i=0;i<I.size();i++){var R=I.get(i);R.getSourceAgent()===T&&R.getTargetAgent()===N||R.getTargetAgent()===T&&R.getSourceAgent()===N?(W||(W=new F),W.add(R,0)):W?(Z||(Z=new F),Z.add(R)):(O||(O=new F),O.add(R))}I.clear(),O&&I.addAll(O),W&&I.addAll(W),Z&&I.addAll(Z)}var q=I.indexOf(A),k=I.size(),p=A.s(V);return{side:m,index:q,size:k,offset:-p*(k-1)/2+p*q}},P=function(n,m,F,Q,N){var Z=m.s(q);return G(m,F,Q,F.getAgentEdges().toList(function(c){return n.isVisible(c)&&c.s(q)===Z}),N)},R=function(o,X){var l=o.getSourceAgent()===X?o.getTargetAgent():o.getSourceAgent(),q=X.p(),d=l.p(),w=d.x-q.x,k=d.y-q.y;return w>0&&s(k)<=w?x:0>w&&s(k)<=-w?b:k>0&&s(w)<=k?t:v},n=function(d,_,z){var A=_.s(q),c=R(_,z);return G(_,z,c,z.getAgentEdges().toList(function(s){return d.isVisible(s)&&s.s(q)===A&&R(s,z)===c}))},e=function(S,l){var L=S.getSourceAgent()===l,n=L?S.getTargetAgent():S.getSourceAgent(),i=l.p(),E=n.p();return L?i.y>E.y?v:t:i.x<E.x?x:b},S=function(M,H,j){var V=H.s(q),A=e(H,j);return G(H,j,A,j.getAgentEdges().toList(function(C){return M.isVisible(C)&&C.s(q)===V&&e(C,j)===A}),A===x||A===t)},X=function(D,E){var X=D.getSourceAgent()===E,j=X?D.getTargetAgent():D.getSourceAgent(),B=E.p(),L=j.p();return X?B.x<L.x?x:b:B.y>L.y?v:t},r=function(U,B,I){var s=B.s(q),y=X(B,I);return G(B,I,y,I.getAgentEdges().toList(function(C){return U.isVisible(C)&&C.s(q)===s&&X(C,I)===y}),y===x||y===t)},D=function(a,Y,y){var E=a.getSourceAgent(),d=a.getTargetAgent(),H=E.getId()>d.getId(),j=H?d:E,e=H?E:d,X=j.p(),K=e.p(),V=y(Y,a,j),w=y(Y,a,e),S=a.s(A),R=S?0:p(Y,j)/2,L=S?0:p(Y,e)/2,u=S?0:M(Y,j)/2,r=S?0:M(Y,e)/2,T=V.offset,h=w.offset,n=V.side,c=w.side,l=new F;return n===v?(l.add({x:X.x+T,y:X.y-u}),l.add({x:X.x+T,y:K.y+h}),c===b?l.add({x:K.x-L,y:K.y+h}):l.add({x:K.x+L,y:K.y+h})):n===t?(l.add({x:X.x+T,y:X.y+u}),l.add({x:X.x+T,y:K.y+h}),c===b?l.add({x:K.x-L,y:K.y+h}):l.add({x:K.x+L,y:K.y+h})):n===b?(l.add({x:X.x-R,y:X.y+T}),l.add({x:K.x+h,y:X.y+T}),c===t?l.add({x:K.x+h,y:K.y+r}):l.add({x:K.x+h,y:K.y-r})):n===x&&(l.add({x:X.x+R,y:X.y+T}),l.add({x:K.x+h,y:X.y+T}),c===t?l.add({x:K.x+h,y:K.y+r}):l.add({x:K.x+h,y:K.y-r})),H&&l.reverse(),W(l,a)};i("ortho2",function(r,f,J){var e,$,l=r.s(A),y=r.s("edge.ortho"),Q=r.getSourceAgent(),H=r.getTargetAgent(),V=Q.getId()>H.getId(),C=V?H:Q,P=V?Q:H,g=C.p(),a=P.p(),D=n(J,r,C),Y=n(J,r,P),O=l?0:p(J,C)/2,K=l?0:M(J,C)/2,i=l?0:p(J,P)/2,Z=l?0:M(J,P)/2,B=new F,d=D.offset,c=Y.offset,m=D.side;return m===x?(e=a.y>g.y?-d:d,$=g.x+O+(a.x-i-g.x-O)*y,B.add({x:g.x+O,y:g.y+d}),B.add({x:$+e,y:g.y+d}),B.add({x:$+e,y:a.y+c}),B.add({x:a.x-i,y:a.y+c})):m===b?(e=a.y>g.y?-d:d,$=g.x-O-(g.x-O-a.x-i)*y,B.add({x:g.x-O,y:g.y+d}),B.add({x:$-e,y:g.y+d}),B.add({x:$-e,y:a.y+c}),B.add({x:a.x+i,y:a.y+c})):m===t?(e=a.x>g.x?-d:d,$=g.y+K+(a.y-Z-g.y-K)*y,B.add({x:g.x+d,y:g.y+K}),B.add({x:g.x+d,y:$+e}),B.add({x:a.x+c,y:$+e}),B.add({x:a.x+c,y:a.y-Z})):m===v&&(e=a.x>g.x?-d:d,$=g.y-K-(g.y-K-a.y-Z)*y,B.add({x:g.x+d,y:g.y-K}),B.add({x:g.x+d,y:$-e}),B.add({x:a.x+c,y:$-e}),B.add({x:a.x+c,y:a.y+Z})),V&&B.reverse(),W(B,r)},!0),i("flex2",function(K,y,f){var G,N=K.getSourceAgent(),s=K.getTargetAgent(),Y=N.getId()>s.getId(),U=Y?s:N,T=Y?N:s,H=U.p(),u=T.p(),R=n(f,K,U),e=n(f,K,T),m=K.s(A),D=K.s("edge.flex")+(R.size-1)/2*K.s(V),h=m?0:p(f,U)/2,i=m?0:M(f,U)/2,l=m?0:p(f,T)/2,E=m?0:M(f,T)/2,S=new F,c=R.offset,_=e.offset,O=R.side;return O===x?(G=u.y>H.y?-c:c,S.add({x:H.x+h,y:H.y+c}),S.add({x:H.x+h+D+G,y:H.y+c}),S.add({x:u.x-l-D+G,y:u.y+_}),S.add({x:u.x-l,y:u.y+_})):O===b?(G=u.y>H.y?-c:c,S.add({x:H.x-h,y:H.y+c}),S.add({x:H.x-h-D-G,y:H.y+c}),S.add({x:u.x+l+D-G,y:u.y+_}),S.add({x:u.x+l,y:u.y+_})):O===t?(G=u.x>H.x?-c:c,S.add({x:H.x+c,y:H.y+i}),S.add({x:H.x+c,y:H.y+i+D+G}),S.add({x:u.x+_,y:u.y-E-D+G}),S.add({x:u.x+_,y:u.y-E})):O===v&&(G=u.x>H.x?-c:c,S.add({x:H.x+c,y:H.y-i}),S.add({x:H.x+c,y:H.y-i-D-G}),S.add({x:u.x+_,y:u.y+E+D-G}),S.add({x:u.x+_,y:u.y+E})),Y&&S.reverse(),W(S,K)},!0),i("extend.north2",function(q,u,D){var x=q.getSourceAgent(),e=q.getTargetAgent(),c=x.getId()>e.getId(),B=c?e:x,S=c?x:e,O=B.p(),X=S.p(),z=P(D,q,B,v),G=P(D,q,S,v,!0),Y=q.s(A),o=Y?0:M(D,B)/2,w=Y?0:M(D,S)/2,Z=z.offset,I=G.offset,p=q.s(d)+(z.size-1)/2*q.s(V),Q=y(O.y-o,X.y-w)-p+(O.x<X.x?Z:-Z),h=new F;return h.add({x:O.x+Z,y:O.y-o}),h.add({x:O.x+Z,y:Q}),h.add({x:X.x+I,y:Q}),h.add({x:X.x+I,y:X.y-w}),c&&h.reverse(),W(h,q)},!0),i("extend.south2",function(e,q,E){var g=e.getSourceAgent(),O=e.getTargetAgent(),Q=g.getId()>O.getId(),i=Q?O:g,D=Q?g:O,R=i.p(),b=D.p(),z=P(E,e,i,t),I=P(E,e,D,t,!0),U=e.s(A),c=U?0:M(E,i)/2,w=U?0:M(E,D)/2,_=z.offset,j=I.offset,x=e.s(d)+(z.size-1)/2*e.s(V),f=o(R.y+c,b.y+w)+x+(R.x>b.x?_:-_),G=new F;return G.add({x:R.x+_,y:R.y+c}),G.add({x:R.x+_,y:f}),G.add({x:b.x+j,y:f}),G.add({x:b.x+j,y:b.y+w}),Q&&G.reverse(),W(G,e)},!0),i("extend.west2",function(K,Y,m){var k=K.getSourceAgent(),T=K.getTargetAgent(),$=k.getId()>T.getId(),D=$?T:k,e=$?k:T,E=D.p(),J=e.p(),o=P(m,K,D,v),B=P(m,K,e,v,!0),u=K.s(A),j=u?0:p(m,D)/2,z=u?0:p(m,e)/2,R=o.offset,G=B.offset,t=K.s(d)+(o.size-1)/2*K.s(V),X=y(E.x-j,J.x-z)-t+(E.y<J.y?R:-R),c=new F;return c.add({x:E.x-j,y:E.y+R}),c.add({x:X,y:E.y+R}),c.add({x:X,y:J.y+G}),c.add({x:J.x-z,y:J.y+G}),$&&c.reverse(),W(c,K)},!0),i("extend.east2",function(e,S,t){var R=e.getSourceAgent(),g=e.getTargetAgent(),q=R.getId()>g.getId(),B=q?g:R,Z=q?R:g,m=B.p(),I=Z.p(),n=P(t,e,B,v),r=P(t,e,Z,v,!0),j=e.s(A),E=j?0:p(t,B)/2,l=j?0:p(t,Z)/2,C=n.offset,h=r.offset,w=e.s(d)+(n.size-1)/2*e.s(V),x=o(m.x+E,I.x+l)+w+(m.y>I.y?C:-C),T=new F;return T.add({x:m.x+E,y:m.y+C}),T.add({x:x,y:m.y+C}),T.add({x:x,y:I.y+h}),T.add({x:I.x+l,y:I.y+h}),q&&T.reverse(),W(T,e)},!0),i("v.h2",function(u,t,I){return D(u,I,S)},!0),i("h.v2",function(e,W,f){return D(e,f,r)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);