!function(L,p){"use strict";var i="position",M="absolute",E="relative",h="px",y="left",T="right",S="top",U="bottom",z="display",f="none",H="block",b=ht.Default,x=b.getInternal(),N=Math.floor,C=Math.ceil,_=Math.PI,g=null,X=L.parseInt,B=function(m){return m.getContext("2d")},m=function(){return document},o=function(r){return m().createElement(r)},n=function(){return o("canvas")},q=function(a,t,u){a.style.setProperty(t,u,g)},R=function(R,j,s){b.def(ht.widget[R],j,s)},t=function(P,z){P.appendChild(z)},c=function(u,D){u.removeChild(D)},x=b.getInternal(),A=x.addEventListener,s=x.removeEventListener;ht.widget.RulerFrame=function(S){var a=this,y=a._view=x.createView(null,a),J=a.$1k=n(),X=a.$2k=n(),U=a.$3k=n(),k=a.$4k=n();a._defaultRulerConfig={size:20,borderWidth:1,borderStyle:"solid",borderColor:"#888",defaultMajorTickSpacing:50,minMajorTickSpacing:10,minPhysicalMajorTickSpacing:40,maxPhysicalMajorTickSpacing:100,tickSpacingAdaptable:!0,majorTickTextFont:"12px Arial",majorTickTextColor:"#666",majorTickColor:"#888",minorTickColor:"#ccc",background:"rgba(0,0,0,0)",guideColor:"rgb(0, 173, 239)",guideWidth:2,guideVisible:!1,guideTipVisible:!1,guideTipBorderColor:"#666",guideTipTextColor:"#666",guideTipTextFont:"12px Arial",guideTipBackground:"#fff"},a._topRulerConfig={visible:!0},a._rightRulerConfig={visible:!1},a._bottomRulerConfig={visible:!1},a._leftRulerConfig={visible:!0},t(y,J),t(y,U),t(y,X),t(y,k),q(y,i,E),q(y,"box-sizing","border-box"),q(y,"-moz-box-sizing","border-box"),q(J,i,M),q(X,i,M),q(U,i,M),q(k,i,M),a.$14k=function(){a.$13k=1,a.iv()},a.$15k=function(P){if(a._topRulerConfig.guideVisible||a._rightRulerConfig.guideVisible||a._bottomRulerConfig.guideVisible||a._leftRulerConfig.guideVisible||a._defaultRulerConfig.guideVisible||(a._topRulerConfig.guideTipVisible||a._rightRulerConfig.guideTipVisible||a._bottomRulerConfig.guideTipVisible||a._leftRulerConfig.guideTipVisible||a._defaultRulerConfig.guideTipVisible)&&a._component){var m=y.getBoundingClientRect();a.$16k={x:P.clientX-m.left,y:P.clientY-m.top},a.$5k()}},a.setComponent(S)},R("RulerFrame",p,{ms_v:1,ms_fire:1,ms_ac:["defaultRulerConfig","topRulerConfig","rightRulerConfig","bottomRulerConfig","leftRulerConfig","component"],setComponent:function(k){var h=this,C=h._component,y=h.getView();if(y){if(h._component=k,h.fp("component",C,k),C){var n=h.getComponentView(C);c(y,n),s(y,"mousemove",h.$15k),h.removeComponentPropertyChangeListener(C,h.$14k)}if(k){var U=h.getComponentView(k);t(y,U),q(U,i,M),A(y,"mousemove",h.$15k),h.addComponentPropertyChangeListener(k,h.$14k)}}},addComponentPropertyChangeListener:function(e,h){e&&e.mp&&e.mp(h)},removeComponentPropertyChangeListener:function(D,c){D&&D.ump&&D.ump(c)},getComponentHZoom:function(t){return t&&t.getZoom?t.getZoom():1},getComponentVZoom:function(G){return G&&G.getZoom?G.getZoom():1},getComponentViewRect:function(G){return G&&G.getViewRect?G.getViewRect():void 0},getComponentView:function(J){return J&&J.getView?J.getView():J},invalidateComponent:function(s){s&&s.iv&&s.iv()},validateComponent:function(S){S&&S.validate&&S.validate()},$7k:function(I,s,O,L,t,i,S,y,X,b,k,R){if(s.visible){var e=this._defaultRulerConfig,F="borderStyle",J="borderColor",B="borderWidth",U="background",T=s[F]||e[F],V=s[J]||e[J],Z=s[B]||e[B],l=s.size!=g?s.size:e.size,r=s[U]||e[U],P=l+Z,h=this.$6k(Z,T,V,I,O,t,P,S,y,X,b,k,R);q(I,t,"0px"),i?x.setCanvas(I,L-h,l):x.setCanvas(I,l,L-h),q(I,"background",r),q(I,z,H)}else q(I,z,f),q(this.getComponentView(this._component),t,"0px")},$6k:function(C,y,A,f,o,W,a,l,$,B,r,U,F){var b=0;return q(f,o,C+"px "+y+" "+A),q(this.getComponentView(this._component),W,a+h),l?(q(f,$,B+h),b+=B):q(f,$,"0px"),r?(q(f,U,F+h),b+=F):q(f,U,"0px"),b},validateImpl:function(){var w=this,F=w._component,B=w.$1k,i=w.$2k,Y=w.$3k,I=w.$4k,t=w._view,x=w._defaultRulerConfig,A=w._topRulerConfig,d=w._rightRulerConfig,m=w._bottomRulerConfig,_=w._leftRulerConfig,Z=x.size;if(t&&F){var Q=A.size!=g?A.size:Z,G=d.size!=g?d.size:Z,e=m.size!=g?m.size:Z,P=_.size!=g?_.size:Z;w.$7k(B,A,"border-bottom",t.offsetWidth,S,!0,_.visible,y,P,d.visible,T,G),w.$7k(i,d,"border-left",t.offsetHeight,T,!1,A.visible,S,Q,m.visible,U,e),w.$7k(Y,m,"border-top",t.offsetWidth,U,!0,_.visible,y,P,d.visible,T,G),w.$7k(I,_,"border-right",t.offsetHeight,y,!1,A.visible,S,Q,m.visible,U,e),w.$13k?delete w.$13k:w.invalidateComponent(F),w.validateComponent(F),w.$5k()}},$5k:function(){function o(j,$,q,o,I,m){if($.visible){var D=B(j),b=$[M]||l,S=$[E]!=g?$[E]:r,f=$[p]||G,x=$[J]||N,n=$.size!=g?$.size:y,hn=$[V]||W,bo=$[d]||Q,cc=$[z]||C,vk=$[v]!=g?$[v]:k,xs=$[P]!=g?$[P]:Y,xb=$[A]!=g?$[A]:w,ed=$[Z]!=g?$[Z]:t,bp=$[u]!=g?$[u]:_,cm=$[L]!=g?$[L]:a,kc=$[F]||vr,Zh=$[U]||cr;S&&(b=O[m]=O.$8k(O[m]||b,$[X]||e,$[T]||c,o?i:K,bo)),q.call(O,D,R,H,s,h,n,o?i:K,b,f,x,I,hn,cc);var Vg=O.$16k;(vk||xs)&&Vg&&(o?O.$9k(D,Vg.x,n,kc,Zh,vk,xs,xb,ed,bp,cm):O.$10k(D,Vg.y,n,kc,Zh,vk,xs,xb,ed,bp,cm,I))}}var O=this,I=O.$1k,q=O.$2k,S=O.$3k,x=O.$4k,$=O._topRulerConfig,D=O._rightRulerConfig,j=O._bottomRulerConfig,n=O._leftRulerConfig,f=O._defaultRulerConfig,m=O._component,b=O.getComponentViewRect(m),i=O.getComponentHZoom(m),K=O.getComponentVZoom(m),R=b.x*i,s=R+b.width*i,H=b.y*K,h=H+b.height*K,y=O._defaultRulerConfig.size,M="defaultMajorTickSpacing",X="maxPhysicalMajorTickSpacing",T="minPhysicalMajorTickSpacing",E="tickSpacingAdaptable",p="majorTickTextFont",J="majorTickTextColor",V="majorTickColor",z="minorTickColor",v="guideVisible",P="guideTipVisible",A="guideTipBorderColor",Z="guideTipTextColor",u="guideTipTextFont",L="guideTipBackground",F="guideColor",U="guideWidth",d="minMajorTickSpacing",l=f[M],e=f[X],c=f[T],r=f[E],G=f[p],N=f[J],W=f[V],Q=f[d],C=f[z],k=f[v],Y=f[P],w=f[A],t=f[Z],_=f[u],a=f[L],vr=f[F],cr=f[U];O._view&&m&&(o(I,$,O.$11k,!0,!1,"_currentTopMajorTickSpacing"),o(q,D,O.$12k,!1,!0,"_currentRightMajorTickSpacing"),o(S,j,O.$11k,!0,!0,"_currentBottomMajorTickSpacing"),o(x,n,O.$12k,!1,!1,"_currenLeftMajorTickSpacing"))},$8k:function(a,x,z,p,t){return z>a*p?a=N(x/p/t)*t:a*p>x&&(a=C(z/p/t)*t),a},getHTipText:function(U){var m=this,J=m._component,R=0,S=m._view.getBoundingClientRect();return J.lp?R=X(J.lp({x:U.x+S.left,y:U.y}).x):R-=X(this.getComponentView(J).style.left)||0,R},$9k:function(Q,m,M,P,b,B,D,T,t,a,$){var z=this,Y=z._component;Q.save(),x.translateAndScale(Q,0,0,1);var y=m-(X(this.getComponentView(Y).style.left)||0),u=0;if(m=z.getHTipText(z.$16k),B&&(Q.beginPath(),Q.fillStyle=P,Q.rect(y,u,b,M),Q.fill()),D){Q.beginPath(),Q.textAlign="center",Q.textBaseline="middle",Q.font=a;var V=Q.measureText(m).width+6;Q.fillStyle=$,Q.rect(y-V/2,u,V,M),Q.fill(),Q.strokeStyle=T,Q.stroke(),Q.beginPath(),Q.fillStyle=t,Q.fillText(m,y,u+M/2)}Q.restore()},getVTipText:function(S){var t=this,v=t._component,w=0,G=t._view.getBoundingClientRect();return v.lp?w=X(v.lp({x:S.x,y:S.y+G.top}).y):w-=X(this.getComponentView(v).style.top)||0,w},formatScaleText:function(c){return Math.round(c)},$10k:function(N,n,S,u,l,R,Q,y,H,J,Z,t){var c=this,Y=c._component;N.save(),x.translateAndScale(N,0,0,1);var K=S/2,p=n-(X(this.getComponentView(Y).style.top)||0);if(n=c.getVTipText(c.$16k),R&&(N.beginPath(),N.fillStyle=u,N.rect(K-S/2,p,S,l),N.fill()),Q){N.translate(K,p),N.rotate((t?90:-90)*_/180),N.translate(-K,-p),N.beginPath(),N.textAlign="center",N.textBaseline="middle",N.font=J;var e=N.measureText(n).width+6;N.fillStyle=Z,N.rect(K-e/2,p-S/2,e,S),N.fill(),N.strokeStyle=y,N.stroke(),N.fillStyle=H,N.fillText(n,K,p)}N.restore()},$11k:function(D,R,B,O,q,u,r,z,C,E,f,Q,I){D.save(),B=0;var s=R,n=O,P=(s+n)/2;R=0,O=n-s,x.translateAndScale(D,0,0,1);var e=0,Y=0,H=X(u/2),p=u-H,V=f?0:H,M=z*r,c=M/10;R-=M,O+=M,D.clearRect(R,0,O-R,u),D.beginPath(),D.fillStyle=I;var l=N(P/c)*c-s;for(e=l;O>e;e+=c)D.rect(e,B+V,1,p);for(e=l;e>R;e-=c)D.rect(e,B+V,1,p);for(D.fill(),V=f?0:1,D.beginPath(),D.fillStyle=Q,l=N(P/M)*M-s,e=l;O>e;e+=M)D.rect(e,B+V,1,u-1);for(e=l;e>R;e-=M)D.rect(e,B+V,1,u-1);D.fill();var $=X(/\d+px/.exec(C)[0]),G=($||10)/2;D.textBaseline="middle",V=f?u-G-2:G+2,D.beginPath(),D.fillStyle=E,D.font=C;var T=N(P/M)*M/r;for(e=l,Y=T;O>e;e+=M,Y+=z){var y=this.getHScaleText?this.getHScaleText(e):Y;D.fillText(this.formatScaleText(y),e+2,B+V)}for(e=l,Y=T;e>R;e-=M,Y-=z){var y=this.getHScaleText?this.getHScaleText(e):Y;D.fillText(this.formatScaleText(y),e+2,B+V)}D.restore()},$12k:function(M,t,n,y,U,V,H,F,m,P,b,j,W){function Q(l,C,i,S,E,U){E=R.getVScaleText?R.getVScaleText(i):E,E=R.formatScaleText(E),M.translate(l+C,i),M.rotate(-S),M.translate(-l-C,-i),M.fillText(E,l+C+(U?2:1),i),M.translate(l+C,i),M.rotate(S),M.translate(-l-C,-i)}M.save(),t=0;var e=n,r=U,s=(e+r)/2;n=0,U=r-e,x.translateAndScale(M,0,0,1);var w=0,R=this,$=0,q=X(V/2),T=V-q,a=b?0:q,E=F*H,J=E/10;n-=E,U+=E,M.clearRect(t,0,V,U-n),M.beginPath(),M.fillStyle=W;var z=N(s/J)*J-e;for(w=z;U>w;w+=J)M.rect(t+a,w,T,1);for(w=z;w>n;w-=J)M.rect(t+a,w,T,1);for(M.fill(),a=b?0:1,M.beginPath(),M.fillStyle=j,z=N(s/E)*E-e,w=z;U>w;w+=E)M.rect(t+a,w,V-1,1);for(w=z;w>n;w-=E)M.rect(t+a,w,V-1,1);M.fill();var u=X(/\d+px/.exec(m)[0]),S=(u||10)/2,L=90*_/180;M.textBaseline="middle",a=b?V-S:S+2,L=b?-L:L,M.beginPath(),M.fillStyle=P,M.font=m;var B=N(s/E)*E/H;for(w=z,$=B;U>w;w+=E,$+=F)Q(t,a,w,L,$,b);for(w=z,$=B;w>n;w-=E,$-=F)Q(t,a,w,L,$,b);M.restore()},onPropertyChanged:function(){this.iv()},dispose:function(){var y=this,Y=y._component,r=y._view;Y&&y.removeComponentPropertyChangeListener(Y,y.$14k),r&&(s(r,"mousemove",y.$15k),c(r.parentNode,r),y._view=null)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);