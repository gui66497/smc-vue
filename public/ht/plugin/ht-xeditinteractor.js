!function(Q,y,z){"use strict";var w="ht",K=Q[w],q=K.Default,s=K.graph,E=q.getInternal(),j=E.ui(),o=j.NodeUI.prototype,p=j.ShapeUI.prototype,d=s.GraphView,V=d.prototype,l=j.EdgeUI.prototype,_=K.Node,n=K.Shape,X=K.Edge,L=K.Group,T=q.isTouchable,t=q.preventDefault,P=Q.setTimeout,c=q.grow,f=q.isDragging,W=q.getDistance,M=null,G=K.List,A="undefined"!=typeof Float32Array?Float32Array:Array,N=Math,H=N.PI,k="Crossing",h="No Crossing",C=H/2,u=2*H,Z=N.atan2,O=N.sqrt,S=N.pow,b=N.sin,B=N.cos,g=N.min,x=N.max,i=N.abs,I=N.ceil,Y=N.round,r=q.unionPoint,a=q.unionRect,U=q.containsPoint,e=q.clone,m="rgb(52, 152, 219)",v="red",R={northwest:0,north:1,northeast:2,west:7,east:3,southwest:6,south:5,southeast:4},F={width:400,height:100,comps:[{type:"shape",points:{func:function(){for(var Q=[10,8,162,36,314,37,269,2,398,49,268,98,314,58,161,60,9,91,103,49,10,8],S=0;S<Q.length;S++){var R=Q[S];R=0===S%2?R/400*F.width:R/100*F.height,Q[S]=R}return F.width>120&&(Q[4]=F.width-26,Q[6]=F.width-40,Q[10]=F.width-40,Q[12]=F.width-26,Q[18]=33),Q}},segments:[1,3,2,2,2,2,3,2,2],background:"white",gradient:"linear.east",gradientColor:"red"}]},J={width:300,height:300,comps:[{type:"circle",rect:[20,0,120,120],background:m,rotation:.61},{type:"circle",rect:[200,120,70,70],background:m,rotation:.61},{type:"circle",rect:[200,220,70,70],background:m,rotation:.61},{type:"shape",points:[80,60,80,155,200,155],borderWidth:20,borderColor:m},{type:"shape",points:[80,60,80,255,200,255],borderWidth:20,borderColor:m}]},D={width:300,height:300,comps:[{type:"shape",points:[114,239,115,106,112,73,149,73,149,73,175,73,177,105,179,261,178,302,147,307,98,308,83,307,72,276,73,260,72,81,74,29,115,21,191,21,221,22,224,53,223,238],segments:[1,2,3,2,3,2,3,2,4,2,3,2,3,2],borderWidth:20,borderColor:v,rotation:.61}]},$={width:300,height:300,comps:[{type:"circle",rect:[210,0,90,90],background:m},{type:"circle",rect:[0,210,90,90],background:m},{type:"shape",points:[255,45,45,255],borderWidth:20,borderColor:m}]},mq={width:300,height:300,comps:[{type:"shape",points:[20,20,280,280],borderWidth:30,borderColor:v},{type:"shape",points:[280,20,20,280],borderWidth:30,borderColor:v}]},Xi={width:300,height:300,comps:[{type:"shape",points:[270,30,30,150,270,270],borderWidth:40,borderColor:m}]},ep={width:300,height:300,comps:[{type:"shape",points:[30,30,270,150,30,270],borderWidth:40,borderColor:v}]},jd={width:300,height:300,comps:[{type:"rect",rect:[125.58,52.76,40,231.96],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[27.87,61.06,150,30],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:5.5},{type:"rect",rect:[113.36,61,150,30],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:.79}]},Ki={width:300,height:300,author:"",note:"",comps:[{type:"rect",rect:[135.15,38.76,28.63,82.84],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"triangle",rect:[94.69,2.35,110,44.77],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[31.71,115.72,240,15],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[31.71,167.62,240,15],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"rect",rect:[135.15,177.33,28.63,82.84],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000"},{type:"triangle",rect:[94.69,251.39,110,44.77],background:"rgb(0,0,0)",borderWidth:1,borderColor:"#000",rotation:3.14}]},Ik=function(R){var i=R.touches[0];return i?i:R.changedTouches[0]},Ff=function(J,$,A,I){return Z(I-$,A-J)},Dn=function(C,f){return{x:C.x*f,y:C.y*f}},eb=function(z,d){z.each(function(e){return z.isSelected(e)?d(e):void 0})},yo=function(K,a){K.reverseEach(function(b){return K.isSelected(b)?a(b):void 0})},bk=function(B,S,q){var J,g,$,F,z,j=this,e=S,c=j.gv;if(B instanceof n){$=B.getSegments();var W=c.getDataUI(B);z=W._55O.$15l,$&&$.size()||($=es(z)),B.isClosePath()&&$.indexOf(5)<0&&($=new G($._as),$.add(5)),J=Fi(B,W,e),g=z[J]}else{var N=c.getDataUI(B);z=cl(N,B.s("edge.points")),$=B.s("edge.segments"),$&&$.size()||($=es(z)),z=z._as,J=Fi(B,N,e),g=z[J]}if($&&(F=$.get(e)),2===F||1===F||5===F){var P=z[J+1];5===F&&(P=z[0]);var m=yc(g,q,P);return m}return q},dd=function(Y,b,r,W){var M=b/2,X=r/2,q=wl(Y,-M,-X,W),e=wl(Y,M,-X,W),$=wl(Y,-M,X,W),h=wl(Y,M,X,W),A=wl(Y,0,-X,W),F=wl(Y,M,0,W),p=wl(Y,0,X,W),G=wl(Y,-M,0,W);return[q,e,$,h,A,F,p,G]},yc=function(c,u,i){var B={x:u.x-c.x,y:u.y-c.y},H={x:i.x-c.x,y:i.y-c.y},t=O(S(i.x-c.x,2)+S(i.y-c.y,2)),l={x:H.x/t,y:H.y/t},n=B.x*l.x+B.y*l.y,E={x:l.x*n,y:l.y*n};return{x:c.x+E.x,y:c.y+E.y}},wl=function(d,u,F,L){var $=B(L)*u-b(L)*F,p=b(L)*u+B(L)*F;return d?{x:d.x+$,y:d.y+p}:{x:$,y:p}},gj=function(J,M){return M>2*J?J:M/2},zc=function(C,T,G,R){var Q=W(C,T);return G=R?g(G,Q):gj(G,Q),Q?G/=Q:G=0,{x:C.x+(T.x-C.x)*G,y:C.y+(T.y-C.y)*G}},is=function(j,Q){var H,f,A=j.gv,P=j._data,M=P._40I,z=P._41I,F=P.s("edge.offset"),J=P.s("edge.source.position"),U=P.s("edge.target.position"),o=P.s("edge.source.offset.x"),u=P.s("edge.source.offset.y"),a=P.s("edge.target.offset.x"),K=P.s("edge.target.offset.y"),i=P.s("edge.source.anchor.x"),q=P.s("edge.source.anchor.y"),S=P.s("edge.target.anchor.x"),V=P.s("edge.target.anchor.y");if(Q?(H=E.getEdgeAgentPosition(A,M,J,o,u,i,q),f=E.getEdgeAgentPosition(A,z,U,a,K,S,V)):(H=E.getEdgeAgentPosition(A,M,J,0,0,i,q),f=E.getEdgeAgentPosition(A,z,U,0,0,S,V)),"points"===P.s("edge.type")&&F&&!P.s("edge.center")&&H){var T=P.s("edge.points")||new G,B=T.size(),d=zc(H,B?T.get(0):f,F,B),n=zc(f,B?T.get(B-1):H,F,B);H=d,f=n}return[H,f]},cl=function(L,V,w){var W=L._78o,n=L._data,T=n.s("edge.type"),$=[W.sourcePoint,W.targetPoint];return"points"===T?w&&($=is(L)):$=W.center?T?w?is(L):is(L,!0):w?is(L):[W.c1,W.c2]:w?is(L):is(L,!0),V=new G(V?V._as:M),V.add($[0],0),V.add($[1]),V},Uh=function(q){return q=new G(q._as),q.removeAt(0),q.removeAt(q.size()-1),q},es=function($){$._as||($=new G($));var g=new G;g.add(1);for(var T=1;T<$.size();T++)g.add(2);return g},ql=function(G,P){return{x:(G.x+P.x)/2,y:(G.y+P.y)/2}},br=function(d,P){return{x:d.x+1*(P.x-d.x)/4,y:d.y+1*(P.y-d.y)/4}},vi=function(e,A){return{x:e.x+3*(A.x-e.x)/4,y:e.y+3*(A.y-e.y)/4}},Vf=function(m,r,f,R){var C=r.x+r.width/2,t=r.y+r.height/2,o=O(C*C+t*t),i=Z(t,C)+f;return{x:R.x+o*B(i),y:R.y+o*b(i)}},ks=V.validateImpl,us=V.isRectEditable,qn=V.isPointEditable,fb=V._42,Gj=p._79o,Mj=l._79o,Qc=p._48O,kb=p._47O,hn=o._48O,Eq=o._80o,Wo=p._80o,gc=o.getSelectWidth,Zq=o._47O,me=l._47O,uk=V.isEditable,ij=["northwest","north","northeast","east","southeast","south","southwest","west"],Iq=function(I,d,l,G,h,F,t,P,k,E){var U=I.x,i=I.y,n=I.width,O=I.height,s={x:U+n/2,y:i+O/2};G=G||0,d=wl(s,d.x-s.x,d.y-s.y,-G),t&&!P&&(d.x+=k,d.y+=E);var S=.01;if("northwest"===l?(d.x+h>U+n-S&&(d.x=U+n-h-S),d.y+h>i+O-S&&(d.y=i+O-h-S),I=r(d,{x:U+n,y:i+O})):"north"===l?(d.y+h>i+O-S&&(d.y=i+O-h-S),I=r({x:U,y:d.y},{x:U+n,y:i+O})):"northeast"===l?(d.x<U+h+S&&(d.x=U+h+S),d.y+h>i+O-S&&(d.y=i+O-h-S),I=r({x:U,y:d.y},{x:d.x,y:i+O})):"west"===l?(d.x+h>U+n-S&&(d.x=U+n-h-S),I=r({x:d.x,y:i},{x:U+n,y:i+O})):"east"===l?(d.x<U+h+S&&(d.x=U+h+S),I=r({x:U,y:i},{x:d.x,y:i+O})):"southwest"===l?(d.x+h>U+n-S&&(d.x=U+n-h-S),d.y<i+h+S&&(d.y=i+h+S),I=r({x:d.x,y:i},{x:U+n,y:d.y})):"south"===l?(d.y<i+h+S&&(d.y=i+h+S),I=r({x:U,y:i},{x:U+n,y:d.y})):"southeast"===l&&(d.x<U+h+S&&(d.x=U+h+S),d.y<i+h+S&&(d.y=i+h+S),I=r({x:U,y:i},d)),"keepRatio"===F&&(!t&&P||t&&!P)&&("northeast"===l||"southeast"===l||"northwest"===l||"southwest"===l)){var y=I.width,f=I.height,N=y/n,w=f/O,a=g(N,w);I.width=n*a,I.height=O*a,"northeast"===l?I.y=i+(O-I.height):"northwest"===l?(I.y=i+(O-I.height),I.x=U+(n-I.width)):"southwest"===l&&(I.x=U+(n-I.width))}I.x-=s.x,I.y-=s.y;var R=Vf(M,I,G,s);return I.x=R.x-I.width/2,I.y=R.y-I.height/2,I},cr=function(t,U,F,o){var A=t.getRotation(),c=U,N=c.x,h=c.y,M=c.width,p=c.height,e={x:N+c.width/2,y:h+c.height/2};o=wl(e,o.x-e.x,o.y-e.y,-A),"northwest"===F?c=r(o,{x:N+M,y:h+p}):"north"===F?c=r({x:N,y:o.y},{x:N+M,y:h+p}):"northeast"===F?c=r({x:N,y:o.y},{x:o.x,y:h+p}):"west"===F?c=r({x:o.x,y:h},{x:N+M,y:h+p}):"east"===F?c=r({x:N,y:h},{x:o.x,y:h+p}):"southwest"===F?c=r({x:o.x,y:h},{x:N+M,y:o.y}):"south"===F?c=r({x:N,y:h},{x:N+M,y:o.y}):"southeast"===F&&(c=r({x:N,y:h},o)),t.setRect(c),c.x-=e.x,c.y-=e.y;var f=Vf(t,c,A,e);t.p(f.x,f.y)},Yb=function(x,P,$,z,Y,X,n,G){var b=M;X?(b=wl(M,Y.x-P.x,Y.y-P.y,-$),b.x-=n.x,b.y-=n.y):b=wl(M,Y.x-P.x,Y.y-P.y,0);var t={x:P.x+b.x,y:P.y+b.y};G&&(t=G(t.x,t.y)),t.e=x.getPoints().get(z).e,x.setPoint(z,t);var _=x.getWidth(),h=x.getHeight(),l=x.p().x-_/2,R=x.p().y-h/2;l-=P.x,R-=P.y;var Q=Vf(x,{x:l,y:R,width:_,height:h},$,P);x.p(Q.x,Q.y)},Fi=function(r,f,s){var B,S;if(r instanceof n?(B=r.getPoints(),S=r.getSegments()):r instanceof X&&"points"===r.s("edge.type")&&(B=r.s("edge.points"),S=r.s("edge.segments"),B=cl(f,B)),S&&S.size()||(S=es(B)),r instanceof n&&r.isClosePath()&&S.indexOf(5)<0&&(S=new G(S._as),S.add(5)),S)for(var t=-1,Z=0;Z<S.size();Z++){if(Z===s)return t;var F=S.get(Z);1===F?t+=1:2===F?t+=1:3===F?t+=2:4===F&&(t+=3)}},yn=function(P,s,e){var L,E;if(P instanceof n?(L=P.getPoints(),E=P.getSegments()):P instanceof X&&"points"===P.s("edge.type")&&(L=P.s("edge.points"),E=P.s("edge.segments"),L=cl(s,L)),E&&E.size()||(E=es(L)),E)for(var W=-1,t=0;t<E.size();t++){var N=E.get(t);if(1===N?W+=1:2===N?W+=1:3===N?W+=2:4===N&&(W+=3),W===e)return t}},le=function(u,H){var L=[u[0]-H[0],u[1]-H[1],u[2]-H[2]];return L},pq=function(){var m=new A(16);return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m},ap=function(M,O){var Q=M[0],d=M[1],T=M[2];return M[0]=O[0]*Q+O[4]*d+O[8]*T+O[12],M[1]=O[1]*Q+O[5]*d+O[9]*T+O[13],M[2]=O[2]*Q+O[6]*d+O[10]*T+O[14],M},Uo=function(a,_){if(_){var F=b(_),Z=B(_),j=a[0],A=a[1],m=a[2],G=a[3],$=a[8],h=a[9],L=a[10],p=a[11];a[0]=j*Z-$*F,a[1]=A*Z-h*F,a[2]=m*Z-L*F,a[3]=G*Z-p*F,a[8]=j*F+$*Z,a[9]=A*F+h*Z,a[10]=m*F+L*Z,a[11]=G*F+p*Z}},qh=function(X,A){for(var M=X.s("grid.row.count"),$=X.s("grid.column.count"),e=0;M>e;e++)for(var u=0;$>u;u++){var O=X.getCellRect(e,u);if(U(O,A))return{rowIndex:e,columnIndex:u,rect:O,grid:X}}return null},Kq=function(D,e,A,o,F,B){var Q={},n=A-D,k=o-e,U=N.sqrt(n*n+k*k),m=n/U,$=k/U,K=(-D+F)*m+(-e+B)*$;return 0>=K?(Q.x=D,Q.y=e):K>=U?(Q.x=A,Q.y=o):(Q.x=D+K*m,Q.y=e+K*$),n=F-Q.x,k=B-Q.y,Q.z=N.sqrt(n*n+k*k),Q},Tk=function(k,S){var h,N,T,e,l,X,v,r,Y=k.getPoints(),p=k.getSegments(),D=k.p(),E=k.getRotation();if(!p||!(p.indexOf(3)>0||p.indexOf(4)>0)){for(r=0;r<=Y.size()-1;r++)if(r===Y.size()-1?(l=Y.get(0),e=Y.get(r)):(e=Y.get(r),l=Y.get(r+1)),e=wl(D,e.x-D.x,e.y-D.y,E),l=wl(D,l.x-D.x,l.y-D.y,E),X=Kq(e.x,e.y,l.x,l.y,S.x,S.y),v=X.z,v<(k.s("shape.border.width")||10)){N=e,T=l,h=r;break}if(h!=M){var s=Kq(N.x,N.y,T.x,T.y,S.x,S.y),m=W(N,s);return{attachIndex:h,attachOffset:m}}}},Ii=function(A){for(var k=A._data,d=k.p(),R=k.getRotation(),y=k.getPoints(),b=M,u=[],Y=0;Y<y.size();Y++)b=y.get(Y),u.push(wl(d,b.x-d.x,b.y-d.y,R));A._55O.$15l=u};q.setImage("xeditinteractor_parentIcon",J),q.setImage("xeditinteractor_hostIcon",D),q.setImage("xeditinteractor_edgeIcon",$),q.setImage("xeditinteractor_removeIcon",mq),q.setImage("xeditinteractor_sourceIcon",Xi),q.setImage("xeditinteractor_targetIcon",ep),q.setImage("xeditinteractor_elevationIcon",jd),q.setImage("xeditinteractor_tallIcon",Ki),V._editPointSize=T?24:9,V._edgeHelpers=["parent","remove","source","target"],V._leftTopHelpers=["parent"],V._rightTopHelpers=["host"],V._leftBottomHelpers=["edge"],V._rightBottomHelpers=["remove"],ij=ij.concat(ij).concat(ij),l._79o=function(){var N=this,v=N.gv,E=v.getZoom(),Q=v._editInteractor,l=Mj.call(N);if(!l)return null;var M=is(N,!0),S=M[0],Z=M[1],V={x:l.x,y:l.y,width:l.width,height:l.height},L=r(S,Z);if(Q instanceof s.XEditInteractor){V=a(V,L);var w=N._55O,z=v.getEditPointSize()/E+2,A=0;w&&w._43O&&(A+=z/2,c(V,A))}return V},l._47O=function(r){var N=this,E=N.gv,y=E._editInteractor;y instanceof s.XEditInteractor||me.call(N,r)},l.rectIntersects=function(e){var H=this,g=H._data,_=H.gv,q=_.getZoom(),m=H._55O,A=_._editInteractor;if(A instanceof s.XEditInteractor&&_.isEditable(g)&&m&&m._43O&&"points"===g.s("edge.type")){var C=g.s("edge.points"),P=g.s("edge.segments");C=cl(H,C),P&&P.size()||(P=es(C)),C=C._as;var X=!1,r=T?5:1,N=e.x+r,t=e.y+r,O={x:N,y:t};if(A._edge===g&&A._hoverSegmentIndex>=0){var y=_._editInteractor._hoverSegmentIndex,b=P.get(y),$=Fi(g,H,y),Q=M;if($!=M&&$>=0){var B=C[$],Y=_.getSegmentHoverWidth()/q;if(2===b||1===b){var G=C[$+1];Q=pm(new ye(B.x,B.y),new ye(G.x,G.y),new ye(O.x-Y,O.y-Y),new ye(O.x+2*Y,O.y+2*Y)),Q.$62l===k&&(X=!0)}else if(3===b){var V=C[$+1],G=C[$+2];Q=Me(new ye(B.x,B.y),new ye(V.x,V.y),new ye(G.x,G.y),new ye(O.x-Y,O.y-Y),new ye(O.x+2*Y,O.y+2*Y)),Q.$62l===k&&(X=!0)}else if(4===b){var R=C[$+1],j=C[$+2];G=C[$+3],Q=Bh(new ye(B.x,B.y),new ye(R.x,R.y),new ye(j.x,j.y),new ye(G.x,G.y),new ye(O.x-Y,O.y-Y),new ye(O.x+2*Y,O.y+2*Y)),Q.$62l===k&&(X=!0)}}}if(X)return!0}return M},p._47O=function(u){var M=this,O=M.gv,o=O._editInteractor;o instanceof s.XEditInteractor||kb.call(M,u)},p.rectIntersects=function(c){var v=this,h=v._data,J=v.gv,j=J.getZoom(),y=v._55O,Y=J._editInteractor;if(Y instanceof s.XEditInteractor&&J.isEditable(h)&&y&&y._43O){var m=y.$15l,P=!1,Z=T?5:1,I=c.x+Z,p=c.y+Z,$={x:I,y:p};if(m&&m.length===h.getPoints().size()||(Ii(v),m=y.$15l),Y._shape===h&&Y._hoverSegmentIndex>=0){var u=h.getSegments();u&&u.size()||(u=es(m));var i=J._editInteractor._hoverSegmentIndex,n=u.get(i),w=Fi(h,v,i),l=M;if(w!=M&&w>=0){var X=m[w],x=J.getSegmentHoverWidth()/j;if(2===n||1===n){var S=m[w+1];l=pm(new ye(X.x,X.y),new ye(S.x,S.y),new ye($.x-x,$.y-x),new ye($.x+2*x,$.y+2*x)),l.$62l===k&&(P=!0)}else if(3===n){var K=m[w+1],S=m[w+2];l=Me(new ye(X.x,X.y),new ye(K.x,K.y),new ye(S.x,S.y),new ye($.x-x,$.y-x),new ye($.x+2*x,$.y+2*x)),l.$62l===k&&(P=!0)}else if(4===n){var D=m[w+1],U=m[w+2];S=m[w+3],l=Bh(new ye(X.x,X.y),new ye(D.x,D.y),new ye(U.x,U.y),new ye(S.x,S.y),new ye($.x-x,$.y-x),new ye($.x+2*x,$.y+2*x)),l.$62l===k&&(P=!0)}}}if(P)return!0}return M},p._48O=function(){var l=this,C=l.gv,J=C._editInteractor;J instanceof s.XEditInteractor?(o._48O.call(l),l._55O._43O&&Ii(l)):Qc.call(l)},p._79o=function(){var E=this,K=E.gv,g=K.getZoom(),T=K._editInteractor,Q=Gj.call(E);if(Q){var x={x:Q.x,y:Q.y,width:Q.width,height:Q.height};if(T instanceof s.XEditInteractor){var z=E._55O,y=K.getEditPointSize()/g+2,t=0;z&&z._43O&&(t+=y/2,c(x,t))}return x}},o._47O=function(J){var $=this,_=$.gv,h=_._editInteractor;if(h instanceof s.XEditInteractor);else{var k=$._55O;k&&k._98o&&Zq.call($,J)}},o.getSelectWidth=function(){var g=this,l=g.gv,d=l._editInteractor,e=g._data;return l.isEditable(e)&&d instanceof s.XEditInteractor?0:gc.call(g)},o._80o=function(e){var C=this,T=C.gv._editInteractor;if(Eq.call(C,e),T&&T._debug){e.save(),e.beginPath(),e.lineWidth=1,e.strokeStyle="green";var i=C._79o();i&&(e.rect(i.x,i.y,i.width,i.height),e.stroke()),e.restore()}},p._80o=function(R){var I=this,Q=I.gv._editInteractor;if(Wo.call(I,R),Q&&Q._debug){R.save(),R.beginPath(),R.lineWidth=1,R.strokeStyle="green";var L=I._79o();R.rect(L.x,L.y,L.width,L.height),R.stroke(),R.restore()}},o._48O=function(){var i=this,t=i.gv,j=i._data,P=t._editInteractor,v=i._55O,W=j.p(),S=j.getRotation();if(P instanceof s.XEditInteractor){if(v._42O){var f=dd(W,j.getWidth(),j.getHeight(),S),E=f[0],k=f[1],$=f[2],U=f[3],F=f[4],Q=f[5],u=f[6],o=f[7];v.$45l=[E,F,k,Q,U,u,$,o]}}else hn.call(i)},V.getResizeMode=function(){return this.$25l||"normal"},V.setResizeMode=function(b){var H=this.$25l;this.$25l=b,this.fp("resizeMode",H,b)},V.getSnapAngle=function(){return this.$26l||Math.PI/36},V.setSnapAngle=function(q){var Q=this.$26l;this.$26l=q,this.fp("snapAngle",Q,q)},V.getSnapSpacing=function(){return this.$27l},V.setSnapSpacing=function(A){var b=this.$27l;this.$27l=A,this.fp("snapSpacing",b,A)},V.getPointSnapSpacing=function(){return this._pointSnapSpacing},V.setPointSnapSpacing=function(L){var j=this._pointSnapSpacing;this._pointSnapSpacing=L,this.fp("pointSnapSpacing",j,L)},V.setHelperEditableFunc=function(B){var W=this._helperEditableFunc;this._helperEditableFunc=B,this.fp("helperEditableFunc",W,B)},V.getHelperEditableFunc=function(){return this._helperEditableFunc},V.setLeftTopHelpers=function(M){var j=this._leftTopHelpers;this._leftTopHelpers=M,this.fp("leftTopHelpers",j,M)},V.getLeftTopHelpers=function(){return this._leftTopHelpers},V.setLeftTopHelpersAlign=function(c){var N=this._leftTopHelpersAlign;this._leftTopHelpersAlign=c,this.fp("leftTopHelpersAlign",N,c)},V.getLeftTopHelpersAlign=function(){return this._leftTopHelpersAlign},V.setRightTopHelpers=function(y){var i=this._rightTopHelpers;this._rightTopHelpers=y,this.fp("rightTopHelpers",i,y)},V.getRightTopHelpers=function(){return this._rightTopHelpers},V.setRightTopHelpersAlign=function(I){var f=this._rightTopHelpersAlign;this._rightTopHelpersAlign=I,this.fp("rightTopHelpersAlign",f,I)},V.getRightTopHelpersAlign=function(){return this._rightTopHelpersAlign},V.setLeftBottomHelpers=function(j){var P=this._leftBottomHelpers;this._leftBottomHelpers=j,this.fp("leftBottomHelpers",P,j)},V.getLeftBottomHelpers=function(){return this._leftBottomHelpers},V.setLeftBottomHelpersAlign=function(b){var i=this._leftBottomHelpersAlign;this._leftBottomHelpersAlign=b,this.fp("leftBottomHelpersAlign",i,b)},V.getLeftBottomHelpersAlign=function(){return this._leftBottomHelpersAlign},V.setRightBottomHelpers=function(V){var y=this._rightBottomHelpers;this._rightBottomHelpers=V,this.fp("rightBottomHelpers",y,V)},V.getRightBottomHelpers=function(){return this._rightBottomHelpers},V.setRightBottomHelpersAlign=function(Q){var W=this._rightBottomHelpersAlign;this._rightBottomHelpersAlign=Q,this.fp("rightBottomHelpersAlign",W,Q)},V.getRightBottomHelpersAlign=function(){return this._rightBottomHelpersAlign},V.setEdgeHelpers=function(F){var O=this._edgeHelpers;this._edgeHelpers=F,this.fp("edgeHelpers",O,F)},V.getEdgeHelpers=function(){return this._edgeHelpers},V.isHelperEditable=function(I,k){return I instanceof X&&("host"===k||"edge"===k||"elevation"===k||"tall"===k)?!1:I instanceof _&&("source"===k||"target"===k)?!1:"pointElevation"===k?this._helperEditableFunc?this._helperEditableFunc(I,k):!1:this._helperEditableFunc?this._helperEditableFunc(I,k):!0},V.getEditHelperSize=function(){return this._editHelperSize||(T?28:16)},V.setEditHelperSize=function(G){var c=this._editHelperSize;this._editHelperSize=G,this.fp("editHelperSize",c,G)},V.getEditRectBorderColor=function(){return this.$28l||"rgb(0, 168, 255)"},V.setEditRectBorderColor=function(Q){var t=this.$28l;this.$28l=Q,this.fp("editRectBorderColor",t,Q)},V.getNodeBorderColor=function(){return this.$29l||"#1ABC9C"},V.setNodeBorderColor=function(A){var s=this.$29l;this.$29l=A,this.fp("nodeBorderColor",s,A)},V.getEditRectBorderStyle=function(){return this.$30l||"dashed"},V.setEditRectBorderStyle=function(h){var B=this.$30l;this.$30l=h,this.fp("editRectBorderStyle",B,h)},V.getControlPointBackground=function(){return this.$31l||"#ff0"},V.setControlPointBackground=function(i){var T=this.$31l;this.$31l=i,this.fp("controlPointBackground",T,i)},V.getControlPointBorderColor=function(){return this.$32l||this._editPointBorderColor},V.setControlPointBorderColor=function(s){var v=this.$32l;this.$32l=s,this.fp("controlPointBorderColor",v,s)},V.getJoinPointBackground=function(){return this.$33l||this._editPointBackground},V.setJoinPointBackground=function(k){var z=this.$33l;this.$33l=k,this.fp("joinPointBackground",z,k)},V.getJoinPointBorderColor=function(){return this.$34l||this._editPointBorderColor},V.setJoinPointBorderColor=function(Q){var R=this.$34l;this.$34l=Q,this.fp("joinPointBorderColor",R,Q)},V.getDirectionLineColor=function(){return this.$35l||"#888"},V.setDirectionLineColor=function(J){var y=this.$35l;this.$35l=J,this.fp("directionLineColor",y,J)},V.getSegmentHoverColor=function(){return this.$36l||"rgba(255, 0, 0, 0.3)"},V.setSegmentHoverColor=function(I){var W=this.$36l;this.$36l=I,this.fp("segmentHoverColor",W,I)},V.getSegmentHoverWidth=function(){return this.$22l||(T?16:8)},V.setSegmentHoverWidth=function(q){var d=this.$22l;this.$22l=q,this.fp("segmentHoverWidth",d,q)},V.getSnapPointBorderColor=function(){return this.$38l||"#f00"},V.setSnapPointBorderColor=function(j){var f=this.$38l;this.$38l=j,this.fp("snapPointBorderColor",f,j)},V.getEditRectPadding=function(){return this.$39l!=M?this.$39l:6},V.setEditRectPadding=function(c){var k=this.$39l;this.$39l=c,this.fp("editRectPading",k,c)},V.isRectEditable=function(C){var p=this,D=p._editInteractor;return D instanceof s.XEditInteractor?p._rectEditableFunc?p._rectEditableFunc(C):!0:us.call(p,C)},V.isPointEditable=function(w){var I=this,y=I._editInteractor;return y instanceof s.XEditInteractor?I._pointEditableFunc?I._pointEditableFunc(w):!0:qn.call(I,w)},V.validateImpl=function(){var S=this,W=S.$14l,q=S._editInteractor;if(W){var Q=S.getWidth(),b=S.getHeight();(Q!==W.clientWidth||b!==W.clientHeight)&&(q&&(q._68I=1),E.setCanvas(W,Q,b),S._32I=1)}ks.call(this)},V.isEditable=function(w){var n=uk.call(this,w),S=this._editInteractor;if(S instanceof s.XEditInteractor&&w instanceof X){if(!w.s("2d.editable"))return!1;var e=this.getEditableFunc();n=e?e(w):!0}return n},V._42=function(G,y){var j=this,D=j._editInteractor;fb.call(j,G,y),D instanceof s.XEditInteractor&&D._68I&&D._42()},V.isSnapPoint=function(){return!0};var xb=function(S){arguments.length>0&&this.$58l(S)},jk=xb.prototype;jk.$58l=function(G){this.$62l=G,this.points=new Array},jk.$56l=function(D){this.points.push(D)},jk.$57l=function(t){this.points=this.points.concat(t)};var ye=function(z,k){arguments.length>0&&this.$58l(z,k)},mr=ye.prototype;mr.$58l=function(c,$){this.x=c,this.y=$},mr.add=function(K){return new ye(this.x+K.x,this.y+K.y)},mr.addEquals=function(o){return this.x+=o.x,this.y+=o.y,this},mr.$55l=function(e){return new ye(this.x*e,this.y*e)},mr.eq=function(f){return this.x==f.x&&this.y==f.y},mr.lt=function(o){return this.x<o.x&&this.y<o.y},mr.lte=function(d){return this.x<=d.x&&this.y<=d.y},mr.gt=function(g){return this.x>g.x&&this.y>g.y},mr.gte=function(U){return this.x>=U.x&&this.y>=U.y},mr.lerp=function(e,A){return new ye(this.x+(e.x-this.x)*A,this.y+(e.y-this.y)*A)},mr.distanceFrom=function(y){var L=this.x-y.x,M=this.y-y.y;return O(L*L+M*M)},mr.min=function(x){return new ye(g(this.x,x.x),g(this.y,x.y))},mr.max=function(p){return new ye(x(this.x,p.x),x(this.y,p.y))},mr.toString=function(){return this.x+","+this.y};var Mf=function(){this.$58l(arguments)},Km=Mf.prototype;Mf.TO=1e-6,Mf.AC=6,Km.$58l=function(H){this.co=new Array;for(var V=H.length-1;V>=0;V--)this.co.push(H[V])},Km.$55l=function(w){for(var J=new Mf,K=0;K<=this.$50l()+w.$50l();K++)J.co.push(0);for(var K=0;K<=this.$50l();K++)for(var W=0;W<=w.$50l();W++)J.co[K+W]+=this.co[K]*w.co[W];return J},Km.$59l=function(){for(var V=this.$50l();V>=0&&i(this.co[V])<=Mf.TO;V--)this.co.pop()},Km.$50l=function(){return this.co.length-1},Km.$51l=function(){var S;switch(this.$59l(),this.$50l()){case 0:S=new Array;break;case 1:S=this.$52l();break;case 2:S=this.$53l();break;case 3:S=this.$54l();break;case 4:S=this.$63l();break;default:S=new Array}return S},Km.$52l=function(){var Y=new Array,y=this.co[1];return 0!=y&&Y.push(-this.co[0]/y),Y},Km.$53l=function(){var d=new Array;if(2==this.$50l()){var c=this.co[2],Z=this.co[1]/c,z=this.co[0]/c,L=Z*Z-4*z;if(L>0){var r=O(L);d.push(.5*(-Z+r)),d.push(.5*(-Z-r))}else 0==L&&d.push(.5*-Z)}return d},Km.$63l=function(){var A=new Array;if(4==this.$50l()){var U=this.co[4],H=this.co[3]/U,F=this.co[2]/U,I=this.co[1]/U,K=this.co[0]/U,$=new Mf(1,-F,H*I-4*K,-H*H*K+4*F*K-I*I).$54l(),C=$[0],D=H*H/4-F+C;if(i(D)<=Mf.TO&&(D=0),D>0){var M=O(D),T=3*H*H/4-M*M-2*F,x=(4*H*F-8*I-H*H*H)/(4*M),_=T+x,j=T-x;if(i(_)<=Mf.TO&&(_=0),i(j)<=Mf.TO&&(j=0),_>=0){var c=O(_);A.push(-H/4+(M+c)/2),A.push(-H/4+(M-c)/2)}if(j>=0){var c=O(j);A.push(-H/4+(c-M)/2),A.push(-H/4-(c+M)/2)}}else if(0>D);else{var x=C*C-4*K;if(x>=-Mf.TO){if(0>x&&(x=0),x=2*O(x),T=3*H*H/4-2*F,T+x>=Mf.TO){var G=O(T+x);A.push(-H/4+G/2),A.push(-H/4-G/2)}if(T-x>=Mf.TO){var G=O(T-x);A.push(-H/4+G/2),A.push(-H/4-G/2)}}}}return A},Km.$54l=function(){var r=new Array;if(3==this.$50l()){var k=this.co[3],p=this.co[2]/k,D=this.co[1]/k,N=this.co[0]/k,$=(3*D-p*p)/3,L=(2*p*p*p-9*D*p+27*N)/27,F=p/3,X=L*L/4+$*$*$/27,P=L/2;if(i(X)<=Mf.TO&&(X=0),X>0){var d,l,Y=O(X);d=-P+Y,l=d>=0?S(d,1/3):-S(-d,1/3),d=-P-Y,d>=0?l+=S(d,1/3):l-=S(-d,1/3),r.push(l-F)}else if(0>X){var C=O(-$/3),o=Z(O(-X),-P)/3,h=B(o),s=b(o),y=O(3);r.push(2*C*h-F),r.push(-C*(h+y*s)-F),r.push(-C*(h-y*s)-F)}else{var d;d=P>=0?-S(P,1/3):S(-P,1/3),r.push(2*d-F),r.push(-d-F)}}return r};var Ld=function(U,q){arguments.length>0&&this.$58l(U,q)},or=Ld.prototype;or.$58l=function(S,d){this.x=S,this.y=d},or.length=function(){return O(this.x*this.x+this.y*this.y)},or.$60l=function(t){return this.x*t.x+this.y*t.y};var Ul=function(z,O,q,L){var x,C=(L.x-q.x)*(z.y-q.y)-(L.y-q.y)*(z.x-q.x),a=(O.x-z.x)*(z.y-q.y)-(O.y-z.y)*(z.x-q.x),P=(L.y-q.y)*(O.x-z.x)-(L.x-q.x)*(O.y-z.y);if(0!=P){var g=C/P,I=a/P;g>=0&&1>=g&&I>=0&&1>=I?(x=new xb(k),x.points.push(new ye(z.x+g*(O.x-z.x),z.y+g*(O.y-z.y)))):x=new xb(h)}else x=0==C||0==a?new xb("C"):new xb("P");return x},nj=function(J,o,G,R,N){var B,q,O,r,A,m,D,i=R.min(N),s=R.max(N),y=new xb(h);B=o.$55l(-2),O=J.add(B.add(G)),B=J.$55l(-2),q=o.$55l(2),r=B.add(q),A=new ye(J.x,J.y),D=new Ld(R.y-N.y,N.x-R.x),m=R.x*N.y-N.x*R.y;for(var c=new Mf(D.$60l(O),D.$60l(r),D.$60l(A)+m).$51l(),Z=0;Z<c.length;Z++){var H=c[Z];if(H>=0&&1>=H){var W=J.lerp(o,H),M=o.lerp(G,H),P=W.lerp(M,H);R.x==N.x?i.y<=P.y&&P.y<=s.y&&(y.$62l=k,y.$56l(P)):R.y==N.y?i.x<=P.x&&P.x<=s.x&&(y.$62l=k,y.$56l(P)):P.gte(i)&&P.lte(s)&&(y.$62l=k,y.$56l(P))}}return y},Me=function(t,y,g,B,o){var W=B.min(o),b=B.max(o),L=new ye(b.x,W.y),Z=new ye(W.x,b.y),E=nj(t,y,g,W,L),O=nj(t,y,g,L,b),c=nj(t,y,g,b,Z),u=nj(t,y,g,Z,W),J=new xb(h);return J.$57l(E.points),J.$57l(O.points),J.$57l(c.points),J.$57l(u.points),J.points.length>0&&(J.$62l=k),J},zs=function(T,d,U,a,c,P){var t,M,X,R,F,A,J,S,o,I,K=c.min(P),v=c.max(P),W=new xb(h);t=T.$55l(-1),M=d.$55l(3),X=U.$55l(-3),R=t.add(M.add(X.add(a))),F=new Ld(R.x,R.y),t=T.$55l(3),M=d.$55l(-6),X=U.$55l(3),R=t.add(M.add(X)),A=new Ld(R.x,R.y),t=T.$55l(-3),M=d.$55l(3),X=t.add(M),J=new Ld(X.x,X.y),S=new Ld(T.x,T.y),I=new Ld(c.y-P.y,P.x-c.x),o=c.x*P.y-P.x*c.y;for(var n=new Mf(I.$60l(F),I.$60l(A),I.$60l(J),I.$60l(S)+o).$51l(),O=0;O<n.length;O++){var V=n[O];if(V>=0&&1>=V){var L=T.lerp(d,V),q=d.lerp(U,V),s=U.lerp(a,V),l=L.lerp(q,V),Q=q.lerp(s,V),E=l.lerp(Q,V);c.x==P.x?K.y<=E.y&&E.y<=v.y&&(W.$62l=k,W.$56l(E)):c.y==P.y?K.x<=E.x&&E.x<=v.x&&(W.$62l=k,W.$56l(E)):E.gte(K)&&E.lte(v)&&(W.$62l=k,W.$56l(E))}}return W},Bh=function(D,m,J,X,K,I){var t=K.min(I),V=K.max(I),w=new ye(V.x,t.y),H=new ye(t.x,V.y),C=zs(D,m,J,X,t,w),s=zs(D,m,J,X,w,V),r=zs(D,m,J,X,V,H),Q=zs(D,m,J,X,H,t),E=new xb(h);return E.$57l(C.points),E.$57l(s.points),E.$57l(r.points),E.$57l(Q.points),E.points.length>0&&(E.$62l=k),E},pm=function(x,c,l,F){var M=l.min(F),H=l.max(F),a=new ye(H.x,M.y),Q=new ye(M.x,H.y),T=Ul(M,a,x,c),I=Ul(a,H,x,c),Z=Ul(H,Q,x,c),R=Ul(Q,M,x,c),e=new xb(h);return e.$57l(T.points),e.$57l(I.points),e.$57l(Z.points),e.$57l(R.points),e.points.length>0&&(e.$62l=k),e},Yk=s.XEditInteractor=function(E){var b=this,v=b._view=document.createElement("canvas");v.className="editCanvas",v.style.position="absolute",Yk.superClass.constructor.call(b,E)};q.def(Yk,s.Interactor,{ms_edit:1,setUp:function(){var v=this,B=v.gv,W=B.getView(),w=v._view;Yk.superClass.setUp.call(v),B.setEditInteractor(v),B.$14l=w,B._79O?W.insertBefore(w,B._79O):W.appendChild(w);var I=v.$49l=v.$11l.bind(v);B.dm().md(I),B.sm().ms(I),B.mp(I)},tearDown:function(){var u=this,H=u.gv,U=H.getView(),y=u.$49l;Yk.superClass.tearDown.call(u),H.setEditInteractor(M),H.$14l=M,U.removeChild(u._view),H.dm().umd(y),H.sm().ums(y),H.ump(y)},clear:function(){var h=this,W=h.gv;delete h._hoverSegmentIndex,delete h._edge,delete h._shape,delete W._editing,delete h.$10l,delete h.$13l,delete h.$9l,delete h._removePointIndex,delete h._lp,h.$12l="",delete h.$40l,delete h.$67l,delete h.$72l,delete h.$73l,delete h.$75l,delete h.$1l,delete h.$3l,delete h.$2l,delete h.$92l,delete h.$93l,delete h.$94l,h.clearDragging()},handle_keydown:function(O){this.$48l!==O.shiftKey&&(this.$48l=O.shiftKey,this.handle_mousemove(O,z,!0))},handle_keyup:function(T){this.$48l!==T.shiftKey&&(this.$48l=T.shiftKey,this.handle_mousemove(T,z,!0))},handle_touchstart:function(L){this.handle_mousemove(L),this.handle_mousedown(L)},handle_mousedown:function(Z){t(Z);var d=this,A=d.$13l,W=d.gv,c=W.dm(),E=W.sm(),Y=W.getZoom(),G=W.lp(Z),N=q.isDoubleClick(Z),m=q.isLeftButton(Z),w=d.$7l,x=d._shape,S=d._hoverSegmentIndex,j=d._edge,f=d.$87l,D=d.$88l,n=function(){d._68I||f===d.$87l&&D===d.$88l||d.$43l()};if(7!==d.$67l&&(delete d.$87l,delete d.$88l),m&&(x||j)&&S>=0&&N&&(x&&E.contains(x)||j&&E.contains(j))){var l=bk.call(d,x||j,S,G);return d.addShapePoint(x||j,S,l),P(function(){d.handle_mousemove(Z)},40),void 0}if(m&&(x||j)&&d._removePointIndex>=0&&N)return d.removeShapePoint(),d.$5l=1,P(function(){d.handle_mousemove(Z)},40),void 0;if(!m||!W._editing)return n(),void 0;if(x&&A>=0){var z=x.getPoints().get(A),F=x.p(),p=wl(F,z.x-F.x,z.y-F.y,-w+x.getRotation());Q=wl(F,G.x-F.x,G.y-F.y,-w),d.$24l={x:Q.x-p.x,y:Q.y-p.y},d.startDragging(Z),c.beginTransaction(),d.fi({kind:"beginEditPoint",event:Z,data:x,index:A}),d.$88l=A,d.$87l=x}else if(d.$10l){var k=W.sm().getSelection(),X=d.$6l,I=d.$1l={},B=d.$3l={},H=d.$16l[R[d.$10l]],U={x:X.x,y:X.y},s={x:X.x+X.width/2,y:X.y+X.height/2};d.$24l={x:G.x-H.x/Y,y:G.y-H.y/Y},d.$2l=e(d.$8l),d.$4l=e(X),k.each(function(P){if(P instanceof _){var z=P.p(),o=P.getWidth(),D=P.getHeight(),C=wl(s,z.x-s.x,z.y-s.y,-w);I[P.getId()]={x:z.x-o/2,y:z.y-D/2,width:o,height:D},B[P.getId()]={x:(C.x-U.x)/X.width,y:(C.y-U.y)/X.height}}}),d.startDragging(Z),c.beginTransaction(),d.fi({kind:"beginEditRect",event:Z,direction:d.$10l})}else if(j&&A>=0){var M=cl(W.getDataUI(j),j.s("edge.points")),z=M.get(A);d.$24l={x:G.x-z.x,y:G.y-z.y},d.startDragging(Z),c.beginTransaction(),d.fi({kind:"beginEditPoint",event:Z,data:j,index:A}),d.$88l=A,d.$87l=j}else if(d.$40l){var X=d.$6l,s={x:X.x+X.width/2,y:X.y+X.height/2},o=e(d.$23l);o.x/=Y,o.y/=Y;var v=wl(s,o.x-s.x,o.y-s.y,-w),Q=wl(s,G.x-s.x,G.y-s.y,-w);d.$24l={x:Q.x-v.x,y:Q.y-v.y},d.startDragging(Z),c.beginTransaction(),d.fi({kind:"beginEditRotation",event:Z,data:d._rotationNode})}else if([1,2,3,5,6,7,8,9].indexOf(d.$67l)>=0){var i=d.$67l;(7===i||8===i||9===i)&&c.beginTransaction(),d.startDragging(Z)}else if(d.$71l&&N&&d.$79l(d.$71l,G)){var g=E.toSelection();c.beginTransaction(),g.each(function(l){c.remove(l)}),c.endTransaction()}n()},$11l:function(){var $=this,k=$.gv;k._editing&&($.$13l==M||$._shape==M&&$._edge==M)&&($.$73l==M||1!==$.$67l&&5!==$.$67l&&6!==$.$67l)||($.$5l=1),$._68I=1},$46l:function(N){var f=this,w=f.gv,i=w.lp(N),y=[];return yo(w,function(s){var O=w.getDataUI(s);if(O){var I=O._79o();U(I,i)&&y.push(s)}}),y},$47l:function(z){var h=this,V=h.$13l,C=h.gv.dm();h.$10l?(h.fi({kind:"endEditRect",event:z,direction:h.$10l}),C.endTransaction()):h._shape&&V>=0?(h.fi({kind:"endEditPoint",event:z,data:h._shape,index:V}),C.endTransaction()):h._edge&&V>=0?(h.fi({kind:"endEditPoint",event:z,data:h._edge,index:V}),C.endTransaction()):h.$23l&&h.$40l&&(h.fi({kind:"endEditRotation",event:z}),C.endTransaction())},handleWindowTouchEnd:function(c){this.handleWindowMouseUp(c)},handleWindowMouseUp:function(J){var l=this,m=l.gv,i=m.dm(),S=l._shape,I=l._edge,h=l.$13l,k=l.$40l,D=l.$9l,C=l.$10l,O=l.$67l;if((S||I)&&h>=0&&D>=0){var R,v;if(S){var u=S.p(),j=S.getRotation();R=S.getPoints(),v=R.get(D),Yb(S,u,j,h,v,!1)}else if(R=cl(m.getDataUI(I),I.s("edge.points"),!0),v=R.get(D),0===h){var p=R.get(0);I.s("edge.source.offset.x",v.x-p.x),I.s("edge.source.offset.y",v.y-p.y)}else if(h===R.size()-1){var N=R.get(R.size()-1);I.s("edge.target.offset.x",v.x-N.x),I.s("edge.target.offset.y",v.y-N.y)}else"points"===I.s("edge.type")&&(R.set(h,v),I.s("edge.points",Uh(R)))}l.$47l(J);var t=l.$73l;1===O?(i.beginTransaction(),t?m.sm().each(function(I){if(I.setHost&&m.isHelperEditable(I,"host")){I.setHost(t);
var $=l.$75l,o=l.$74l;$&&(I.s("attach.row.index",$.rowIndex),I.s("attach.column.index",$.columnIndex)),o&&(I.s("attach.index",o.attachIndex),I.s("attach.offset",o.attachOffset),I.s("attach.offset.relative",!1),I.s("attach.offset.opposite",!1))}}):m.sm().each(function(J){J.setHost&&m.isHelperEditable(J,"host")&&(J.setHost(M),J.s("attach.row.index",z),J.s("attach.column.index",z),J.s("attach.index",z),J.s("attach.offset",z),J.s("attach.offset.relative",!1),J.s("attach.offset.opposite",!1))}),i.endTransaction()):2===O?(i.beginTransaction(),t?m.sm().each(function(u){u.setParent&&m.isHelperEditable(u,"parent")&&u.setParent(t)}):m.sm().each(function(C){C.setParent&&m.isHelperEditable(C,"parent")&&C.setParent(M)}),i.endTransaction()):3===O?t&&(i.beginTransaction(),m.sm().each(function(Q){if(m.isHelperEditable(Q,"edge")&&Q instanceof _&&t instanceof _){var N=new K.Edge;i.add(N),N.setSource(Q),N.setTarget(t),l.onEdgeCreated&&l.onEdgeCreated(J,N)}}),i.endTransaction()):5===O||6===O?t&&(i.beginTransaction(),m.sm().each(function(b){b instanceof X&&t instanceof _&&(5===O&&m.isHelperEditable(b,"source")?b.setSource(t):6===O&&m.isHelperEditable(b,"source")&&b.setTarget(t))}),i.endTransaction()):(7===O||8===O||9===O)&&i.endTransaction(),(C||k)&&l.$43l(!0),T?(l.clear(),delete l.$64l,l._68I||l.$43l()):(l.handle_mousemove(J,!0),O&&!l._68I&&l.$43l())},handleWindowTouchMove:function(w){this.handleWindowMouseMove(w)},handleWindowMouseMove:function(U){this._78I(U)},handle_mousemove:function(h,e,X){if(!this._pause){if(!X){var a=T?Ik(h):h;this.$61l={clientX:a.clientX,clientY:a.clientY}}if(e===!0||!f()){var s=this,L=s.gv,l=!1,z=M;s.clear(),L.sm().size()>0&&(z=L.lp(X?s.$61l:h),l=s._79I(h,z)),l&&(L._editing=1),s.$12l!==s.$65l&&(s.$65l=s.$12l,s.setCursor(s.$12l)),s.$40l!==s.$64l&&(s.$64l=s.$40l,s._68I||s.$43l()),s._hoverSegmentIndex!==s.$66l&&(s.$66l=s._hoverSegmentIndex,s._68I||s.$43l())}}},_78I:function(y){this.autoScroll(y);var k=this,J=k.gv,R=J.lp(y),T=J.getZoom(),B=k.$13l;if((k._shape||k._edge)&&B>=0){var c,G,e,w=k._shape,r=k._edge,d=k.$24l,v=J.getPointSnapSpacing(),j=function(T,s){return v==M||isNaN(v)?{x:T,y:s}:{x:Y(T/v)*v,y:Y(s/v)*v}};if(w){c=w.getPoints();var K=w.p(),Q=w.getRotation(),U=0;G=wl(K,R.x-K.x,R.y-K.y,-Q),Yb(w,K,Q,B,R,!0,d,j),k.fi({kind:"betweenEditPoint",event:y,data:w,index:B})}else if(r){c=cl(J.getDataUI(r),r.s("edge.points"),!0),R.x-=d.x,R.y-=d.y,G=R;var s,l,m=r.s("edge.offset"),g=c.size(),o=g>2;if(0===B){var S=c.get(0);m&&(S=zc(S,c.get(1),-m,o),R=zc(R,c.get(1),-m,o)),s=R.x-S.x,l=R.y-S.y,e=j(s,l),r.s("edge.source.offset.x",e.x),r.s("edge.source.offset.y",e.y)}else if(B===g-1){var I=c.get(g-1);m&&(I=zc(I,c.get(g-2),-m,o),R=zc(R,c.get(g-2),-m,o)),s=R.x-I.x,l=R.y-I.y,e=j(s,l),r.s("edge.target.offset.x",e.x),r.s("edge.target.offset.y",e.y)}else"points"===r.s("edge.type")&&(e=j(R.x,R.y),e.e=c.get(B).e,c.set(B,e),r.s("edge.points",Uh(c)));k.fi({kind:"betweenEditPoint",event:y,data:r,index:B})}if(delete k.$9l,J.isSnapPoint(w)||J.isSnapPoint(r))for(U=0;U<c.size();U++)if(U!==B){var t=c.get(U);if(W(t,G)<J.getEditPointSize()/T){k.$9l=U;break}}}else if(k.$10l){var d=k.$24l;R.x-=d.x,R.y-=d.y;var D=J.sm().getSelection(),N=k.$1l,p=k.$7l,V=k.$10l,x=k.$4l,f=k.$2l,L=J.getEditRectPadding()/T,$=2*L,b=J.getSnapSpacing(),z=b!=M&&!isNaN(b),h=Iq(f,R,V,p,2*L,J.getResizeMode(),z,!0),F=k.$6l;if(z){var A=h.width-$,a=h.height-$,E=Y(A/b)*b,xk=Y(a/b)*b,He=E-A,ws=xk-a;("west"===V||"northwest"===V||"southwest"===V)&&(He=-He),("north"===V||"northwest"===V||"northeast"===V)&&(ws=-ws),h=Iq(f,R,V,p,2*L,J.getResizeMode(),z,!1,He,ws)}k.$8l=h,F.x=h.x+L,F.y=h.y+L,F.width=h.width-$,F.height=h.height-$;var dc=h.x+h.width/2,Rf=h.y+h.height/2,eh=F.x,Ci=F.y,qh=F.width/x.width,bd=F.height/x.height;D.each(function(d){if(d instanceof _&&J.isEditable(d)&&J.isRectEditable(d)){var Y=N[d.getId()],R=k.$3l[d.getId()],W={x:Y.x+Y.width/2,y:Y.y+Y.height/2},l=0,E=0,y=V,I=180*i(p-d.getRotation())/H;"northeast"===V?I>=315||45>I?(l=Y.width*qh+Y.x,E=Y.height*(1-bd)+Y.y,y="northeast"):I>=45&&135>I?(l=Y.width*(1-bd)+Y.x,E=Y.height*(1-qh)+Y.y,y="northwest"):I>=135&&225>I?(l=Y.width*(1-qh)+Y.x,E=Y.height*bd+Y.y,y="southwest"):(l=Y.width*bd+Y.x,E=Y.height*qh+Y.y,y="southeast"):"north"===V?I>=315||45>I?(E=Y.height*(1-bd)+Y.y,y="north"):I>=45&&135>I?(l=Y.width*(1-bd)+Y.x,y="west"):I>=135&&225>I?(E=Y.height*bd+Y.y,y="south"):(l=Y.width*bd+Y.x,y="east"):"northwest"===V?I>=315||45>I?(l=Y.width*(1-qh)+Y.x,E=Y.height*(1-bd)+Y.y,y="northwest"):I>=45&&135>I?(l=Y.width*(1-bd)+Y.x,E=Y.height*qh+Y.y,y="southwest"):I>=135&&225>I?(l=Y.width*qh+Y.x,E=Y.height*bd+Y.y,y="southeast"):(l=Y.width*bd+Y.x,E=Y.height*(1-qh)+Y.y,y="northeast"):"west"===V?I>=315||45>I?(l=Y.width*(1-qh)+Y.x,y="west"):I>=45&&135>I?(E=Y.height*qh+Y.y,y="south"):I>=135&&225>I?(l=Y.width*qh+Y.x,y="east"):(E=Y.height*(1-qh)+Y.y,y="north"):"southwest"===V?I>=315||45>I?(l=Y.width*(1-qh)+Y.x,E=Y.height*bd+Y.y,y="southwest"):I>=45&&135>I?(l=Y.width*bd+Y.x,E=Y.height*qh+Y.y,y="southeast"):I>=135&&225>I?(l=Y.width*qh+Y.x,E=Y.height*(1-bd)+Y.y,y="northeast"):(l=Y.width*(1-bd)+Y.x,E=Y.height*(1-qh)+Y.y,y="northwest"):"east"===V?I>=315||45>I?(l=Y.width*qh+Y.x,y="east"):I>=45&&135>I?(E=Y.height*(1-qh)+Y.y,y="north"):I>=135&&225>I?(l=Y.width*(1-qh)+Y.x,y="west"):(E=Y.height*qh+Y.y,y="south"):"south"===V?I>=315||45>I?(E=Y.height*bd+Y.y,y="south"):I>=45&&135>I?(l=Y.width*bd+Y.x,y="east"):I>=135&&225>I?(E=Y.height*(1-bd)+Y.y,y="north"):(l=Y.width*(1-bd)+Y.x,y="west"):"southeast"===V&&(I>=315||45>I?(l=Y.width*qh+Y.x,E=Y.height*bd+Y.y,y="southeast"):I>=45&&135>I?(l=Y.width*bd+Y.x,E=Y.height*(1-qh)+Y.y,y="northeast"):I>=135&&225>I?(l=Y.width*(1-qh)+Y.x,E=Y.height*(1-bd)+Y.y,y="northwest"):(l=Y.width*(1-bd)+Y.x,E=Y.height*qh+Y.y,y="southwest"));var b=wl(W,l-W.x,E-W.y,d.getRotation());cr(d,Y,y,{x:b.x,y:b.y});var C=eh+F.width*R.x,D=Ci+F.height*R.y,$={x:C,y:D};$=wl({x:dc,y:Rf},$.x-dc,$.y-Rf,p),d.p($.x,$.y)}}),k.fi({kind:"betweenEditRect",event:y,direction:V})}else if(k.$23l&&k.$40l){var hn=k.$8l,_h=hn.width,Tj=hn.height,K={x:hn.x+_h/2,y:hn.y+Tj/2},d=k.$24l,Wp=k.$23l,lp=Wp.x/T-K.x,Nn=Wp.y/T-K.y,Nq=O(lp*lp+Nn*Nn),Md=Math.asin(d.x/Nq),Gi=J.sm().getSelection(),hl=C+Z(R.y-K.y,R.x-K.x)-Md,si=J.getSnapAngle(),hl=Y(hl/si)*si;0>hl&&(hl+=u);var Bk=hl-k.$7l,Ld=[K.x,0,K.y];Gi.each(function(A){if(J.isEditable(A)&&J.isRotationEditable(A)&&J.isVisible(A)){var g=le(A.p3(),Ld),X=pq();Uo(X,-Bk),A.setRotation(A.getRotation()+Bk),ap(g,X),A.p3(Ld[0]+g[0],Ld[1]+g[1],Ld[2]+g[2])}}),k.$7l=hl,k.fi({kind:"betweenEditRotation",event:y})}else if([1,2,3,5,6].indexOf(k.$67l)>=0)k.$72l=y,k.$78l||(k.$78l=1,P(function(){q.isDragging()&&k.$43l(),delete k.$78l},12));else if(7===k.$67l){if(k.$87l instanceof n){var w=k.$87l,be=k.$88l,um=q.clone(w.getPoints().get(be)),pj=R.y-um.y;um.e||(um.e=0),k.$92l||(k.$92l=um.e),um.e=k.$92l-pj,w.setPoint(be,um)}else if(k.$87l instanceof X){var r=k.$87l,be=k.$88l,c=cl(J.getDataUI(r),r.s("edge.points")),um=c.get(be),pj=R.y-um.y;um.e||(um.e=0),k.$92l||(k.$92l=um.e),um.e=k.$92l-pj,c.set(be,um),r.s("edge.points",Uh(c))}}else if(8===k.$67l){var Gi=J.sm().getSelection(),gi=k.$93l;gi||(gi=k.$93l={}),Gi.each(function(Y){if(Y.p3){var D=Y.p3(),f=gi[Y.getId()];f==M&&(f=gi[Y.getId()]=D[1]),Y.p3([D[0],f-(R.y-k.$90l.y/T),D[2]])}})}else if(9===k.$67l){var Gi=J.sm().getSelection(),Oh=k.$94l;Oh||(Oh=k.$94l={}),Gi.each(function(n){if(n.s3){var x=n.s3(),H=Oh[n.getId()];H==M&&(H=Oh[n.getId()]=x[1]);var B=H-(R.y-k.$91l.y/T);0>B&&(B=.01),n.s3([x[0],B,x[2]])}})}},$79l:function(z,v){var n=this,u=n.gv,E=u.getZoom(),G=u.getEditHelperSize(),o=z.x/E,S=z.y/E,W=G/E,m=W/2;return U({x:o-m,y:S-m,width:W,height:W},v)?!0:void 0},getHelperCursor:function(){return"crosshair"},_79I:function(m,h){for(var g=this,Y=g.gv,j=Y.getZoom(),M=Y.getEditPointSize(),F=M/j,C=F/2,i=g.$46l(m),D=0;D<i.length;D++){var c,y,$=i[D],k=Y.getDataUI($);if(k&&k._55O){var r=k._55O;if(r._43O&&$ instanceof X){if(c=$.s("edge.points"),c=cl(k,c),y=$.s("edge.segments"),y&&y.size()||(y=es(c)),g.$42l($,h,c._as,y,"edge"))return!0;if("points"===$.s("edge.type")&&g.$41l($,h,c._as,y,"edge"))return}if(r._43O&&$ instanceof n&&r.$15l&&r.$15l.length===$.getPoints().size()){if(c=r.$15l,y=$.getSegments(),y&&y.size()||(y=es(c)),g.$42l($,h,c,y,"shape"))return!0;if(g.$41l($,h,c,y,"shape"))return}}}if(g.$16l){var c,G=g.$16l,V=G[3].x-G[7].x,x=G[3].y-G[7].y,o=O(V*V+x*x),w=G[1].x-G[5].x,S=G[1].y-G[5].y,e=O(w*w+S*S),I={x:h.x*j,y:h.y*j};if(g._80I(I,0,G[0],"northwest",o,e)||g._80I(I,1,G[1],"north",o,e)||g._80I(I,2,G[2],"northeast",o,e)||g._80I(I,7,G[7],"west",o,e)||g._80I(I,3,G[3],"east",o,e)||g._80I(I,6,G[6],"southwest",o,e)||g._80I(I,5,G[5],"south",o,e)||g._80I(I,4,G[4],"southeast",o,e))return!0}if(g.$23l){var z=g.$23l,q=z.x/j,T=z.y/j;if(U({x:q-C,y:T-C,width:F,height:F},h))return g.$40l=1,g.$12l=g.getHelperCursor("rotation")||"crosshair",!0}return g.$68l&&g.$79l(g.$68l,h)?(g.$67l=1,g.$12l=g.getHelperCursor("host")||"crosshair",!0):g.$69l&&g.$79l(g.$69l,h)?(g.$67l=2,g.$12l=g.getHelperCursor("parent")||"crosshair",!0):g.$70l&&g.$79l(g.$70l,h)?(g.$67l=3,g.$12l=g.getHelperCursor("edge")||"crosshair",!0):g.$71l&&g.$79l(g.$71l,h)?(g.$67l=4,g.$12l=g.getHelperCursor("remove")||"crosshair",!0):g.$82l&&g.$79l(g.$82l,h)?(g.$67l=5,g.$12l=g.getHelperCursor("source")||"crosshair",!0):g.$83l&&g.$79l(g.$83l,h)?(g.$67l=6,g.$12l=g.getHelperCursor("target")||"crosshair",!0):g._pointElevationHelperPoint&&g.$79l(g._pointElevationHelperPoint,h)?(g.$67l=7,g.$12l=g.getHelperCursor("pointElevation")||"crosshair",!0):g.$90l&&g.$79l(g.$90l,h)?(g.$67l=8,g.$12l=g.getHelperCursor("elevation")||"crosshair",!0):g.$91l&&g.$79l(g.$91l,h)?(g.$67l=9,g.$12l=g.getHelperCursor("tall")||"crosshair",!0):!1},_80I:function(D,j,f,W,J,s){var G=this,S=G.gv,T=S.getEditPointSize(),c=T/2,Z=S.sm(),v=S.isDirectionEditable;if(v&&1===Z.size()){var e=Z.ld();if(v=v.bind(S),e instanceof _){if(!v(e,W))return!1;if("east"===W){if(v(e,"northeast")&&v(e,"southeast")&&2*T>=s)return!1}else if("west"===W){if(v(e,"northwest")&&v(e,"southwest")&&2*T>=s)return!1}else if("north"===W){if(v(e,"northwest")&&v(e,"northeast")&&2*T>=J)return!1}else if("south"===W&&v(e,"southwest")&&v(e,"southeast")&&2*T>=J)return!1}}else{if(2*T>=J&&("north"===W||"south"===W))return!1;if(2*T>=s&&("east"===W||"west"===W))return!1}if(U({x:f.x-c,y:f.y-c,width:T,height:T},D)){if(G.$10l!==W){var L=180*G.$7l/H,i="";L>=337.5||22.5>L?i="north":L>=22.5&&67.5>L?i="northeast":L>=67.5&&112.5>L?i="east":L>=112.5&&157.5>L?i="southeast":L>=157.5&&202.5>L?i="south":L>=202.5&&247.5>L?i="southwest":L>=247.5&&292.5>L?i="west":L>=292.5&&337.5>L&&(i="northwest");var A=ij.indexOf(i),i=ij[j-(1-A)+8];switch(i){case"northwest":G.$12l="nwse-resize";break;case"northeast":G.$12l="nesw-resize";break;case"southwest":G.$12l="nesw-resize";break;case"southeast":G.$12l="nwse-resize";break;case"north":G.$12l="ns-resize";break;case"east":G.$12l="ew-resize";break;case"south":G.$12l="ns-resize";break;case"west":G.$12l="ew-resize"}G.$10l=W}return!0}return!1},$42l:function(N,j,J,$,s){var m,h=this,L=h.gv,M=L.getEditPointSize(),d=M/L.getZoom(),p=-1,Y={x:j.x,y:j.y,width:0,height:0},A=function(j){"shape"===s?h._shape=N:h._edge=N,h._removePointIndex=j},O=function(V){"shape"===s?h._shape=N:h._edge=N,h.$13l=V,h.$12l="crosshair"};for(c(Y,d/2),p=J.length-1,m=$.size()-1;m>=0;m--){var g=$.get(m);if(1===g||2===g)p-=1;else if(3===g){var Z=J[p-1];if(U(Y,Z))return O(p-1),!0;p-=2}else if(4===g){var o=J[p-1],B=J[p-2];if(U(Y,o))return O(p-1),!0;if(U(Y,B))return O(p-2),!0;p-=3}}for(p=J.length-1,m=$.size()-1;m>=0;m--){var g=$.get(m),v=J[p];if(U(Y,v))return A(p),O(p),!0;1===g||2===g?p-=1:3===g?p-=2:4===g&&(p-=3)}return!1},$41l:function(W,d,y,s,T){var O=this,C=O.gv,h=-1,Q=0,g={x:d.x,y:d.y,width:0,height:0},_=function(R,F){O._hoverSegmentIndex=F,O._lp=d,"shape"===T?O._shape=W:O._edge=W};for(c(g,C.getSegmentHoverWidth()/2/C.getZoom()),W instanceof n&&W.isClosePath()&&s.indexOf(5)<0&&(s=new G(s._as),s.add(5));Q<s.size();Q++){var M=s.get(Q);if(1===M){var U=y[h],r=y[h+1];if(U){var B=pm(new ye(U.x,U.y),new ye(r.x,r.y),new ye(g.x,g.y),new ye(g.x+g.width,g.y+g.height));if(B.$62l===k&&B.points.length>0)return _(B,Q),!0}h+=1}else if(2===M){var U=y[h],r=y[h+1],B=pm(new ye(U.x,U.y),new ye(r.x,r.y),new ye(g.x,g.y),new ye(g.x+g.width,g.y+g.height));if(B.$62l===k&&B.points.length>0)return _(B,Q),!0;h+=1}else if(3===M){var U=y[h],u=y[h+1],L=y[h+2],B=Me(new ye(U.x,U.y),new ye(u.x,u.y),new ye(L.x,L.y),new ye(g.x,g.y),new ye(g.x+g.width,g.y+g.height));if(B.$62l===k)return _(B,Q),!0;h+=2}else if(4===M){var U=y[h],t=y[h+1],X=y[h+2],L=y[h+3],B=Bh(new ye(U.x,U.y),new ye(t.x,t.y),new ye(X.x,X.y),new ye(L.x,L.y),new ye(g.x,g.y),new ye(g.x+g.width,g.y+g.height));if(B.$62l===k)return _(B,Q),!0;h+=3}else if(5===M){var U=y[h],r=y[0];if(U){var B=pm(new ye(U.x,U.y),new ye(r.x,r.y),new ye(g.x,g.y),new ye(g.x+g.width,g.y+g.height));if(B.$62l===k&&B.points.length>0)return _(B,Q),!0}}}return!1},addShapePoint:function(a,j,O){var o=this,m=o.gv,y=m.dm();if(y.beginTransaction(),0===arguments.length&&(a=o._shape||o._edge,j=o._hoverSegmentIndex,O=o._lp),a instanceof n||a instanceof X){var l=Fi(a,m.getDataUI(a),j);if(!isNaN(j)&&O&&!isNaN(l)){var C=O;if(a instanceof n){var J=a.p(),S=a.getRotation(),_=a.toSegments();_&&_.size()||(_=es(a.getPoints())),a.isClosePath()&&_.indexOf(5)<0&&(_=new G(_._as),_.add(5));var A=_.get(j),f="addPoint",K="removePointAt";if(2===A||1===A){var w={x:C.x,y:C.y};_.add(A,j),w=wl(J,w.x-J.x,w.y-J.y,-S),a[f](w,l+1)}else if(3===A){var g=a.getPoints(),M=g.get(l),c=g.get(l+2),w={x:C.x,y:C.y};w=wl(J,w.x-J.x,w.y-J.y,-S);var V=ql(M,w),d=ql(w,c);_.removeAt(j),_.add(3,j),_.add(3,j),a.setPoint(l+1,w),a[f](d,l+2),a[f](V,l+1)}else if(4===A){var g=a.getPoints(),M=g.get(l),c=g.get(l+3),w={x:C.x,y:C.y};w=wl(J,w.x-J.x,w.y-J.y,-S);var V=br(M,w),d=vi(M,w),L=br(w,c),E=vi(w,c);_.removeAt(j),_.add(4,j),_.add(4,j),a[K](l+1),a[K](l+1),a[f](w,l+1),a[f](E,l+2),a[f](L,l+2),a[f](d,l+1),a[f](V,l+1)}else if(5===A){var w={x:C.x,y:C.y};_.add(2,j),w=wl(J,w.x-J.x,w.y-J.y,-S),a[f](w,l+1)}a.isClosePath()&&_.remove(5),a.setSegments(_);var N=a.getWidth(),Z=a.getHeight(),s=a.p().x-N/2,x=a.p().y-Z/2;s-=J.x,x-=J.y;var U=Vf(a,{x:s,y:x,width:N,height:Z},S,J);a.p(U.x,U.y)}else if(a instanceof X){if("points"!==a.s("edge.type"))return y.endTransaction(),void 0;var g=a.s("edge.points");_=a.s("edge.segments"),g=cl(m.getDataUI(a),g),_&&_.size()||(_=es(g)),_=new G(_._as.slice(0)),g=new G(g._as.slice(0));var A=_.get(j);if(2===A||1===A){var w={x:C.x,y:C.y};_.add(A,j),g.add(w,l+1)}else if(3===A){var M=g.get(l),c=g.get(l+2),w={x:C.x,y:C.y},V=ql(M,w),d=ql(w,c);_.removeAt(j),_.add(3,j),_.add(3,j),g.set(l+1,w),g.add(d,l+2),g.add(V,l+1)}else if(4===A){var M=g.get(l),c=g.get(l+3),w={x:C.x,y:C.y},V=br(M,w),d=vi(M,w),L=br(w,c),E=vi(w,c);_.removeAt(j),_.add(4,j),_.add(4,j),g.removeAt(l+1),g.removeAt(l+1),g.add(w,l+1),g.add(E,l+2),g.add(L,l+2),g.add(d,l+1),g.add(V,l+1)}a.s("edge.points",Uh(g)),a.s("edge.segments",_)}}}y.endTransaction()},removeShapePoint:function(Z,O){var U=this,F="removeAt",i=U.gv,S=i.dm();if(S.beginTransaction(),0===arguments.length&&(Z=U._shape||U._edge,O=U._removePointIndex),O>=0&&(Z instanceof n||Z instanceof X)){var j=yn(Z,U.gv.getDataUI(Z),O),d=O;if(Z instanceof n){var e=Z.p(),T=Z.toSegments();T&&T.size()||(T=es(Z.getPoints()));var I=T.get(j),N="removePointAt";if(1===I&&0===d)if(Z.getPoints().size()>1){var h=T.get(j+1);T[F](j+1),3===h?Z[N](d+1):4===h&&(Z[N](d+2),Z[N](d+1)),Z[N](d)}else Z.dm().remove(Z);else 2===I||1===I?(T[F](j),Z[N](d)):3===I?(T[F](j),Z[N](d),Z[N](d-1)):4===I&&(T[F](j),Z[N](d),Z[N](d-1),Z[N](d-2));Z.setSegments(T);var s=Z.getWidth(),R=Z.getHeight(),H=Z.p().x-s/2,$=Z.p().y-R/2;H-=e.x,$-=e.y;var K=Vf(Z,{x:H,y:$,width:s,height:R},Z.getRotation(),e);Z.p(K.x,K.y)}else if(Z instanceof X){if("points"!==Z.s("edge.type"))return S.endTransaction(),void 0;var r=Z.s("edge.points");if(T=Z.s("edge.segments"),r&&(r=cl(U.gv.getDataUI(Z),r),T&&T.size()||(T=es(r))),0===O||O===r.size()-1)return S.endTransaction(),void 0;T=new G(T._as.slice(0)),r=new G(r._as.slice(0));var I=T.get(j);2===I||1===I?(T[F](j),r[F](d)):3===I?(T[F](j),r[F](d),r[F](d-1)):4===I&&(T[F](j),r[F](d),r[F](d-1),r[F](d-2)),Z.s("edge.segments",T),Z.s("edge.points",Uh(r))}}S.endTransaction()},changeShapeSegment:function(t,V,D){var k=this,s=k.gv,y=s.dm();if(y.beginTransaction(),1!==arguments.length||isNaN(t)||(D=t,t=k._shape||k._edge,V=k._hoverSegmentIndex),t instanceof n||t instanceof X){var K=Fi(t,k.gv.getDataUI(t),V);if(!isNaN(V)&&!isNaN(K))if(t instanceof n){var B=t.p(),w=t.toSegments();w&&w.size()||(w=es(t.getPoints()));var N=w.get(V),p=t.toPoints();if(1===D||2===D)1===N||2===N?w.set(V,D):3===N?(w.set(V,D),p.removeAt(K+1)):4===N&&(w.set(V,D),p.removeAt(K+1),p.removeAt(K+1));else if(3===D){var v=function(){var r=p.get(K),i=p.get(K+1),T=ql(r,i);w.set(V,3),p.add(T,K+1)};2===N||1===N?v():4===N&&(p.removeAt(K+1),p.removeAt(K+1),v())}else if(4===D){var u=function(){var U=p.get(K),h=p.get(K+1),u=br(U,h),a=vi(U,h);w.set(V,4),p.add(u,K+1),p.add(a,K+2)};2===N||1===N?u():3===N&&(p.removeAt(K+1),u())}t.setSegments(w),t.setPoints(p);var Q=t.getWidth(),q=t.getHeight(),c=t.p().x-Q/2,z=t.p().y-q/2;c-=B.x,z-=B.y;var o=new Vf(t,{x:c,y:z,width:Q,height:q},t.getRotation(),B);t.p(o.x,o.y)}else if(t instanceof X){if("points"!==t.s("edge.type"))return y.endTransaction(),void 0;var p=t.s("edge.points");w=t.s("edge.segments"),p&&(p=cl(k.gv.getDataUI(t),p),w&&w.size()||(w=es(p))),w=new G(w._as.slice(0)),p=new G(p._as.slice(0));var N=w.get(V);if(1===D||2===D)1===N||2===N?w.set(V,D):3===N?(w.set(V,D),p.removeAt(K+1)):4===N&&(w.set(V,D),p.removeAt(K+1),p.removeAt(K+1));else if(3===D){var v=function(){var k=p.get(K),A=p.get(K+1),N=ql(k,A);w.set(V,3),p.add(N,K+1)};2===N||1===N?v():4===N&&(p.removeAt(K+1),p.removeAt(K+1),v())}else if(4===D){var u=function(){var _=p.get(K),O=p.get(K+1),Y=br(_,O),b=vi(_,O);w.set(V,4),p.add(Y,K+1),p.add(b,K+2)};2===N||1===N?u():3===N&&(p.removeAt(K+1),u())}t.s("edge.points",Uh(p)),t.s("edge.segments",w)}}y.endTransaction()},getDefaultSegments:function(j){var y=this.gv,h=y.getDataUI(j);if(j instanceof X){var Q=j.s("edge.points");return Q=cl(h,Q),es(Q)}if(j instanceof n){var Q=j.getPoints(),$=j.getSegments();return $&&$.size()>0?$:es(Q)}},$43l:function(S){var H=this;S&&(H.$5l=1),H._68I=1,H._42()},_42:function(){var o=this;if(o._68I){delete o._68I;var y=o.gv,J=o.$5l,A=y.getZoom(),h=y.getEditPointSize(),g=h/2,H=new G,w=o._view,b=o._edge,x=o._shape,S=w.getContext("2d"),T=y.tx(),C=y.ty(),W=M,i=y.getEditPointBackground(),V=y.getControlPointBackground(),N=y.getControlPointBorderColor(),Y=y.getEditPointBorderColor(),j=y.getEditRectBorderColor(),l=y.getDirectionLineColor(),R=y.getSegmentHoverColor(),z=y.getSnapPointBorderColor(),k=y.getJoinPointBackground(),t=y.getJoinPointBorderColor(),U=y.getSegmentHoverWidth(),s=[5,5],P=y.getEditRectBorderStyle();eb(y,function(m){y.isSelected(m)&&y.isVisible(m)&&H.add(m)}),S.clearRect(0,0,I(w.width),I(w.height)),S.save(),E.translateAndScale(S,T,C,1);var f=M,d={x:0,y:0,width:0,height:0},B=0,p=0,D=0,$=0,Q=0,Z=0,Pi=0,aq=0,Qo=0,mh=0,ur=[];if(J?(delete o.$6l,delete o.$8l,delete o.$7l,delete o.$16l,delete o.$23l):(f=o.$6l,W=o.$7l),delete o.$68l,delete o.$69l,delete o.$71l,delete o.$70l,delete o.$82l,delete o.$83l,delete o._pointElevationHelperPoint,delete o.$90l,delete o.$91l,delete o.$75l,delete o.$74l,H.each(function(C){var u=y.getDataUI(C);if(u){var T=u._55O;if(y.isEditable(C))T._56O&&C instanceof _&&p++,ur.push(C),T._42O&&C instanceof _&&B++,y.isHelperEditable(C,"host")&&$++,y.isHelperEditable(C,"parent")&&D++,y.isHelperEditable(C,"remove")&&Q++,y.isHelperEditable(C,"edge")&&Z++,y.isHelperEditable(C,"source")&&Pi++,y.isHelperEditable(C,"target")&&aq++,y.isHelperEditable(C,"elevation")&&Qo++,y.isHelperEditable(C,"tall")&&mh++;else if(C instanceof L&&C.isExpanded()){var w=!0,K=y.getEditableFunc();K&&(w=K(C)),w&&(y.isHelperEditable(C,"host")&&$++,y.isHelperEditable(C,"parent")&&D++,y.isHelperEditable(C,"remove")&&Q++,y.isHelperEditable(C,"edge")&&Z++,y.isHelperEditable(C,"source")&&Pi++,y.isHelperEditable(C,"target")&&aq++,y.isHelperEditable(C,"elevation")&&Qo++,y.isHelperEditable(C,"tall")&&mh++,ur.push(C))}}}),S.beginPath(),S.lineWidth=1,S.strokeStyle=y.getNodeBorderColor(),ur.forEach(function(P){var C=y.getDataUI(P),Q=C._55O;if(J)if(W==M&&(W=P instanceof X?0:P instanceof L&&P.isExpanded()?0:P.getRotation(),o.$7l=W),f==M){var j,i,p;if(P instanceof L&&P.isExpanded()||P instanceof X){var m=y.getDataUIBounds(P);i=m.width,p=m.height,j={x:m.x+i/2,y:m.y+p/2}}else j=P.p(),i=P.getWidth(),p=P.getHeight();f={x:j.x,y:j.y,width:0,height:0},d.x=j.x-i/2,d.y=j.y-p/2,d.width=i,d.height=p,f=a(f,d)}else{var j,i,p,N,u=f.x+f.width/2,l=f.y+f.height/2,t={x:u,y:l};if(P instanceof L&&P.isExpanded()||P instanceof X){N=0;var m=y.getDataUIBounds(P);i=m.width,p=m.height,j={x:m.x+i/2,y:m.y+p/2}}else j=P.p(),i=P.getWidth(),p=P.getHeight(),N=P.getRotation();var H={x:j.x-i/2,y:j.y-p/2,width:i,height:p},$={x:H.x,y:H.y},e={x:H.x+H.width,y:H.y},v={x:H.x,y:H.y+H.height},s={x:H.x+H.width,y:H.y+H.height},$=wl(j,$.x-j.x,$.y-j.y,N),v=wl(j,v.x-j.x,v.y-j.y,N),s=wl(j,s.x-j.x,s.y-j.y,N),e=wl(j,e.x-j.x,e.y-j.y,N),Y=-W,c=wl(t,$.x-t.x,$.y-t.y,Y),O=wl(t,e.x-t.x,e.y-t.y,Y),w=wl(t,v.x-t.x,v.y-t.y,Y),I=wl(t,s.x-t.x,s.y-t.y,Y),q=r([c,O,w,I]);f=a(f,q),f.x-=u,f.y-=l;var Z=Vf(M,f,W,t);f.x=Z.x-f.width/2,f.y=Z.y-f.height/2}if(B>1&&y.isEditable(P)&&y.isRectEditable(P)&&P instanceof _){var E=P.getRect(),K=Q.$45l,k=Dn(K[0],A),T=Dn(K[2],A),V=Dn(K[4],A),x=Dn(K[6],A);P.getRotation()?(S.moveTo(k.x,k.y),S.lineTo(T.x,T.y),S.lineTo(V.x,V.y),S.lineTo(x.x,x.y),S.lineTo(k.x,k.y)):S.rect(E.x*A,E.y*A,E.width*A,E.height*A)}}),S.stroke(),f){o.$6l=e(f),c(f,y.getEditRectPadding()/A);var sg={x:f.x+f.width/2,y:f.y+f.height/2},Ec=dd(sg,f.width,f.height,W),Ae=Ec[0],$p=Ec[1],sf=Ec[2],Uj=Ec[3],Id=Ec[4],Ni=Ec[5],ji=Ec[6],am=Ec[7];if(Ae=Dn(Ec[0],A),$p=Dn(Ec[1],A),sf=Dn(Ec[2],A),Uj=Dn(Ec[3],A),Id=Dn(Ec[4],A),Ni=Dn(Ec[5],A),ji=Dn(Ec[6],A),am=Dn(Ec[7],A),o.$8l=f,B>0&&(o.$16l=[Ae,Id,$p,Ni,Uj,ji,sf,am],S.beginPath(),S.lineWidth=1,S.strokeStyle=j,"dashed"===P&&S.setLineDash&&S.setLineDash(s),S.moveTo(Ae.x,Ae.y),S.lineTo($p.x,$p.y),S.lineTo(Uj.x,Uj.y),S.lineTo(sf.x,sf.y),S.lineTo(Ae.x,Ae.y),S.stroke(),"dashed"===P&&S.setLineDash&&S.setLineDash([])),S.beginPath(),S.lineWidth=1,S.fillStyle=i,S.strokeStyle=Y,B>0){var Vn=Ni.x-am.x,Kf=Ni.y-am.y,vb=O(Vn*Vn+Kf*Kf),Mm=Id.x-ji.x,jn=Id.y-ji.y,Jm=O(Mm*Mm+jn*jn),ek=2*h;if(y.isDirectionEditable&&1===ur.length){var tn=ur[0],co=y.getDataUI(tn),xo=co._55O,rb=y.isDirectionEditable.bind(y);if(xo._42O){var si,Qf,de,Yo;rb(tn,"northwest")&&(si=!0,S.rect(Ae.x-g,Ae.y-g,h,h)),rb(tn,"northeast")&&(Qf=!0,S.rect($p.x-g,$p.y-g,h,h)),rb(tn,"southwest")&&(de=!0,S.rect(sf.x-g,sf.y-g,h,h)),rb(tn,"southeast")&&(Yo=!0,S.rect(Uj.x-g,Uj.y-g,h,h)),rb(tn,"north")&&(si&&Qf?vb>ek&&S.rect(Id.x-g,Id.y-g,h,h):S.rect(Id.x-g,Id.y-g,h,h)),rb(tn,"south")&&(Yo&&de?vb>ek&&S.rect(ji.x-g,ji.y-g,h,h):S.rect(ji.x-g,ji.y-g,h,h)),rb(tn,"west")&&(de&&si?Jm>ek&&S.rect(am.x-g,am.y-g,h,h):S.rect(am.x-g,am.y-g,h,h)),rb(tn,"east")&&(Yo&&Qf?Jm>ek&&S.rect(Ni.x-g,Ni.y-g,h,h):S.rect(Ni.x-g,Ni.y-g,h,h))}}else vb>ek&&(S.rect(Id.x-g,Id.y-g,h,h),S.rect(ji.x-g,ji.y-g,h,h)),Jm>ek&&(S.rect(Ni.x-g,Ni.y-g,h,h),S.rect(am.x-g,am.y-g,h,h)),S.rect(Ae.x-g,Ae.y-g,h,h),S.rect($p.x-g,$p.y-g,h,h),S.rect(sf.x-g,sf.y-g,h,h),S.rect(Uj.x-g,Uj.y-g,h,h)}if(p>0){var Jd=o.$23l=wl(Id,0,2*-h,W);S.moveTo(Jd.x+g,Jd.y),S.arc(Jd.x,Jd.y,g,0,u,!1)}S.fill(),S.stroke(),o.$40l&&o.$44l(S,f,W);var Dd,mr,Hc=y.getLeftTopHelpers(),Le=y.getRightTopHelpers(),se=y.getLeftBottomHelpers(),vk=y.getRightBottomHelpers(),ie=y.getEdgeHelpers(),ol=y.getEditHelperSize(),Zf=ol/2,Lj=function(k,d,I,a){"leftTop"===d?(Dd=f.x*A-ol-g-("h"===a?I*(ol+g):0)-1,mr=f.y*A-ol-g-("v"===a?I*(ol+g):0)-1):"rightTop"===d?(Dd=(f.x+f.width)*A+g+("h"===a?I*(ol+g):0)+1,mr=f.y*A-ol-g-("v"===a?I*(ol+g):0)-1):"leftBottom"===d?(Dd=f.x*A-ol-g-("h"===a?I*(ol+g):0)-1,mr=(f.y+f.height)*A+g+("v"===a?I*(ol+g):0)+1):"rightBottom"===d&&(Dd=(f.x+f.width)*A+g+("h"===a?I*(ol+g):0)+1,mr=(f.y+f.height)*A+g+("v"===a?I*(ol+g):0)+1);var i=Dd+Zf,R=mr+Zf,C=(f.x+f.width/2)*A,L=(f.y+f.height/2)*A,r=wl({x:C,y:L},i-C,R-L,W);if("host"===k){if($>0)return o.$77l(S,W,r),!0}else if("edge"===k){if(Z>0)return o.$80l(S,W,r),!0}else if("remove"===k){if(Q>0)return ur&&1===ur.length&&ur[0]instanceof X?o.$81l(S,W,{x:C+ol/2+5,y:L}):o.$81l(S,W,r),!0}else if("parent"===k){if(D>0)return ur&&1===ur.length&&ur[0]instanceof X?o.$76l(S,W,{x:C-ol/2-5,y:L}):o.$76l(S,W,r),!0}else if("elevation"===k){if(Qo>0)return o.$85l(S,W,r),!0}else if("tall"===k){if(mh>0)return o.$86l(S,W,r),!0}else if("source"===k||"target"===k){var z=ur[0],v=y.getDataUI(z),t=is(v,!0),U=t[0],e=t[1];if(Pi&&"source"===k)return o.$84l(S,f,U,!0,z.isLooped(),d,I,a),!0;if(aq&&"target"===k)return o.$84l(S,f,e,!1,z.isLooped(),d,I,a),!0}};if(Hc&&Hc.length>0){var Ef=0;Hc.forEach(function(V){Lj(V,"leftTop",Ef,y.getLeftTopHelpersAlign()||"h")&&Ef++})}if(Le&&Le.length>0){var Ef=0;Le.forEach(function(P){Lj(P,"rightTop",Ef,y.getRightTopHelpersAlign()||"h")&&Ef++})}if(se&&se.length>0){var Ef=0;se.forEach(function(S){Lj(S,"leftBottom",Ef,y.getLeftBottomHelpersAlign()||"h")&&Ef++})}if(vk&&vk.length>0){var Ef=0;vk.forEach(function(C){Lj(C,"rightBottom",Ef,y.getRightBottomHelpersAlign()||"h")&&Ef++})}if(ie&&ie.length>0&&((Pi||aq)&&ur&&1===ur.length&&ur[0]instanceof X?!0:!1)){var Ef=0;ie.forEach(function($){Lj($,"edge",Ef,"h")&&Ef++})}if(o.$72l){var Rh,$g=o.$67l,wf=o.$68l,gp=o.$69l,hr=(o.$71l,o.$70l),Xd=o.$82l,zb=o.$83l;if(1===$g?Rh=wf:2===$g?Rh=gp:3===$g?Rh=hr:5===$g?Rh=Xd:6===$g&&(Rh=zb),Rh){var Un=y.lp(o.$72l),bg=y.getDataAt(o.$72l);if(bg&&bg instanceof _){var eg,Vm,Fc;if(o.$73l=bg,1===$g)if(bg instanceof K.Grid)eg=o.$75l=qh(bg,Un);else if(bg instanceof K.Shape){Fc=o.$74l=Tk(bg,Un);var cs=bg.getPoints();if(Fc){var Ci=Fc.attachIndex,wr=Fi(bg,y.getDataUI(bg),Ci)+1,ws=wr+1>=cs.size()?0:wr+1,Th=cs.get(wr),To=cs.get(ws),Uh=bg.p(),zr=bg.getRotation();Th=wl(Uh,Th.x-Uh.x,Th.y-Uh.y,zr),To=wl(Uh,To.x-Uh.x,To.y-Uh.y,zr),S.beginPath(),S.strokeStyle=R,S.lineWidth=U,S.moveTo(Th.x*A,Th.y*A),S.lineTo(To.x*A,To.y*A),S.stroke()}}eg?Vm=eg.rect:(Vm=q.clone(y.getDataUIBounds(bg)),q.grow(Vm,2)),S.beginPath(),S.rect(Vm.x*A,Vm.y*A,Vm.width*A,Vm.height*A),S.strokeStyle=1===$g||4===$g||6===$g?v:m,S.lineWidth=2,S.setLineDash&&S.setLineDash([8,8]),S.stroke()}else delete o.$73l;Un.x=Un.x*A,Un.y=Un.y*A;var ql=Ff(Rh.x,Rh.y,Un.x,Un.y),Hp=wl(Rh,Un.x-Rh.x,Un.y-Rh.y,-ql),Cq=Hp.x-Rh.x;S.save(),S.translate(Rh.x,Rh.y),S.rotate(ql),F.width=Cq,F.height=40;var fc=m;(1===$g||4===$g||6===$g)&&(fc=v),F.comps[0].gradientColor=fc,q.drawImage(S,F,0,-20,Cq,40),S.restore()}}}if(H.each(function(q){var w=y.getDataUI(q);if(w){var e,m,d=w._55O,f=w._78o;if(d&&d._43O&&q instanceof n?(e=d.$15l,m=q.getSegments(),m&&m.size()||(m=es(e)),q.isClosePath()&&m.indexOf(5)<0&&(m=new G(m._as),m.add(5))):d&&f&&d._43O&&(e=q.s("edge.points"),m=q.s("edge.segments"),e=cl(w,e),m&&m.size()||(m=es(e)),e&&(e=e._as)),e&&m){var c=0,h=m.size(),v=o._hoverSegmentIndex;e=e.slice(0);for(var F=0;F<e.length;F++)e[F]=Dn(e[F],A);S.beginPath(),S.strokeStyle=l,S.lineWidth=1,c=0;for(var F=0;h>F;F++){var L=m.get(F);if(1===L||2===L)c++;else if(3===L){var p=e[c-1],r=e[c],s=e[c+1];S.moveTo(p.x,p.y),S.lineTo(r.x,r.y),S.lineTo(s.x,s.y),c+=2}else if(4===L){var p=e[c-1],_=e[c],H=e[c+1],s=e[c+2];S.moveTo(p.x,p.y),S.lineTo(_.x,_.y),S.moveTo(H.x,H.y),S.lineTo(s.x,s.y),c+=3}}if(S.stroke(),x===q||b===q&&"points"===b.s("edge.type")){S.beginPath(),c=0,S.strokeStyle=R,S.lineWidth=U;for(var F=0;h>F;F++){var L=m.get(F);if(1===L||2===L){if(v===F){var p=e[c-1],s=e[c];S.moveTo(p.x,p.y),S.lineTo(s.x,s.y);break}c++}else if(3===L){if(v===F){var p=e[c-1],r=e[c],s=e[c+1];S.moveTo(p.x,p.y),S.quadraticCurveTo(r.x,r.y,s.x,s.y);break}c+=2}else if(4===L){if(v===F){var p=e[c-1],_=e[c],H=e[c+1],s=e[c+2];S.moveTo(p.x,p.y),S.bezierCurveTo(_.x,_.y,H.x,H.y,s.x,s.y);break}c+=3}else if(5===L&&v===F){var p=e[c-1],s=e[0];S.moveTo(p.x,p.y),S.lineTo(s.x,s.y);break}}S.stroke()}S.beginPath(),c=0,S.strokeStyle=t,S.lineWidth=1,S.fillStyle=k;for(var F=0;h>F;F++){var L=m.get(F);if(1===L||2===L){var s=e[c];S.moveTo(s.x+g,s.y),S.arc(s.x,s.y,g,0,u,!0),c++}else if(3===L){var s=e[c+1];S.moveTo(s.x+g,s.y),S.arc(s.x,s.y,g,0,u,!0),c+=2}else if(4===L){var s=e[c+2];S.moveTo(s.x+g,s.y),S.arc(s.x,s.y,g,0,u,!0),c+=3}}S.fill(),S.stroke(),S.beginPath(),c=0,S.strokeStyle=N,S.lineWidth=1,S.fillStyle=V;for(var F=0;h>F;F++){var L=m.get(F);if(1===L||2===L)c++;else if(3===L){var r=e[c];S.moveTo(r.x+g,r.y),S.arc(r.x,r.y,g,0,u,!0),c+=2}else if(4===L){var _=e[c],H=e[c+1];S.moveTo(_.x+g,_.y),S.arc(_.x,_.y,g,0,u,!0),S.moveTo(H.x+g,H.y),S.arc(H.x,H.y,g,0,u,!0),c+=3}}if(S.fill(),S.stroke(),S.beginPath(),c=0,S.strokeStyle=z,S.lineWidth=2,(x===q||b===q)&&o.$9l!=M){var s=e[o.$9l];S.moveTo(s.x+g,s.y),S.arc(s.x,s.y,g,0,u,!0),S.stroke()}}}}),o.$87l&&y.sm().contains(o.$87l)){var sr,Qe=o.$87l,Mn=o.$88l,ol=y.getEditHelperSize(),Zf=ol/2;if(y.isHelperEditable(Qe,"pointElevation"))if(Qe instanceof n){var Ue=Qe.getPosition();sr=q.clone(Qe.getPoints().get(Mn)),sr=wl({x:Ue.x,y:Ue.y},sr.x-Ue.x,sr.y-Ue.y,Qe.getRotation()),sr.x*=A,sr.y*=A,S.translate(sr.x,sr.y),q.drawImage(S,q.getImage("xeditinteractor_elevationIcon"),Zf,-Zf,ol,ol),S.translate(-sr.x,-sr.y),o._pointElevationHelperPoint={x:sr.x+ol,y:sr.y}}else if(Qe instanceof X){var Mf=cl(y.getDataUI(Qe),Qe.s("edge.points")),sr=q.clone(Mf.get(Mn));sr.x*=A,sr.y*=A,S.translate(sr.x,sr.y),q.drawImage(S,q.getImage("xeditinteractor_elevationIcon"),Zf,-Zf,ol,ol),S.translate(-sr.x,-sr.y),o._pointElevationHelperPoint={x:sr.x+ol,y:sr.y}}}S.restore(),o.$5l=0}},$89l:function(v,o,t,I){v.save();var Q=this,g=Q.gv,k=g.getEditHelperSize(),R=k/2;v.beginPath(),v.translate(t.x,t.y),v.rotate(o),q.drawImage(v,I,-R,-R,k,k),v.restore()},$85l:function(R,Z,W){var n=this;n.$90l=W,n.$89l(R,Z,W,q.getImage("xeditinteractor_elevationIcon"))},$86l:function(f,i,g){var x=this;x.$91l=g,x.$89l(f,i,g,q.getImage("xeditinteractor_tallIcon"))},$77l:function(m,x,w){var J=this;J.$68l=w,J.$89l(m,x,w,q.getImage("xeditinteractor_hostIcon"))},$80l:function(u,x,p){var g=this;g.$70l=p,g.$89l(u,x,p,q.getImage("xeditinteractor_edgeIcon"))},$81l:function(n,U,H){var Z=this;Z.$71l=H,Z.$89l(n,U,H,q.getImage("xeditinteractor_removeIcon"))},$76l:function(Q,D,n){var B=this;B.$69l=n,B.$89l(Q,D,n,q.getImage("xeditinteractor_parentIcon"))},$84l:function(T,Z,E,A,h){var U,f=this,y=f.gv,i=y.getZoom(),S=y.getEditHelperSize(),X=S/2;E.x*=i,E.y*=i,h&&(A?E.x-=X+5:E.x+=X+5),E.y-=S-2,A?(f.$82l=E,U=q.getImage("xeditinteractor_sourceIcon")):(f.$83l=E,U=q.getImage("xeditinteractor_targetIcon")),T.beginPath(),T.translate(E.x,E.y),q.drawImage(T,U,-X,-X,S,S),T.translate(-E.x,-E.y)},$44l:function(p,I,c){p.save();var h=this.gv.getZoom(),g=O(S(I.width,2)+S(I.height,2))/2*h+10,x=g,l=x+8,W=x+18,D=c,X=I.x+I.width/2,J=I.y+I.height/2;p.translate(X*h,J*h),p.beginPath(),p.strokeStyle="rgb(150, 150, 150)";for(var k=0,N=0,v=0,L=0,G=0,T=0;360>T;T++)k=T*H/180,0===T%5&&(N=B(k)*x,v=b(k)*x,L=B(k)*l,G=b(k)*l,p.moveTo(N,v),p.lineTo(L,G)),0===T%45&&(N=B(k)*x,v=b(k)*x,L=B(k)*W,G=b(k)*W,p.moveTo(N,v),p.lineTo(L,G));p.stroke(),p.beginPath(),p.rotate(-C),p.beginPath(),p.fillStyle="rgba(255, 0, 0, 0.1)",p.strokeStyle="rgb(157, 157, 157)",p.moveTo(0,0),p.arc(0,0,W,0,c,!1),p.fill(),p.beginPath(),p.moveTo(0+W,0),p.arc(0,0,W,0,c,!1),p.stroke(),p.rotate(C),p.font="bold 12px Verdana, Arial";var F=20*b(D),U=20*B(D),E=Y(180*D/H)+"";p.textAlign="center",p.textBaseline="middle",p.beginPath();var M=p.measureText("365.").width;p.fillStyle="white",p.rect(F-M/2,-U-10,M,20),p.fill(),p.beginPath(),p.fillStyle="rgb(79,79,79)",p.fillText(E,F,-U),p.restore()}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);