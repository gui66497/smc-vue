!function(t,d,a){"use strict";var F="ht",V=t[F],i=V.Default,w=i.getInternal();w.addMethod(i,{toDxf:function(v){var P=new V.DxfWriter;P.snapshotView(v);var b=P.write();return b},viewDxf:function(K,Q,v){var J=new V.DxfViewer(K,v);K.addBottomPainter(J),J.parseFile(Q)}}),function(O){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=O();else if("function"==typeof define&&define.amd)define([],O);else{var W;W="undefined"!=typeof t?t:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,W.DxfParser=O()}}(function(){var y;return function H($,R,t){function s(W,T){if(!R[W]){if(!$[W]){var N="function"==typeof require&&require;if(!T&&N)return N(W,!0);if(n)return n(W,!0);var p=new Error("Cannot find module '"+W+"'");throw p.code="MODULE_NOT_FOUND",p}var S=R[W]={exports:{}};$[W][0].call(S.exports,function(f){var r=$[W][1][f];return s(r?r:f)},S,S.exports,H,$,R,t)}return R[W].exports}for(var n="function"==typeof require&&require,I=0;I<t.length;I++)s(t[I]);return s}({1:[function(T,J){J.exports=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215]},{}],2:[function(S,f){function E(F){this._pointer=0,this._data=F,this._eof=!1}function P(c,j){return 9>=c?j:c>=10&&59>=c?parseFloat(j):c>=60&&99>=c?parseInt(j):c>=100&&109>=c?j:c>=110&&149>=c?parseFloat(j):c>=160&&179>=c?parseInt(j):c>=210&&239>=c?parseFloat(j):c>=270&&289>=c?parseInt(j):c>=290&&299>=c?W(j):c>=300&&369>=c?j:c>=370&&389>=c?parseInt(j):c>=390&&399>=c?j:c>=400&&409>=c?parseInt(j):c>=410&&419>=c?j:c>=420&&429>=c?parseInt(j):c>=430&&439>=c?j:c>=440&&459>=c?parseInt(j):c>=460&&469>=c?parseFloat(j):c>=470&&481>=c?j:999===c?j:c>=1e3&&1009>=c?j:c>=1010&&1059>=c?parseFloat(j):c>=1060&&1071>=c?parseInt(j):(console.log("WARNING: Group code does not have a defined type: %j",{code:c,value:j}),j)}function W(f){if("0"===f)return!1;if("1"===f)return!0;throw TypeError("String '"+f+"' cannot be cast to Boolean type")}E.prototype.next=function(){var r;if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);return r={code:parseInt(this._data[this._pointer])},this._pointer++,r.value=P(r.code,this._data[this._pointer].trim()),this._pointer++,0===r.code&&"EOF"===r.value&&(this._eof=!0),r},E.prototype.hasNext=function(){return this._eof?!1:this._pointer>this._data.length-2?!1:!0},E.prototype.isEOF=function(){return this._eof},f.exports=E},{}],3:[function(y,g){function C(){}function U(y){P.debug("unhandled group "+O(y))}function O(G){return G.code+":"+G.value}function G(J){return f[J]}var k=y("./DxfArrayScanner.js"),f=y("./AutoCadColorIndex"),P=y("loglevel");P.setLevel("error"),C.prototype.parse=function(){throw new Error("read() not implemented. Use readSync()")},C.prototype.parseSync=function(E){return"string"==typeof E?this._parse(E):(console.error("Cannot read dxf source of type `"+typeof E),null)},C.prototype.parseStream=function(l,O){function $(u){z+=u}function K(){try{var l=y._parse(z)}catch(B){return O(B)}O(null,l)}function V(Q){O(Q)}var z="",y=this;l.on("data",$),l.on("end",K),l.on("error",V)},C.prototype._parse=function(E){var I,s,f={},h=0,H=E.split(/\r\n|\r|\n/g);if(I=new k(H),!I.hasNext())throw Error("Empty file");var y=function(){for(s=I.next();!I.isEOF();)if(0===s.code&&"SECTION"===s.value){if(s=I.next(),2!==s.code){console.error("Unexpected code %s after 0:SECTION",O(s)),s=I.next();continue}"HEADER"===s.value?(P.debug("> HEADER"),f.header=T(),P.debug("<")):"BLOCKS"===s.value?(P.debug("> BLOCKS"),f.blocks=l(),P.debug("<")):"ENTITIES"===s.value?(P.debug("> ENTITIES"),f.entities=v(!1),P.debug("<")):"TABLES"===s.value?(P.debug("> TABLES"),f.tables=B(),P.debug("<")):"EOF"===s.value?P.debug("EOF"):P.warn("Skipping section '%s'",s.value)}else s=I.next()},$=function(z,A){return s.code===z&&s.value===A},T=function(){var K=null,c=null,u={};for(s=I.next();;){if($(0,"ENDSEC")){K&&(u[K]=c);break}9===s.code?(K&&(u[K]=c),K=s.value):10===s.code?c={x:s.value}:20===s.code?c.y=s.value:30===s.code?c.z=s.value:c=s.value,s=I.next()}return s=I.next(),u},l=function(){var j,k={};for(s=I.next();"EOF"!==s.value&&!$(0,"ENDSEC");)$(0,"BLOCK")?(P.debug("block {"),j=t(),P.debug("}"),X(j),j.name?k[j.name]=j:P.error('block with handle "'+j.handle+'" is missing a name.')):(U(s),s=I.next());return k},t=function(){var H={};for(s=I.next();"EOF"!==s.value;){switch(s.code){case 1:H.xrefPath=s.value,s=I.next();break;case 2:H.name=s.value,s=I.next();break;case 3:H.name2=s.value,s=I.next();break;case 5:H.handle=s.value,s=I.next();break;case 8:H.layer=s.value,s=I.next();break;case 10:H.position=o();break;case 67:H.paperSpace=s.value&&1==s.value?!0:!1,s=I.next();break;case 70:0!=s.value&&(H.type=s.value),s=I.next();break;case 100:s=I.next();break;case 330:H.ownerHandle=s.value,s=I.next();break;case 0:if("ENDBLK"==s.value)break;I._pointer-=2,H.entities=v(!0);break;default:U(s),s=I.next()}if($(0,"ENDBLK")){s=I.next();break}}return H},B=function(){var O={};for(s=I.next();"EOF"!==s.value&&!$(0,"ENDSEC");)if($(0,"TABLE")){s=I.next();var g=Y[s.value];g?(P.debug(s.value+" Table {"),O[Y[s.value].tableName]=z(),P.debug("}")):P.debug("Unhandled Table "+s.value)}else s=I.next();return s=I.next(),O},q="ENDTAB",z=function(){var n,X=Y[s.value],m={},D=0;for(s=I.next();!$(0,q);)switch(s.code){case 5:m.handle=s.value,s=I.next();break;case 330:m.ownerHandle=s.value,s=I.next();break;case 100:"AcDbSymbolTable"===s.value?s=I.next():(U(s),s=I.next());break;case 70:D=s.value,s=I.next();break;case 0:s.value===X.dxfSymbolName?m[X.tableRecordsProperty]=X.parseTableRecords():(U(s),s=I.next());break;default:U(s),s=I.next()}var c=m[X.tableRecordsProperty];return c&&(c.constructor===Array?n=c.length:"object"==typeof c&&(n=d.keys(c).length),D!==n&&P.warn("Parsed "+n+" "+X.dxfSymbolName+"'s but expected "+D)),s=I.next(),m},J=function(){var u=[],f={};for(P.debug("ViewPort {"),s=I.next();!$(0,q);)switch(s.code){case 2:f.name=s.value,s=I.next();break;case 10:f.lowerLeftCorner=o();break;case 11:f.upperRightCorner=o();break;case 12:f.center=o();break;case 13:f.snapBasePoint=o();break;case 14:f.snapSpacing=o();break;case 15:f.gridSpacing=o();break;case 16:f.viewDirectionFromTarget=o();break;case 17:f.viewTarget=o();break;case 40:f.viewHeight=s.value,f.aspectRatio!==a&&(f.viewWidth=s.value*f.aspectRatio),s=I.next();break;case 41:f.aspectRatio=s.value,f.viewHeight!==a&&(f.viewWidth=s.value*f.viewHeight),s=I.next();break;case 42:f.lensLength=s.value,s=I.next();break;case 43:f.frontClippingPlane=s.value,s=I.next();break;case 44:f.backClippingPlane=s.value,s=I.next();break;case 45:f.viewHeight=s.value,s=I.next();break;case 50:f.snapRotationAngle=s.value,s=I.next();break;case 51:f.viewTwistAngle=s.value,s=I.next();break;case 79:f.orthographicType=s.value,s=I.next();break;case 110:f.ucsOrigin=o();break;case 111:f.ucsXAxis=o();break;case 112:f.ucsYAxis=o();break;case 110:f.ucsOrigin=o();break;case 281:f.renderMode=s.value,s=I.next();break;case 281:f.defaultLightingType=s.value,s=I.next();break;case 292:f.defaultLightingOn=s.value,s=I.next();break;case 330:f.ownerHandle=s.value,s=I.next();break;case 63:case 421:case 431:f.ambientColor=s.value,s=I.next();break;case 0:"VPORT"===s.value&&(P.debug("}"),u.push(f),P.debug("ViewPort {"),f={},s=I.next());break;default:U(s),s=I.next()}return P.debug("}"),u.push(f),u},V=function(){var W,D,K={},o={};for(P.debug("LType {"),s=I.next();!$(0,"ENDTAB");)switch(s.code){case 2:o.name=s.value,W=s.value,s=I.next();break;case 3:o.description=s.value,s=I.next();break;case 73:D=s.value,D>0&&(o.pattern=[]),s=I.next();break;case 40:o.patternLength=s.value,s=I.next();break;case 49:o.pattern.push(s.value),s=I.next();break;case 0:P.debug("}"),D>0&&D!==o.pattern.length&&P.warn("lengths do not match on LTYPE pattern"),K[W]=o,o={},P.debug("LType {"),s=I.next();break;default:s=I.next()}return P.debug("}"),K[W]=o,K},C=function(){var p,E={},H={};for(P.debug("Layer {"),s=I.next();!$(0,"ENDTAB");)switch(s.code){case 2:H.name=s.value,p=s.value,s=I.next();break;case 62:H.visible=s.value>0,H.color=G(Math.abs(s.value)),s=I.next();break;case 6:H.lineType=s.value,s=I.next();break;case 0:"LAYER"===s.value&&(P.debug("}"),E[p]=H,P.debug("Layer {"),H={},p=a,s=I.next());break;default:U(s),s=I.next()}return P.debug("}"),E[p]=H,E},Y={VPORT:{tableRecordsProperty:"viewPorts",tableName:"viewPort",dxfSymbolName:"VPORT",parseTableRecords:J},LTYPE:{tableRecordsProperty:"lineTypes",tableName:"lineType",dxfSymbolName:"LTYPE",parseTableRecords:V},LAYER:{tableRecordsProperty:"layers",tableName:"layer",dxfSymbolName:"LAYER",parseTableRecords:C}},v=function(V){var N=[],_=V?"ENDBLK":"ENDSEC";for(s=I.next();;)if(0===s.code){if(s.value===_)break;var l;if("LWPOLYLINE"===s.value)P.debug("LWPOLYLINE {"),l=u(),P.debug("}");else if("POLYLINE"===s.value)P.debug("POLYLINE {"),l=F(),P.debug("}");else if("LINE"===s.value)P.debug("LINE {"),l=i(),P.debug("}");else if("CIRCLE"===s.value)P.debug("CIRCLE {"),l=W(),P.debug("}");else if("ARC"===s.value)P.debug("ARC {"),l=W(),P.debug("}");else if("ELLIPSE"===s.value)P.debug("ELLIPSE {"),l=g(),P.debug("}");else if("SPLINE"===s.value)P.debug("SPLINE {"),l=r(),P.debug("}");else if("TEXT"===s.value)P.debug("TEXT {"),l=R(),P.debug("}");else if("DIMENSION"===s.value)P.debug("DIMENSION {"),l=c(),P.debug("}");else if("INSERT"===s.value)P.debug("INSERT {"),l=x(),P.debug("}");else if("HATCH"===s.value)P.debug("HATCH {"),l=m(),P.debug("}");else if("SOLID"===s.value)P.debug("SOLID {"),l=p(),P.debug("}");else if("POINT"===s.value)P.debug("POINT {"),l=K(),P.debug("}");else if("MTEXT"===s.value)P.debug("MTEXT {"),l=b(),P.debug("}");else{if("ATTDEF"!==s.value){P.warn("Unhandled entity "+s.value),s=I.next();continue}P.debug("ATTDEF {"),l=M(),P.debug("}")}X(l),N.push(l)}else s=I.next();return"ENDSEC"==_&&(s=I.next()),N},N=function(d){switch(s.code){case 0:d.type=s.value,s=I.next();break;case 5:d.handle=s.value,s=I.next();break;case 6:d.lineType=s.value,s=I.next();break;case 8:d.layer=s.value,s=I.next();break;case 48:d.lineTypeScale=s.value,s=I.next();break;case 60:d.visible=0===s.value,s=I.next();break;case 62:d.colorIndex=s.value,d.color=G(Math.abs(s.value)),s=I.next();break;case 67:d.inPaperSpace=0!==s.value,s=I.next();break;case 210:d.extrusionDirection=o();break;case 330:d.ownerHandle=s.value,s=I.next();break;case 347:d.materialObjectHandle=s.value,s=I.next();break;case 370:d.lineweight=s.value,s=I.next();break;case 420:d.color=s.value,s=I.next();break;case 100:if("AcDbEntity"==s.value){s=I.next();break}default:U(s),s=I.next()}},w=function(){var H={type:s.value};for(s=I.next();"EOF"!==s&&0!==s.code;)switch(s.code){case 10:H.x=s.value,s=I.next();break;case 20:H.y=s.value,s=I.next();break;case 30:H.z=s.value,s=I.next();break;case 40:case 41:case 42:s=I.next();break;case 70:H.curveFittingVertex=0!==(1|s.value),H.curveFitTangent=0!==(2|s.value),H.splineVertex=0!==(8|s.value),H.splineControlPoint=0!==(16|s.value),H.ThreeDPolylineVertex=0!==(32|s.value),H.ThreeDPolylineMesh=0!==(64|s.value),H.polyfaceMeshVertex=0!==(128|s.value),s=I.next();break;case 50:case 71:case 72:case 73:case 74:s=I.next();break;default:N(H)}return H},n=function(){var y={type:s.value};for(s=I.next();"EOF"!=s&&0!=s.code;)N(y);return y},o=function(){var _={},h=s.code;if(_.x=s.value,h+=10,s=I.next(),s.code!=h)throw new Error("Expected code for point value to be "+h+" but got "+s.code+".");return _.y=s.value,h+=10,s=I.next(),s.code!=h?_:(_.z=s.value,s=I.next(),_)},D=function(){var R={},q=s.code;return R.x=s.value,q+=1,s=I.next(),s.code!=q?(I._pointer-=2,R.y=1):R.y=s.value,q+=1,s=I.next(),s.code!=q?(I._pointer-=2,R):(R.z=s.value,s=I.next(),R)},Z=function(m){if(!m||0>=m)throw Error("n must be greater than 0 verticies");var v,p=[],w=!1,K=!1;for(v=0;m>v;v++){for(var V={};"EOF"!==s&&0!==s.code&&!K;){switch(s.code){case 10:if(w){K=!0;continue}V.x=s.value,w=!0;break;case 20:V.y=s.value;break;case 30:V.z=s.value;break;case 40:V.startWidth=s.value;break;case 41:V.endWidth=s.value;break;case 42:0!=s.value&&(V.bulge=s.value);break;default:s=I.next();continue}s=I.next()}p.push(V),w=!1,K=!1}return p},A=function(){for(var L=[];"EOF"!==s;)if(0===s.code)if("VERTEX"===s.value)L.push(w());else if("SEQEND"===s.value){n();break}return L},b=function(){var h={type:s.value};for(s=I.next();"EOF"!==s&&0!==s.code;)switch(s.code){case 1:h.text=s.value,s=I.next();break;case 3:h.text+=s.value,s=I.next();break;case 10:h.position=o();break;case 40:h.height=s.value,s=I.next();break;case 41:h.width=s.value,s=I.next();break;case 71:h.attachmentPoint=s.value,s=I.next();break;case 72:h.drawingDirection=s.value,s=I.next();break;case 50:h.angle=2*s.value*Math.PI/360,s=I.next();break;case 11:h.directionX=s.value,s=I.next();break;case 21:h.directionY=s.value,s=I.next();break;default:N(h)}return h},M=function(){var W={type:s.value,scale:1,textStyle:"STANDARD"};for(s=I.next();"EOF"!==s&&0!==s.code;)switch(s.code){case 1:W.text=s.value,s=I.next();break;case 2:W.tag=s.value,s=I.next();break;case 3:W.prompt=s.value,s=I.next();break;case 7:W.textStyle=s.value,s=I.next();break;case 10:W.x=s.value,s=I.next();break;case 20:W.y=s.value,s=I.next();break;case 30:W.z=s.value,s=I.next();break;case 39:W.thickness=s.value,s=I.next();break;case 40:W.textHeight=s.value,s=I.next();break;case 41:W.scale=s.value,s=I.next();break;case 50:W.rotation=s.value,s=I.next();break;case 51:W.obliqueAngle=s.value,s=I.next();break;case 70:W.invisible=!!(1&s.value),W.constant=!!(2&s.value),W.verificationRequired=!!(4&s.value),W.preset=!!(8&s.value),s=I.next();break;case 71:W.backwards=!!(2&s.value),W.mirrored=!!(4&s.value),s=I.next();break;case 72:W.horizontalJustification=s.value,s=I.next();break;case 73:W.fieldLength=s.value,s=I.next();break;case 74:W.verticalJustification=s.value,s=I.next();break;case 100:s=I.next();break;case 210:W.extrusionDirectionX=s.value,s=I.next();break;case 220:W.extrusionDirectionY=s.value,s=I.next();break;case 230:W.extrusionDirectionZ=s.value,s=I.next();break;default:N(W)}return W},u=function(){var z={type:s.value,vertices:[]},M=0;for(s=I.next();"EOF"!==s&&0!==s.code;)switch(s.code){case 38:z.elevation=s.value,s=I.next();break;case 39:z.depth=s.value,s=I.next();break;case 70:z.shape=1===s.value,s=I.next();break;case 90:M=s.value,s=I.next();break;case 10:z.vertices=Z(M);break;case 43:0!==s.value&&(z.width=s.value),s=I.next();break;default:N(z)}return z},F=function(){var t={type:s.value,vertices:[]};for(s=I.next();"EOF"!==s&&0!==s.code;)switch(s.code){case 10:case 20:case 30:case 39:case 40:case 41:s=I.next();break;case 70:t.shape=0!==(1|s.value),s=I.next();break;case 71:case 72:case 73:case 74:case 75:s=I.next();break;case 210:P.debug(s.value),s=I.next();break;case 220:case 230:s=I.next();break;case 100:s=I.next();break;default:N(t)}return t.vertices=A(),t},i=function(){var L={type:s.value,vertices:[]};for(s=I.next();"EOF"!==s&&0!==s.code;)switch(s.code){case 10:L.vertices.unshift(o());break;case 11:L.vertices.push(o());break;case 100:if("AcDbLine"==s.value){s=I.next();break}default:N(L)}return L},W=function(){var i,g;for(i={type:s.value},s=I.next();"EOF"!==s&&0!==s.code;)switch(s.code){case 10:i.center=o();break;case 40:i.radius=s.value,s=I.next();break;case 50:i.startAngle=Math.PI/180*s.value,s=I.next();break;case 51:g=Math.PI/180*s.value,i.angleLength=g<i.startAngle?g+2*Math.PI-i.startAngle:g-i.startAngle,i.endAngle=g,s=I.next();break;default:N(i)}return i},g=function(){var B,L;for(B={type:s.value},s=I.next();"EOF"!==s&&0!==s.code;)switch(s.code){case 10:B.center=o();break;case 11:B.major=o();break;case 40:B.ratio=s.value,s=I.next();break;case 41:B.startAngle=s.value,s=I.next();break;case 42:L=s.value,B.angleLength=L<B.startAngle?L+2*Math.PI-B.startAngle:L-B.startAngle,B.endAngle=L,s=I.next();break;default:N(B)}return B},x=function(){var d;for(d={type:s.value},s=I.next();"EOF"!==s&&0!==s.code;)switch(s.code){case 2:d.block=s.value,s=I.next();break;case 10:d.center=o();break;case 41:d.scale=D();break;case 50:d.deg=s.value,s=I.next();break;default:N(d)}return d},m=function(){var X;for(X={type:s.value},s=I.next();"EOF"!==s&&0!==s.code;)switch(s.code){case 2:X.block=s.value,s=I.next();break;case 10:X.center=o();break;case 41:X.scale=D();break;case 50:X.deg=s.value,s=I.next();break;default:N(X)}return X},r=function(){var d,x;for(d={type:s.value},s=I.next();"EOF"!==s&&0!==s.code;)switch(s.code){case 10:d.center=o();break;case 11:d.major=o();break;case 40:d.ratio=s.value,s=I.next();break;case 41:d.startAngle=s.value,s=I.next();break;case 42:x=s.value,d.angleLength=x<d.startAngle?x+2*Math.PI-d.startAngle:x-d.startAngle,d.endAngle=x,s=I.next();break;default:N(d)}return d},R=function(){var j;for(j={type:s.value},s=I.next();"EOF"!==s&&0!==s.code;)switch(s.code){case 10:j.startPoint=o();break;case 11:j.endPoint=o();break;case 40:j.textHeight=s.value,s=I.next();break;case 41:j.xScale=s.value,s=I.next();break;case 1:j.text=s.value,s=I.next();break;case 71:j.generationFlags=s.value,s=I.next();break;case 72:j.halign=s.value,s=I.next();break;case 73:j.valign=s.value,s=I.next();break;case 50:j.rotation=2*s.value*Math.PI/360,s=I.next();break;default:N(j)}return j},c=function(){var F;for(F={type:s.value},s=I.next();"EOF"!==s&&0!==s.code;)switch(s.code){case 2:F.block=s.value,s=I.next();break;case 10:F.anchorPoint=o();break;case 11:F.middleOfText=o();break;case 71:F.attachmentPoint=s.value,s=I.next();break;case 42:F.actualMeasurement=s.value,s=I.next();break;case 1:F.text=s.value,s=I.next();break;case 50:F.angle=s.value,s=I.next();break;default:N(F)}return F},p=function(){var G;for(G={type:s.value},G.points=[],s=I.next();"EOF"!==s&&0!==s.code;)switch(s.code){case 10:G.points[0]=o();break;case 11:G.points[1]=o();break;case 12:G.points[2]=o();break;case 13:G.points[3]=o();break;default:N(G)}return G},K=function(){var q;for(q={type:s.value},s=I.next();"EOF"!==s&&0!==s.code;)switch(s.code){case 10:q.position=o();break;case 39:q.thickness=s.value,s=I.next();break;case 100:if("AcDbPoint"==s.value){s=I.next();break}default:N(q)}return q},X=function(e){if(!e)throw new TypeError("entity cannot be undefined or null");e.handle||(e.handle=h++)};return y(),f},g.exports=C},{"./AutoCadColorIndex":1,"./DxfArrayScanner.js":2,loglevel:4}],4:[function(X,H){!function(M,E){"object"==typeof H&&H.exports&&"function"==typeof X?H.exports=E():"function"==typeof y&&"object"==typeof y.amd?y(E):M.log=E()}(this,function(){function c(b){return typeof console===T?!1:console[b]!==a?d(console,b):console.log!==a?d(console,"log"):w}function d(x,M){var X=x[M];if("function"==typeof X.bind)return X.bind(x);try{return Function.prototype.bind.call(X,x)}catch(j){return function(){return Function.prototype.apply.apply(X,[x,arguments])}}}function Y(c,W){return function(){typeof console!==T&&(C(W),Q[c].apply(Q,arguments))}}function C(k){for(var V=0;V<P.length;V++){var f=P[V];Q[f]=k>V?w:Q.methodFactory(f,k)}}function O(w){var x=(P[w]||"silent").toUpperCase();try{return t.localStorage.loglevel=x,void 0}catch(F){}try{t.document.cookie="loglevel="+x+";"}catch(F){}}function I(){var j;try{j=t.localStorage.loglevel}catch(b){}if(typeof j===T)try{j=/loglevel=([^;]+)/.exec(t.document.cookie)[1]}catch(b){}Q.levels[j]===a&&(j="WARN"),Q.setLevel(Q.levels[j],!1)}var Q={},w=function(){},T="undefined",P=["trace","debug","info","warn","error"];Q.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},Q.methodFactory=function(B,m){return c(B)||Y(B,m)},Q.setLevel=function(r,t){if("string"==typeof r&&Q.levels[r.toUpperCase()]!==a&&(r=Q.levels[r.toUpperCase()]),!("number"==typeof r&&r>=0&&r<=Q.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;return t!==!1&&O(r),C(r),typeof console===T&&r<Q.levels.SILENT?"No console available for logging":void 0},Q.enableAll=function(f){Q.setLevel(Q.levels.TRACE,f)},Q.disableAll=function(_){Q.setLevel(Q.levels.SILENT,_)};var s=typeof t!==T?t.log:a;return Q.noConflict=function(){return typeof t!==T&&t.log===Q&&(t.log=s),Q},I(),Q})},{}]},{},[3])(3)});var G=V.DxfViewer=function(L,M){var w=this;w._gv=L,w.$17w={},w.$16w(M)};G.prototype={},G.prototype.constructor=G;var m={LINE:["LINE","POLYLINE","LWPOLYLINE"],CIRCLE:["CIRCLE","ARC"],ELLIPSE:["ELLIPSE"],TEXT:["TEXT","MTEXT"],SOLID:["SOLID"],POINT:["POINT"]};d.defineProperties(G.prototype,{gv:{get:function(){return this._gv}},dxf:{get:function(){return this._dxf}},forceUpdate:{get:function(){return this.$1ew},set:function(j){var o=this;o.$1ew=j,o.$18w&&(clearTimeout(o.$18w),o.$18w=a),j&&o.gv&&o.gv.redraw()}},viewport:{get:function(){var e=this;if(e._dxf){var m=e.options;return{x:m.x===a?e.$19w.x:m.x,y:m.y===a?e.$19w.y:m.y}}},set:function(_){var b=this;b.options.x=_.x||0,b.options.y=_.y||0,b.forceUpdate=!0}},zoom:{get:function(){var a=this;return a._gv?a._gv.getZoom():a.options.zoom},set:function(m){var G=this;G._gv?G._gv.setZoom(m):G.options.zoom=m}}}),G.prototype.$16w=function(w){var Y=this,N=Y.options={};w=w||{},N.zoom=w.zoom||1,w.zoom&&Y._gv&&w.zoom!==Y._gv.getZoom()&&Y._gv.setZoom(N.zoom),N.baseCacheUpdateInterval=w.baseCacheUpdateInterval||0,N.extraCacheUpdateInterval=w.extraCacheUpdateInterval||500,N.lineWidth=w.lineWidth||1,N.linesBatchSize=w.linesBatchSize||1e5,N.font=w.font||"Courier",N.pointCircleSize=w.pointCircleSize||5,N.pointCenterSize=w.pointCenterSize||2,N.textMinFontSize=w.textMinFontSize||3,N.textScaleRatio=w.textScaleRatio||1},G.prototype.draw=function(a){var p=this;p._dxf&&p.$5w()&&(p._now=Date.now(),p._resolution=t.devicePixelRatio,p.$64w(),p.$6w(),p.$13w(a),p.$1ew=!1)},G.prototype.$64w=function(){var Z=this,y=Z.gv,r=y.getZoom(),O=y.tx(),n=y.ty(),m=Z.$17w,$=Z.options.extraCacheUpdateInterval;r!==m.zoom||O!==m.tx||n!==m.ty?(m.zoom=r,m.tx=O,m.ty=n,m.dirty=!0,m.dirtyTime=Z._now,Z.$18w&&clearTimeout(Z.$18w),0===$?Z.forceUpdate=!0:Z.$18w=setTimeout(function(){Z.forceUpdate=!0},Z.options.extraCacheUpdateInterval)):m.dirty=!1},G.prototype.$13w=function(B){var t=this;t.options,t.$17w;var F;F=t.$1aw;var Q=F.zoom;B.drawImage(t.$15w,-F.tx/Q,-F.ty/Q,F.width/Q,F.height/Q),t.$18w||(F=t.$1fw,B.drawImage(t.$1cw,-F.tx/Q,-F.ty/Q,F.width/Q,F.height/Q))},G.prototype.$12w=function(r){var C,X,l,P,b,T,N,Z,w,$,c,h,d,D,I,n,y,q,K=this,i=K._models;for(r.lineWidth=K.options.lineWidth,h=K.options.linesBatchSize,C=m.LINE,P=0,b=C.length;b>P;P++){X=C[P],l=i[X];for(Z in l){for(r.strokeStyle=Z,w=l[Z],r.beginPath(),c=0,T=0,N=w.length;N>T;T++)if($=w[T],(c++>=h||$.width)&&(r.stroke(),r.beginPath(),c=0),d=$.vertices,d&&d.length){for(y=K.$3w(d[0].x,1),q=K.$3w(d[0].y,2),r.moveTo(y,q),I=1,n=d.length;n>I;I++)D=d[I],r.lineTo(K.$3w(D.x,1),K.$3w(D.y,2));$.shape&&r.lineTo(y,q),$.width&&(r.lineWidth=Math.max(1,K.$3w($.width)),r.stroke(),r.beginPath(),r.lineWidth=1)}r.stroke()}}},G.prototype.$11w=function(b){var $,S,A,R,I,z,f,v,X,d,K,T,h,s=this,E=s._models;for(b.lineWidth=s.options.lineWidth,T=s.options.linesBatchSize,$=m.SOLID,R=0,I=$.length;I>R;R++){S=$[R],A=E[S];for(v in A){for(b.fillStyle=v,X=A[v],b.beginPath(),K=0,z=0,f=X.length;f>z;z++)d=X[z],K++>=T&&(b.fill(),b.beginPath(),K=0),h=d.points,b.moveTo(s.$3w(h[0].x,1),s.$3w(h[0].y,2)),b.lineTo(s.$3w(h[1].x,1),s.$3w(h[1].y,2)),b.lineTo(s.$3w(h[3].x,1),s.$3w(h[3].y,2)),b.lineTo(s.$3w(h[2].x,1),s.$3w(h[2].y,2)),b.lineTo(s.$3w(h[0].x,1),s.$3w(h[0].y,2));b.fill()}}},G.prototype.$10w=function(l){var v,p,W,t,r,n,g,h,Q,x,Y,j,B,X,y=this,z=y._models;for(l.lineWidth=y.options.lineWidth,v=m.POINT,B=y.$3w(y.options.pointCircleSize),X=y.$3w(y.options.pointCenterSize),t=0,r=v.length;r>t;t++){p=v[t],W=z[p];for(h in W)for(l.strokeStyle=h,l.fillStyle=h,Q=W[h],n=0,g=Q.length;g>n;n++)x=Q[n],Y=y.$3w(x.position.x,1),j=y.$3w(x.position.y,2),l.fillRect(Y,j,X,X),l.beginPath(),l.arc(Y,j,B,0,2*Math.PI,!0),l.stroke()}},G.prototype.$9w=function(e){var y,O,f,j,J,L,X,F,U,x,I,N,l,d,a,z,W,A,k,M,C=this,w=C._models;for(e.lineWidth=C.options.lineWidth,y=m.CIRCLE,j=0,J=y.length;J>j;j++){O=y[j],f=w[O];for(F in f)for(e.strokeStyle=F,U=f[F],L=0,X=U.length;X>L;L++)x=U[L],e.beginPath(),I=x.startAngle||0,N=x.angleLength||2*Math.PI,l=I+N,d=x.radius,a=x.addonAngle||0,z=C.$3w(x.center.x,1),W=C.$3w(x.center.y,2),M=x.xInvert^(x.extrusionDirection&&-1===x.extrusionDirection.z),k=x.yInvert,k||M?M&&k?(I=Math.PI+I,l=Math.PI+l,A=!1):(I=Math.PI*(M?1:2)-I,l=Math.PI*(M?1:2)-l,A=!0):A=!1,e.arc(z,W,C.$3w(d),I+a,l+a,A),e.stroke()}},G.prototype.$8w=function($){var c,r,P,e,g,O,Q,A,X,d,f,W,x,u,k,a,V,n,S,R,L,o,i,I,B,y=this,z=y._models;for(c=m.TEXT,k=y.options.font,i=y.options.textScaleRatio,I=y.options.textMinFontSize,e=0,g=c.length;g>e;e++){r=c[e],P=z[r];for(A in P)for($.fillStyle=A,X=P[A],O=0,Q=X.length;Q>O;O++)if(d=X[O],f=d.text,"MTEXT"===r?(W=y.$3w(d.height||12),x=y.$3w(d.position.x,1),u=y.$3w(d.position.y,2),S=d.angle?d.angle:d.directionX?Math.atan2(d.directionY,d.directionX):0,S+=d.addonAngle||0,o=1,n=d.attachmentPoint||1,a=n%3,V=Math.floor(n/3)):(W=y.$3w(d.textHeight||12),x=d.startPoint.x,u=d.startPoint.y,S=d.rotation||0,o=d.xScale||1,2===d.generationFlags?S=2*Math.PI-S:4===d.generationFlags?S=Math.PI-S:6===d.generationFlags&&(S=Math.PI+S),x=y.$3w(x,1),u=y.$3w(u,2),a=(d.halign||0)+1,3===d.valign?V=0:2===d.valign?(V=1,d.endPoint&&(x=(x+y.$3w(d.endPoint.x,1))/2)):V=2),!(I>W)){if(y._isAc2015&&(u-=W),$.save(),$.translate(x,u),$.rotate(S),$.scale(o,-1),"MTEXT"===r&&(1===V?$.translate(0,W/2):0===V&&$.translate(0,W)),$.textAlign=0===a?"right":2===a?"center":"left",$.font=W*i+"px "+k,"MTEXT"===r)for(f=f.replace(/\\{/g,"#@#"),f=f.replace(/\\}/g,"#@@"),f=f.replace(/({|})/g,""),f=f.replace(/#@#/g,"{"),f=f.replace(/#@@/g,"}"),f=f.replace(/\\[ACT]\d+;/g,""),(B=f.match(/\\f[^;]*;/))&&(f=f.replace(B[0],""),B=B[0].match(/\|p(\d+)/),B&&($.font=B[0]/10*W*i+"px "+k)),R=f.split("\\P"),L=0;L<R.length;L++)$.fillText(R[L],0,1.2*L*W);else $.fillText(f,0,0);$.restore()}}},G.prototype.$7w=function(r){var B,F,D,t,o,j,R,i,k,e,c,w,q,Y,M,X,K,y,d,h,a,U=this,p=U._models;for(B=m.ELLIPSE,t=0,o=B.length;o>t;t++){F=B[t],D=p[F];for(i in D)for(r.strokeStyle=i,k=D[i],j=0,R=k.length;R>j;j++)e=k[j],c=e.major,w=Math.atan2(c.y,c.x),q=Math.sqrt(c.x*c.x+c.y*c.y),Y=e.startAngle||0,M=e.angleLength||2*Math.PI,X=Y+M,K=U.$3w(e.center.x,1),y=U.$3w(e.center.y,2),d=e.xInvert,h=e.yInvert^(e.extrusionDirection&&-1===e.extrusionDirection.z),h||d?d&&h?(Y=Math.PI+Y,X=Math.PI+X,a=!1):(Y=Math.PI*(d?1:2)-Y,X=Math.PI*(d?1:2)-X,a=!0):a=!1,r.lineWidth=U.options.lineWidth,r.save(),r.translate(K,y),r.scale(e.ratio,1),r.rotate(w),r.beginPath(),r.arc(0,0,U.$3w(q),Y,X,a),r.strokeStyle=i,r.restore(),r.stroke()}},G.prototype.$6w=function(){var t,w,o,j,U,E,u,S,x=this,H=x.$17w,N=x._resolution;if(E=x.viewport,u=-E.x,S=-E.y,x._shiftX=x.viewport.x,x._shiftY=x.viewport.y,x._zoom=H.zoom,x.forceUpdate||x._now-(x._baseCacheUpdateTime||0)>x.options.baseCacheUpdateInterval){var p=x.$1bw,_=x.$15w;j=_.width,U=_.height,p.clearRect(0,0,j,U),x.$1aw={tx:t=H.tx,ty:w=H.ty,zoom:o=H.zoom,width:j/N,height:U/N},p.save(),p.setTransform(N,0,0,-N,N*t,N*w),x.$12w(p),x._baseCacheUpdateTime=x._now,p.restore()}if(x.forceUpdate){var r=x.$1dw,W=x.$1cw;j=W.width,U=W.height,r.clearRect(0,0,j,U),x.$1fw={tx:t=H.tx,ty:w=H.ty,zoom:o=H.zoom,width:j/N,height:U/N},r.save(),r.setTransform(N,0,0,-N,N*t,N*w),x.$10w(r),x.$9w(r),x.$11w(r),x.$7w(r),x.$8w(r),r.restore()}},G.prototype.$5w=function(){var y=this,b=y._gv.getCanvas();if(!b)return!1;var Y,s=y.$15w;return s?Y=y.$1cw:(s=y.$15w=document.createElement("canvas"),y.$1bw=s.getContext("2d"),Y=y.$1cw=document.createElement("canvas"),y.$1dw=Y.getContext("2d")),(s.style.width!==b.style.width||s.style.height!==b.style.height||s.width!==b.width||s.height!==b.height)&&(s.style.width=Y.style.width=b.style.width,s.style.height=Y.style.height=b.style.height,s.width=Y.width=b.width,s.height=Y.height=b.height,y.$1ew=!0),!0},G.prototype.$4w=function(R,B,X,r){var k=this,L=k.$2w(B,X);if(L){var o,x,S,h=B.type;if("DIMENSION"!==h&&"INSERT"!==h){(o=R[h])||(o=R[h]={}),(x=o[L])||(x=o[L]=[]);var A=B.extrusionDirection&&-1===B.extrusionDirection.z&&["POINT","LINE","POLYLINE","LWPOLYLINE","ELLIPSE"].indexOf(h)<0;if(r||A){r||(r={a:1,b:0,c:0,d:1,tx:0,ty:0});var t={};for(var Z in B)t[Z]=B[Z];t.radius&&(t.radius*=Math.sqrt(r.a*r.a+r.b*r.b)),t.textHeight&&(t.textHeight*=Math.sqrt(r.a*r.a+r.b*r.b));var f=A?-1:1,C=function(v,D){if(v){var V=v.x,P=v.y;return{x:V*f*D.a+P*D.c+D.tx,y:V*f*D.b+P*D.d+D.ty}}};if(t.position=C(t.position,r),t.startPoint=C(t.startPoint,r),t.center=C(t.center,r),"ELLIPSE"===h){var O;O=C({x:B.major.x+B.center.x,y:B.major.y+B.center.y},r),t.major={x:O.x-t.center.x,y:O.y-t.center.y},B.extrusionDirection&&-1===B.extrusionDirection.z&&(t.major.x*=-1)}var W;t.vertices&&(W=[],t.vertices.forEach(function(y){W.push(C(y,r))}),t.vertices=W),t.points&&(W=[],t.points.forEach(function(K){W.push(C(K,r))}),t.points=W);var e=Math.atan2(r.b,r.a),F=Math.cos(e);t.yInvert=r.d*F<0,t.xInvert=r.a*F<0,0!==e&&(t.addonAngle=e),x.push(t)}else x.push(B)}else{if(!B.block)return;var z=X.blocks[B.block];if(!z||!z.entities)return;var l=r;if("INSERT"===h){var w=B.scale?B.scale.x:1,V=B.scale?B.scale.y:1,Y=0,m=1,p=0;if(B.deg&&(Y=B.deg*Math.PI/180,m=Math.cos(Y),p=Math.sin(Y)),r){var i=w*m,G=w*p,b=-V*p,n=V*m,$=B.center.x,_=B.center.y;l={a:r.a*i+r.c*G,b:r.b*i+r.d*G,c:r.a*b+r.c*n,d:r.b*b+r.d*n,tx:r.a*$+r.c*_+r.tx,ty:r.b*$+r.d*_+r.ty}}else l={a:w*m,b:w*p,c:-V*p,d:V*m,tx:B.center.x,ty:B.center.y}}for(S=0;S<z.entities.length;S++)k.$4w(R,z.entities[S],X,l)}}},G.prototype.parseFile=function(o){var a=this,M=new DxfParser,I=M.parseSync(o);a._dxf=I,a.$19w=a.$1w(I),a._isAc2015="AC1015"===I.header.$ACADVER;var w=a.gv?a.gv.getWidth():1e3,A=a.gv?a.gv.getZoom():1;a._dxfSelfZoom=w/a.$19w.width/A,a.$19w.x-=a.$19w.width/2,a.$19w.y+=a.$19w.height/2;var _,Z,y,i=a._models={};for(_=0,Z=I.entities.length;Z>_;_++)y=I.entities[_],a.$4w(i,y,I);console.log("parse finished"),a.forceUpdate=!0},G.prototype.$3w=function(R,v){var r=1===v?this._shiftX:2===v?this._shiftY:0,Z=this._zoom*this._dxfSelfZoom;return(R-r)*Z},G.prototype.$2w=function(h,X){var c;if(X.tables&&X.tables.layer&&(c=X.tables.layer.layers[h.layer]),!c||c.visible){var J;return h.color!==a?(J=h.color,0===J&&(J=16777215)):c&&(J=c.color),J||(J=16777215),"#"+((1<<24)+J).toString(16).slice(1)}},G.prototype.$1w=function(v){var O,t,A,B,b,M,R,c,w,m,j,k,z=0;
if(!O&&v.tables&&v.tables.viewPort){m=v.tables.viewPort.viewPorts;for(w in m)if(j=m[w],k=j.viewDirectionFromTarget,j.center&&(j.renderMode===z||k&&0===k.x&&0===k.y&&1===k.z)){A=j.center,B=j.upperRightCorner,b=j.lowerLeftCorner,O={x:B.x,y:B.y},t={x:b.x,y:b.y},M=j.viewWidth||0,R=j.viewHeight||0,j.viewTarget&&(A={x:A.x+j.viewTarget.x,y:A.y+j.viewTarget.y});break}}return!O&&v.header&&(c=v.header,c.$EXTMIN&&c.$EXTMAX&&(O=c.$EXTMAX,t=c.$EXTMIN)),M=Math.max(M,O.x-t.x),R=Math.max(R,O.y-t.y),A=A||{x:M/2+t.x,y:R/2+t.y},{width:M,height:R,x:A.x,y:A.y}};var R=V.VirtualCanvas=function(T){this.view=T};R.prototype={},R.prototype.constructor=R,R.prototype.getCanvas=function(){return this.view._canvas},R.prototype.redraw=function(){var e=this.view;e.redraw(),e.validateImpl()},R.prototype.getView=function(){return this.view};var g=V.Context2dProxy=function($,X){var D=this;D.ctx=$,D.writer=X,D._currentContext={a:1,b:0,c:0,d:1,tx:0,ty:0},D.$3fw(),D._contextStack=[],D._textScale=.8,D._forceSplitEllipse=!0,D._ellipseSegments=32,D._styleToColorCache={};for(var f in CanvasRenderingContext2D.prototype)if("webkitImageSmoothingEnabled"!==f){var P=$[f];if("function"==typeof P)D[f]=function(o,C){return function(){var E=C.apply($,arguments);return D.$20w(o,arguments),E}}(f,P);else{var t=d.getOwnPropertyDescriptor(CanvasRenderingContext2D.prototype,f);if(!t.get&&!t.set)continue;!function(O){d.defineProperty(D,O,{get:function(){return $[O]},set:function(d){$[O]=d,D.$21w(O,d)}})}(f)}}};g.prototype={},g.prototype.constructor=g,g.prototype.$20w=function(b,p){var V=this;switch(b){case"save":V.$22w();break;case"restore":V.$23w();break;case"translate":V.$24w.apply(V,p);break;case"rotate":V.$26w.apply(V,p);break;case"scale":V.$25w.apply(V,p);break;case"setTransform":V.$27w.apply(V,p);break;case"transform":V.$28w.apply(V,p);break;case"fillText":case"strokeText":V.$30w(p[0],p[1],p[2],"fillText"===b);break;case"rect":V.$31w.apply(V,p);break;case"fill":V.$32w();break;case"stroke":V.$3ew();break;case"moveTo":V.$34w(p[0],p[1]);break;case"lineTo":V.$35w(p[0],p[1]);break;case"beginPath":V.$39w();break;case"closePath":V.$3aw();break;case"arc":V.$36w.apply(V,p);break;case"ellipse":V.$37w.apply(V,p);break;case"quadraticCurveTo":V.$38w([{x:p[0],y:p[1]}],p[2],p[3]);break;case"bezierCurveTo":V.$38w([{x:p[0],y:p[1]},{x:p[2],y:p[3]}],p[4],p[5])}},g.prototype.$21w=function(){},g.prototype.$22w=function(){var F=this,K={},$=F._currentContext;for(var W in $)K[W]=$[W];F._contextStack.push(K)},g.prototype.$23w=function(){var S=this;S._currentContext=S._contextStack.pop(),S.$29w()},g.prototype.$24w=function(k,X){if(0!==k||0!==X){var f=this,z=f._currentContext,w=z.a,c=z.b,e=z.c,m=z.d;z.tx=w*k+e*X+z.tx,z.ty=c*k+m*X+z.ty,f.$29w()}},g.prototype.$25w=function(f,y){if(1!==f||1!==y){var p=this,g=p._currentContext;g.a*=f,g.b*=f,g.c*=y,g.d*=y,p.$29w()}},g.prototype.$26w=function(N){var t=Math.cos(N),n=Math.sin(N),w=this,h=w._currentContext,u=h.a,H=h.b,j=h.c,b=h.d;h.a=u*t+j*n,h.b=H*t+b*n,h.c=-u*n+j*t,h.d=-H*n+b*t,w.$29w()},g.prototype.$27w=function(g,q,y,T,D,e){var N=this,i=N._currentContext;i.a=g,i.b=q,i.c=y,i.d=T,i.tx=D,i.ty=e,N.$29w()},g.prototype.$28w=function(f,F,o,R,K,Q){var C=this,v=C._currentContext,_=v.a,u=v.b,c=v.c,W=v.d;v.a=_*f+c*F,v.b=u*f+W*F,v.c=_*o+c*R,v.d=u*o+W*R,v.tx=_*K+c*Q+v.tx,v.ty=u*K+W*Q+v.ty,C.$29w()},g.prototype.$29w=function(){var Z=this;Z.writer.$40w(Z._currentContext)},g.prototype.$2aw=function(){var b=this._currentContext;return 0===b.b&&0===b.c?0:Math.atan2(b.b,b.a)},g.prototype.$2bw=function(){var x=this._currentContext;return{x:Math.sqrt(x.a*x.a+x.c*x.c),y:Math.sqrt(x.b*x.b+x.d*x.d)}},g.prototype.$2cw=function(g){var Q=this._currentContext,o=g.x,p=g.y;return{x:Q.a*o+Q.c*p+Q.tx,y:Q.b*o+Q.d*p+Q.ty}},g.prototype.$2dw=function(f){for(var A=this,v=new Array(f.length),J=0,N=f.length;N>J;J++)v[J]=A.$2cw(f[J]);return v},g.prototype.$2ew=function(W){var s=this._currentContext;return W*Math.sqrt(s.a*s.a+s.b*s.b)},g.prototype._equal=function(J,y){var b=J-y;return b>-1e-5&&1e-5>b},g.cadColorConst=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215],g.prototype.$2fw=function(j){var X=this,h=X._styleToColorCache[j];if(h!==a)return h;for(var T,K,q,O="string"==typeof j?parseInt("0x"+j.slice(1)):7,w=g.cadColorConst,$=1e4,L=0,A=w.length;A>L;L++)T=w[L],K=Math.abs((T>>16)-(O>>16))+Math.abs((255&T>>8)-(255&O>>8))+Math.abs((255&T)-(255&O)),$>K&&($=K,q=L);return X._styleToColorCache[j]=q,q},g.prototype.$30w=function(m,O,U,b){var M,N,A=this,x=A.ctx,Z=x.font,d=b?x.fillStyle:x.strokeStyle,r=x.textAlign,k=x.textBaseline;N=x.measureText("e").width,O+=N/2,"left"!==r&&(M=x.measureText(m).width,"center"===r?O-=M/2:"right"===r&&(O-=M)),"middle"===k&&(U+=N/2);var v,_=8;"string"==typeof Z&&(v=Z.match(/^\d+/),v&&(_=v[0]));var R=A.$2aw(),P=A.$2fw(d);m=(""+m).split("\n").join(","),A.writer.$49w(m,A.$2cw({x:O,y:U}),A.$2ew(A._textScale*_),R,P)},g.prototype.$31w=function(B,A,x,d){var g=this,Q=g.$2dw([{x:B,y:A},{x:B+x,y:A},{x:B+x,y:A+d},{x:B,y:A+d}]);g.$3bw(Q[0]),g._path.push({type:"rect",points:Q})},g.prototype.$32w=function(){var e,z=this,U=z._path;if(U.length){var c=U.length;"closePath"!==U[U.length-1].subType&&z.$3aw();var b,L,K,s=z.$2fw(z.ctx.fillStyle),Y=!0;for(K=0;c>K;K++){if(b=U[K].type,"moveTo"!==b&&"rect"!==b){Y=!1;break}if("rect"===b){if(L){Y=!1;break}L=K}}Y?(e=U[L],z.writer.$4aw(e.points,s)):(z._filling=!0,z._hatchContext={startId:z.writer.entities.length,color:s},z.$3ew(),z.$33w(),z._filling=a)}},g.prototype.$33w=function(){var m=this,W=m._hatchContext;if(W){var E=W.startId,n=m.writer.entities,y=n.length,d=y-E;if(d){var O;for(O=E;y>O;O++)n[O].invisible=!0;m.writer.$45w(d,W.color),W.startId=n.length}}},g.prototype.$34w=function(R,$){var n=this,b=n.$2cw({x:R,y:$});n._headPoint=b,n._path.push({type:"moveTo",x:b.x,y:b.y})},g.prototype.$35w=function(b,T){var x=this,C=x.$2cw({x:b,y:T});x._path.push({type:"lineTo",x:C.x,y:C.y})},g.prototype.$36w=function(p,t,f,Q,j,U){this.$37w(p,t,f,f,0,Q,j,U)},g.prototype.$37w=function(y,Z,A,R,G,c,V,b){var K,a,x,m,q,e,v,S,L,$,u,Y,o,T,r,E=this,I=E.$2bw(),p=E.$2cw({x:y,y:Z});e=Math.sin(G),v=Math.cos(G);var N=function(m){var p=A*Math.cos(-m),o=R*Math.sin(-m);return E.$2cw({x:y+(v*p-e*o),y:Z+(e*p+v*o)})},_=[],F=V;if(b)for(;F>=c;)F-=2*Math.PI;else for(;c>=F;)F+=2*Math.PI;for($=(F-c)/E._ellipseSegments,Y=0;Y<=E._ellipseSegments;Y++)u=c+$*Y,o=N(-u),_.push(o);if(m=_[0],q=_[_.length-1],K=E.$3cw(c,V,b),c=K.start,V=K.end,E.$3bw(m),S=E._equal(I.x,I.y),L=E._equal(A,R),!E._forceSplitEllipse&&S&&L&&E._equal(Math.abs(c-V),2*Math.PI))E._path.push({type:"circle",x:p.x,y:p.y,end:q,keyPoints:_,radius:A*I.x});else if(!E._forceSplitEllipse&&S&&L)a=E.$2aw(),x=Math.cos(a),T=E._currentContext.a*x<0,r=E._currentContext.d*x<0,K=E.$3dw(c,V,T,r),c=K.start-a,V=K.end-a,E._path.push({type:"arc",x:p.x,y:p.y,end:q,radius:A*I.x,startAngle:c,endAngle:V,keyPoints:_});else{if(E._forceSplitEllipse||!S){for(Y=1;Y<=E._ellipseSegments;Y++)o=_[Y],E._path.push({type:"lineTo",x:o.x,y:o.y});return}var t,w,U=N(0),O=N(Math.PI/2),j=function(z,q){var w=z.x-q.x,b=z.y-q.y;return Math.sqrt(w*w+b*b)},H=j(U,p),C=j(O,p);C>H?(w=H,H=C,C=w,t=O):t=U,a=E.$2aw(),x=Math.cos(a),T=E._currentContext.a*x<0,r=E._currentContext.d*x<0,K=E.$3dw(c-Math.PI/2,V-Math.PI/2,T,r),c=K.start,V=K.end,E._path.push({type:"ellipse",x:p.x,y:p.y,end:q,major:{x:t.x-p.x,y:t.y-p.y},ratio:C/H,startAngle:c,endAngle:V,keyPoints:_})}},g.prototype.$38w=function(S,A,B){var M=this,L=M.$2cw({x:A,y:B});this._path.push({type:"bezier",x:L.x,y:L.y,ctrl:M.$2dw(S)})},g.prototype.$39w=function(){this.$3fw()},g.prototype.$3aw=function(){var Q=this,A=Q._headPoint;A&&(Q._path.push({type:"lineTo",x:A.x,y:A.y,subType:"closePath"}),Q._headPoint=null,Q._lastPoint=null)},g.prototype.$3bw=function(w){var J=this;return J._headPoint?(J._path.push({type:"lineTo",x:w.x,y:w.y,subType:"connect"}),void 0):(J._headPoint=w,J._path.push({type:"moveTo",x:w.x,y:w.y}),void 0)},g.prototype.$3cw=function(T,a,e){T=-T,a=-a;var Y,S=T%(2*Math.PI),s=a%(2*Math.PI);for(0>S&&(S+=2*Math.PI),0>s&&(s+=2*Math.PI),e||(Y=S,S=s,s=Y);S>=s;)s+=2*Math.PI;return{start:S,end:s}},g.prototype.$3dw=function(P,t,Z,D){var i;return(D||Z)&&(Z&&D?(P=Math.PI+P,t=Math.PI+t):(i=Math.PI*(Z?1:2)-t,t=Math.PI*(Z?1:2)-P,P=i)),{start:P,end:t}},g.prototype.$3ew=function(){var d=this,b=d._path;if(b.length){var y,R,a,q,P,H,T=[],N=d.$2fw(d.ctx.strokeStyle),s=function(){T.length>1&&d.writer.$48w(T,N),T=[]};for(R=0,y=b.length;y>R;R++){if(a=b[R],d._filling&&["circle","arc","ellipse"].indexOf(a.type)>=0){if(H=a.keyPoints,!d._lastPoint)break;T.length||T.push(d._lastPoint),T=T.concat(H),d._lastPoint=a.end;break}switch(a.type){case"moveTo":s(),d._filling&&d.$33w(),d._lastPoint={x:a.x,y:a.y},T.push(d._lastPoint);break;case"lineTo":if(!d._lastPoint)break;T.length||T.push(d._lastPoint),T.push({x:a.x,y:a.y}),d._lastPoint={x:a.x,y:a.y};break;case"rect":s(),P=[].concat(a.points,a.points[0]),d.writer.$48w(P,N),d._lastPoint=a.points[0];break;case"circle":s(),d.writer.$43w(a.x,a.y,a.radius,N),d._lastPoint=a.end;break;case"arc":s(),d.writer.$44w(a.x,a.y,a.radius,a.startAngle,a.endAngle,N),d._lastPoint=a.end;break;case"ellipse":s(),d.writer.$46w(a.x,a.y,a.major,a.ratio,a.startAngle,a.endAngle,N),d._lastPoint=a.end;break;case"bezier":if(s(),q=d._lastPoint,!q)break;d.writer.$47w(q.x,q.y,a.x,a.y,a.ctrl,N),d._lastPoint={x:a.x,y:a.y};break;default:T.push({x:a.x,y:a.y})}}s()}},g.prototype.$3fw=function(){var $=this;$._path=[],$._lastPoint=null,$._headPoint=null};var S=V.DxfWriter=function(S){var n=this;n.version=S||"AC1027",n._lineContents=[],n._entityList=[]};S.prototype={},S.prototype.constructor=S,S.version="0.9.2",d.defineProperties(S.prototype,{entities:{get:function(){return this._entityList}}}),S.prototype.snapshotView=function(e){this.snapshotVCanvas(new R(e))},S.prototype.snapshotVCanvas=function(S){var k=this;k._lineContents=[],k._viewport={left:1/0,up:-1/0,right:-1/0,down:1/0},k._matrix={a:1,b:0,c:0,d:-1,tx:0,ty:0};var e=S.getCanvas(),P=S.getView()._42,U=e.getContext;e.getContext=function(D){return function(V){var e=D.apply(this,arguments);return"2d"===V&&(e=k.$41w(e)),e}}(e.getContext),S.getView()._42=function(x){return P.call(S.getView(),x)},S.redraw(),S.getView()._42=P,e.getContext=U},S.prototype.$40w=function(){},S.prototype.$41w=function(m){return new g(m,this)},S.prototype.write=function(){var p=this;return p.$4cw(),p.$56w(),p.$57w(),p.$59w(),p.$58w(),p.$67w(),p._lineContents.join("\n")},S.prototype.$42w=function(j,A,v,a){var g=this;g.$4bw("LINE",{p1:j=g.$2cw(j),p2:A=g.$2cw(A),color:v||7,layer:a||0}),g.$64w([j,A])},S.prototype.$43w=function(j,Y,D,H){var c=this,T=c.$2ew(D),t=c.$2cw({x:j,y:Y});c.$4bw("CIRCLE",{center:t,radius:T,color:H}),c.$64w([{x:t.x-T,y:t.y-T},{x:t.x+T,y:t.y+T}])},S.prototype.$44w=function(f,F,d,B,x,v){var u=this,d=u.$2ew(d),T=u.$2cw({x:f,y:F});u.$4bw("ARC",{center:T,radius:d,color:v,startAngle:B,endAngle:x}),u.$64w([{x:T.x-d,y:T.y-d},{x:T.x+d,y:T.y+d}])},S.prototype.$45w=function(K,v){this.$4bw("HATCH",{color:v||7,edgeNum:K})},S.prototype.$46w=function(x,h,o,$,m,X,B){var P=this,b=P.$2cw({x:x,y:h}),o=P.$2cw(o);P.$4bw("ELLIPSE",{center:b,majorAxis:o,axisRatio:$,color:B,startAngle:m,endAngle:X}),P.$64w([{x:b.x-o.x,y:b.y-o.y},{x:b.x+o.x,y:b.y+o.y}])},S.prototype.$47w=function(i,Y,f,t,p,M){var U=this,j=U.$2cw({x:i,y:Y}),l=U.$2cw({x:f,y:t}),K=U.$2dw(p);U.$4bw("SPLINE",{source:j,dest:l,ctrl:K,color:M||7}),U.$64w([j,l]),U.$64w(p)},S.prototype.$48w=function(z,D,d){var B=this;B.$4bw("LWPOLYLINE",{points:z=B.$2dw(z),color:D||7,layer:d||0}),B.$64w(z)},S.prototype.$49w=function(T,Y,D,_,N){var R=this;R.$4bw("TEXT",{text:T,pos:Y=R.$2cw(Y),size:R.$2ew(D),degree:R.$8bw(_||0),color:N||7}),R.$64w([Y])},S.prototype.$4aw=function(Q,f){var r=this,H=[Q[0],Q[1],Q[3],Q[2]];r.$4bw("SOLID",{points:H=r.$2dw(H),color:f||7}),r.$64w(H)},S.prototype.$4bw=function(c,u){u.type=c,this._entityList.push(u)},S.prototype.$4cw=function(){var F=this;F.$76w("HT Dxf Writer. Version: "+S.version),F.$72w(),F.$7aw(9,"$ACADVER"),F.$7aw(1,F.version),F.$7aw(9,"$INSBASE"),F.$79w(10,0),F.$79w(20,0),F.$79w(30,0),F.$7aw(9,"$EXTMIN"),F.$79w(10,0),F.$79w(20,0),F.$79w(30,0),F.$7aw(9,"$EXTMAX"),F.$79w(10,1e3),F.$79w(20,1e3),F.$79w(30,0),F.$7aw(9,"$HANDSEED"),F._dxfHandleValue=672,F.$6dw(),F.$74w()},S.prototype.$4dw=function(){var F=this,z=F._viewport;F.$75w("VPORT",8,1),F.$7aw(0,"VPORT"),F.$77w(5,94),F.$77w(330,8),F.$7aw(100,"AcDbSymbolTableRecord"),F.$7aw(100,"AcDbViewportTableRecord"),F.$7aw(2,"*Active"),F.$77w(70,0),F.$79w(10,0),F.$79w(20,0),F.$79w(11,1),F.$79w(21,1),F.$79w(12,(z.left+z.right)/2),F.$79w(22,(z.down+z.up)/2),F.$79w(13,0),F.$79w(23,0),F.$79w(14,1),F.$79w(24,1),F.$79w(15,0),F.$79w(25,0),F.$79w(16,0),F.$79w(26,0),F.$79w(36,1),F.$79w(17,0),F.$79w(27,0),F.$79w(37,0),F.$79w(40,z.up-z.down),F.$79w(41,(z.up-z.down)/(z.right-z.left)),F.$79w(42,50),F.$79w(43,0),F.$79w(44,0),F.$79w(50,0),F.$79w(51,0),F.$77w(71,0),F.$77w(72,1e3),F.$77w(73,1),F.$77w(74,3),F.$77w(75,0),F.$77w(76,0),F.$77w(77,0),F.$77w(78,0),F.$71w()},S.prototype.$4ew=function(){var g=this;g.$75w("LTYPE",5,1),g.$73w(14,"ByBlock"),g.$73w(15,"ByLayer"),g.$73w(16,"Continuous","Solid line"),g.$71w()},S.prototype.$4fw=function(){var E=this;E.$75w("LAYER",2,1),E.$7aw(0,"LAYER"),E.$77w(5,10),E.$77w(330,2),E.$7aw(100,"AcDbSymbolTableRecord"),E.$7aw(100,"AcDbLayerTableRecord"),E.$77w(2,0),E.$77w(70,0),E.$77w(62,7),E.$7aw(6,"Continuous"),E.$7aw(390,"F"),E.$71w()},S.prototype.$50w=function(){var Q=this;Q.$75w("STYLE",3,2),Q.$69w("Standard","11"),Q.$69w("Annotative","DC"),Q.$71w()},S.prototype.$51w=function(){var C=this;C.$75w("UCS",7,0),C.$71w()},S.prototype.$52w=function(){var k=this;k.$75w("VIEW",6,1),k.$71w()},S.prototype.$53w=function(){var h=this;h.$75w("APPID",9,7),h.$6aw("ACAD","12"),h.$6aw("AcadAnnoPO","DD"),h.$6aw("AcadAnnotative","DE"),h.$6aw("ACAD_DSTYLE_DIMJAG","DF"),h.$6aw("ACAD_DSTYLE_DIMTALN","E0"),h.$6aw("ACAD_MLEADERVER","107"),h.$6aw("ACAD_NAV_VCDISPLAY","1A6"),h.$71w()},S.prototype.$54w=function(){var N=this;N.$75w("DIMSTYLE","A",2),N.$7aw(100,"AcDbDimStyleTable"),N.$77w(71,2),N.$7aw(340,"27"),N.$7aw(340,"E1"),N.$71w()},S.prototype.$55w=function(){var i=this;i.$75w("BLOCK_RECORD",1,1),i.$6bw("*Model_Space","1F","22"),i.$6bw("*Paper_Space","58","59"),i.$6bw("*Paper_Space0","5D","5E"),i.$71w()},S.prototype.$56w=function(){var E=this;E.$70w(),E.$4dw(),E.$4ew(),E.$4fw(),E.$50w(),E.$52w(),E.$51w(),E.$53w(),E.$54w(),E.$55w(),E.$74w()},S.prototype.$57w=function(){var E=this;E.$68w("BLOCKS"),E.$6cw("*Model_Space",32,31),E.$6cw("*Paper_Space",90,88,!0),E.$6cw("*Paper_Space0",95,93,!0),E.$74w()},S.prototype.$58w=function(){var b=this;b.$68w("OBJECTS"),b.$6ew("C","0",0,1),b.$6fw(350,{ACAD_CIP_PREVIOUS_PRODUCT_INFO:"1A5",ACAD_COLOR:"73",ACAD_DETAILVIEWSTYLE:"1AB",ACAD_GROUP:"D",ACAD_LAYOUT:"1A",ACAD_MATERIAL:"72",ACAD_MLEADERSTYLE:"D7",ACAD_MLINESTYLE:"17",ACAD_PLOTSETTINGS:"19",ACAD_PLOTSTYLENAME:"E",ACAD_SCALELIST:"B6",ACAD_SECTIONVIEWSTYLE:"1A8",ACAD_TABLESTYLE:"86",ACAD_VISUALSTYLE:"99",ACDB_RECOMPOSE_DATA:"2A6",AcDbVariableDictionary:"66"}),b.$6ew("18E","2",1,1),b.$6fw(360,{ACAD_LAYERSTATES:"18F"}),b.$6ew("15D","1F",1,1),b.$6ew("D","C",0,1),b.$6ew("1A","C",0,1),b.$6fw(350,{Layout1:"59",Layout2:"5E",Model:"22"}),b.$6ew("D7","C",0,1),b.$6fw(350,{Annotative:"E5",Standard:"D8"}),b.$6ew("17","C",0,1),b.$6fw(350,{Standard:18}),b.$6ew("19","C",0,1),b.$74w()},S.prototype.$59w=function(){var i=this;i.$68w("ENTITIES"),i._dxfHandleValue=720;var Y,Q,N,D=i._entityList;for(Y in D)if(N=D[Y],N.id=Y,!N.invisible)switch(Q=N.type,i.$7aw(0,Q),i.$6dw(),i.$78w(330,31),i.$7aw(100,"AcDbEntity"),i.$77w(62,N.color||7),i.$77w(8,N.layer||0),Q){case"LINE":i.$5aw(N);break;case"TEXT":i.$65w(N);break;case"SOLID":i.$66w(N);break;case"LWPOLYLINE":i.$63w(N);break;case"CIRCLE":i.$5bw(N);break;case"ARC":i.$5cw(N);break;case"ELLIPSE":i.$5dw(N);break;case"SPLINE":i.$5ew(N);break;case"HATCH":i.$5fw(N)}i.$74w()},S.prototype.$5aw=function(B){var Z=this,M=B.p1,b=B.p2;Z.$7aw(100,"AcDbLine"),Z.$7cw(10,M),Z.$7cw(11,b)},S.prototype.$5bw=function(q){var H=this;H.$7aw(100,"AcDbCircle"),H.$7cw(10,q.center),H.$79w(40,q.radius)},S.prototype.$5cw=function(j){var x=this;x.$7aw(100,"AcDbCircle"),x.$7cw(10,j.center),x.$79w(40,j.radius),x.$7aw(100,"AcDbArc"),x.$79w(50,x.$8bw(j.startAngle)),x.$79w(51,x.$8bw(j.endAngle))},S.prototype.$5dw=function(g){var Y=this;Y.$7aw(100,"AcDbEllipse"),Y.$7cw(10,g.center),Y.$7cw(11,g.majorAxis),Y.$79w(40,g.axisRatio),Y.$79w(41,g.startAngle),Y.$79w(42,g.endAngle)},S.prototype.$5ew=function(v){var c=this,N=[v.source];N=N.concat(v.ctrl,[v.dest]);var R,C=N.length;for(c.$7aw(6,"Continuous"),c.$7aw(100,"AcDbSpline"),c.$77w(70,8),c.$77w(71,C-1),c.$77w(72,2*C),c.$77w(73,C),c.$77w(74,0),c.$7aw(42,"0.000000001"),c.$7aw(43,"0.0000000001"),R=0;C>R;R++)c.$7aw(40,"0.0");for(R=0;C>R;R++)c.$7aw(40,"1.0");for(R=0;C>R;R++){var Y=N[R];c.$79w(10,Y.x),c.$79w(20,Y.y),c.$79w(30,0)}},S.prototype.$5fw=function(P){var F=this;F.$7aw(6,"Continuous"),F.$7aw(100,"AcDbHatch"),F.$7cw(10,{x:0,y:0,z:0}),F.$7cw(210,{x:0,y:0,z:1}),F.$7aw(2,"SOLID"),F.$77w(70,1),F.$77w(71,0),F.$60w(P),F.$62w(P)},S.prototype.$60w=function(f){var H=this;H.$77w(91,1);var q,J,W,A,w=H._entityList;for(W=0,J=5,q=f.id-f.edgeNum;q<f.id;q++)switch(A=w[q],A.type){case"ARC":case"CIRCLE":case"ELLIPSE":case"LINE":case"SPLINE":W+=1;break;case"LWPOLYLINE":W+=A.points.length-1}for(H.$77w(92,J),2!==(2&f.pathTypeFlag)&&H.$77w(93,W),q=f.id-f.edgeNum;q<f.id;q++)H.$61w(w[q]);H.$77w(97,0)},S.prototype.$61w=function(o){var L,B,v,$=this;switch(o.type){case"LWPOLYLINE":for(B=o.points.length,L=0;B-1>L;L++)$.$77w(72,1),$.$7cw(10,o.points[L]),$.$7cw(11,o.points[L+1]);break;case"ARC":$.$77w(72,2),$.$7cw(10,o.center),$.$79w(40,o.radius),$.$79w(50,$.$8bw(o.startAngle)),$.$79w(51,$.$8bw(o.endAngle));break;case"CIRCLE":$.$77w(72,2),$.$7cw(10,o.center),$.$7cw(40,o.radius),$.$79w(50,0),$.$79w(51,360);break;case"ELLIPSE":$.$77w(72,3),$.$7cw(10,o.center),$.$7cw(11,o.majorAxis),$.$79w(40,o.axisRatio),$.$79w(50,o.startAngle),$.$79w(51,o.endAngle);break;case"SPLINE":for($.$77w(72,4),v=[o.source],v=v.concat(o.ctrl,[o.dest]),B=v.length,$.$77w(94,B-1),$.$77w(73,0),$.$77w(74,0),$.$77w(95,2*B),$.$77w(96,B),L=0;B>L;L++)$.$7aw(40,"0.0");for(L=0;B>L;L++)$.$7aw(40,"1.0");for(L=0;B>L;L++){var X=v[L];$.$79w(10,X.x),$.$79w(20,X.y)}$.$77w(97,0)}},S.prototype.$62w=function(){var B=this;B.$77w(75,1),B.$77w(76,1),B.$79w(47,0),B.$77w(98,1),B.$79w(10,0),B.$79w(20,0),B.$77w(450,0),B.$77w(451,0),B.$79w(460,0),B.$79w(461,0),B.$77w(452,0),B.$79w(462,1),B.$77w(453,0),B.$7aw(470,"LINEAR")},S.prototype.$63w=function(f){var h,t=this,Q=f.points.length;for(t.$7aw(6,"Continuous"),t.$7aw(100,"AcDbPolyline"),t.$77w(90,Q),t.$77w(70,0),t.$79w(43,0),h=0;Q>h;h++)t.$7cw(10,f.points[h])},S.prototype.$64w=function(q){var S,N,G,g=this,L=g._viewport;for(N=0,G=q.length;G>N;N++)S=q[N],S.x<L.left&&(L.left=S.x),S.x>L.right&&(L.right=S.x),S.y<L.down&&(L.down=S.y),S.y>L.up&&(L.up=S.y)},S.prototype.$65w=function(I){var q=this,z=I.text,_=I.pos,S=I.size,i=I.degree;I.color,q.$7aw(100,"AcDbText"),q.$7cw(10,_),q.$79w(40,S),q.$7aw(1,z),q.$79w(50,360-i),q.$7aw(100,"AcDbText")},S.prototype.$66w=function(S){var k=this;k.$7aw(100,"AcDbTrace"),k.$7cw(10,S.points[0]),k.$7cw(11,S.points[1]),k.$7cw(12,S.points[2]),k.$7cw(13,S.points[3])},S.prototype.$67w=function(){this.$7aw(0,"EOF")},S.prototype.$68w=function(N){var P=this;P.$7aw(0,"SECTION"),P.$7aw(2,N)},S.prototype.$69w=function(K,s){var E=this;E.$7aw(0,"STYLE"),E.$7aw(5,s),E.$7aw(330,3),E.$7aw(100,"AcDbSymbolTableRecord"),E.$7aw(100,"AcDbTextStyleTableRecord"),E.$7aw(2,K),E.$77w(70,0),E.$79w(40,0),E.$79w(41,1),E.$79w(50,0),E.$77w(71,0),E.$79w(42,.2),E.$7aw(3,"Arial.ttf"),E.$7aw(4,""),E.$7aw(1001,"ACAD"),E.$7aw(1e3,"Arial"),E.$77w(1071,34)},S.prototype.$6aw=function(s,Q){var K=this;K.$7aw(0,"APPID"),K.$7aw(5,Q),K.$77w(330,9),K.$7aw(100,"AcDbSymbolTableRecord"),K.$7aw(100,"AcDbRegAppTableRecord"),K.$7aw(2,s),K.$77w(70,0)},S.prototype.$6bw=function(E,W,J){var R=this;R.$7aw(0,"BLOCK_RECORD"),R.$7aw(5,W),R.$77w(330,1),R.$7aw(100,"AcDbSymbolTableRecord"),R.$7aw(100,"AcDbBlockTableRecord"),R.$7aw(2,E),R.$7aw(340,J),R.$77w(70,0),R.$77w(280,1),R.$77w(281,0)},S.prototype.$6cw=function(X,d,r,M){var o=this;o.$7aw(0,"BLOCK"),o.$78w(5,d),o.$78w(330,r),o.$7aw(100,"AcDbEntity"),M&&o.$77w(67,1),o.$77w(8,0),o.$7aw(100,"AcDbBlockBegin"),o.$7aw(2,X),o.$77w(70,0),o.$79w(10,0),o.$79w(20,0),o.$79w(30,0),o.$7aw(3,X),o.$7aw(1,""),o.$7aw(0,"ENDBLK"),o.$78w(5,d+1),o.$78w(330,r),o.$7aw(100,"AcDbEntity"),M&&o.$77w(67,1),o.$77w(8,0),o.$7aw(100,"AcDbBlockEnd")},S.prototype.$6dw=function(){var Q=this;Q.$78w(5,Q._dxfHandleValue++)},S.prototype.$6ew=function(c,a,$,r){var V=this;V.$7aw(0,"DICTIONARY"),V.$7aw(5,c),"C"===a&&(V.$7aw(102,"{ACAD_REACTORS"),V.$7aw(330,a),V.$7aw(102,"}")),V.$7aw(330,a),V.$7aw(100,"AcDbDictionary"),$&&V.$77w(280,$),V.$77w(281,r)},S.prototype.$6fw=function(e,g){var J=this;for(var $ in g){var N=g[$];J.$7aw(3,$),J.$7aw(e,N)}},S.prototype.$70w=function(){this.$68w("TABLES")},S.prototype.$71w=function(){this.$7aw(0,"ENDTAB")},S.prototype.$72w=function(){this.$68w("HEADER")},S.prototype.$73w=function(V,z,K){var n=this;n.$7aw(0,"LTYPE"),n.$77w(5,V),n.$77w(330,5),n.$7aw(100,"AcDbSymbolTableRecord"),n.$7aw(100,"AcDbLinetypeTableRecord"),n.$7aw(2,z),n.$77w(70,0),n.$77w(3,K||""),n.$77w(72,65),n.$77w(73,0),n.$79w(40,0)},S.prototype.$74w=function(){this.$7aw(0,"ENDSEC")},S.prototype.$75w=function(d,_,j){var K=this;K.$7aw(0,"TABLE"),K.$7aw(2,d),K.$77w(5,_),K.$77w(330,0),K.$7aw(100,"AcDbSymbolTable"),K.$77w(70,j)},S.prototype.$76w=function(S){this.$7aw(999,S)},S.prototype.$77w=function(D,f){return this.$7aw(D,f)},S.prototype.$78w=function(u,L){return this.$7aw(u,L.toString(16).toUpperCase())},S.prototype.$79w=function(X,T){return T=""+T,T.indexOf(".")<0&&(T+=".0"),this.$7aw(X,T)},S.prototype.$7aw=function(Y,a){var V;V=10>Y?"  ":100>Y?" ":"",this._lineContents.push(V+Y+"\n"+a)},S.prototype.$7bw=function(d){this._lineContents.push(d.join("\n"))},S.prototype.$7cw=function(r,p){var P=this;P.$79w(r,p.x),P.$79w(r+10,p.y),p.z!==a&&P.$79w(r+20,p.z)},S.prototype.$7dw=function(O){var o,k,r=this;for(o=0,k=O.length;k>o;o++)r.$7aw(0,"VERTEX"),r.$77w(8,0),r.$7cw(10,O[o])},S.prototype.$2cw=function(Q){var t=this._matrix,J=Q.x,i=Q.y;return{x:t.a*J+t.c*i+t.tx,y:t.b*J+t.d*i+t.ty}},S.prototype.$2dw=function(q){for(var L=this,F=new Array(q.length),A=0,$=q.length;$>A;A++)F[A]=L.$2cw(q[A]);return F},S.prototype.$2ew=function(J){var r=this._matrix;return J*Math.sqrt(r.a*r.a+r.b*r.b)},S.prototype.$8bw=function(o){return 180*(o/Math.PI)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);