!function(q){"use strict";var S="ht",D=q[S],V=D.Default,n=Math,T=(n.PI,n.sin,n.cos,n.atan2,n.sqrt,n.max),N=n.floor,v=(n.round,n.ceil),z=D.Shape,r=(D.Edge,D.List),O=D.Style,G=D.graph,b=V.getInternal(),X=b.ui(),h=null,f="prototype",x=q.clearInterval,M=q.setInterval,L=function(Q){var t=Q.data,c=this.dm();if(t&&"add"===Q.kind){var $=c.$1c,j=t instanceof z?"shape.":"edge.";$&&t.s(j+"dash.flow")&&$.indexOf(t)<0&&$.push(t)}"clear"===Q.kind&&(c.$1c=[])},R=function(H){var f=H.property,s=H.data,p=H.newValue,n=this.dm().$1c,F=s instanceof z?"s:shape.dash.flow":"s:edge.dash.flow";if(n&&f===F)if(p)n.indexOf(s)<0&&n.push(s);else for(var V=n.length,N=0;V>N;N++)if(n[N]===s){n.splice(N,1);break}},d=G.GraphView[f],o=X.EdgeUI[f],k=X.ShapeUI[f],s=k._80o,B=o._80o,Z=D.DataModel[f],W=Z.prepareRemove,K=d.setDataModel;O["edge.dash.flow.step"]==h&&(O["edge.dash.flow.step"]=3),O["shape.dash.flow.step"]==h&&(O["shape.dash.flow.step"]=3),Z.prepareRemove=function(A){W.call(this,A);var U=A._dataModel,T=U.$1c;if(T)for(var Q=T.length,I=0;Q>I;I++)if(T[I]===A){T.splice(I,1);break}},d.setDataModel=function(g){var Q=this,I=Q._dataModel;if(I!==g){I&&(I.umm(L,Q),I.umd(R,Q),I.$1c=[]),g.mm(L,Q),g.md(R,Q);var F=g.$1c=[];g.each(function(H){var v=H instanceof z?"shape.":"edge.";H.s(v+"dash.flow")&&F.indexOf(H)<0&&F.push(H)}),K.call(Q,g)}},d.setDashFlowInterval=function(X){var k=this,R=k.$2c;k.$2c=X,k.fp("dashFlowInterval",R,X),k.$3c!=h&&(x(k.$3c),delete k.$3c,k.enableDashFlow(X))},d.getDashFlowInterval=function(){return this.$2c},d.$4c=function(){var c,d,S,g=this,I=g.tx(),q=g.ty(),B=g._zoom,G=g.getWidth(),C=g.getHeight(),F={x:-I/B,y:-q/B,width:G/B,height:C/B},u=g.dm().$1c,a=g._56I,Q=new r;if(u.forEach(function(h){a[h.getId()]&&(c=g.getDataUI(h),c&&(S=c._79o(),S&&Q.add(S)))}),0!==Q.size()&&(Q.each(function(e){V.intersectsRect(F,e)&&(d=V.unionRect(d,e))}),d&&(d&&(V.grow(d,T(1,1/B)),d.x=N(d.x*B)/B,d.y=N(d.y*B)/B,d.width=v(d.width*B)/B,d.height=v(d.height*B)/B,d=V.intersection(F,d)),d))){var O=g._canvas.getContext("2d");O.save(),O.lineCap=V.lineCap,O.lineJoin=V.lineJoin,b.translateAndScale(O,I,q,B),O.beginPath(),O.rect(d.x,d.y,d.width,d.height),O.clip(),O.clearRect(d.x,d.y,d.width,d.height),g.$5c(O,d),O.restore()}},d.$5c=function(n,K){var b,Y,L=this;L._93db(n),L.each(function(W){L._56I[W._id]&&(b=L.getDataUI(W),b&&(Y=b._79o(),(!K||V.intersectsRect(K,Y))&&(b.$7c=!0,b._42(n),delete b.$7c)))}),L._92db(n)},d.enableDashFlow=function(F){var a=this;a.$3c==h&&(a.$3c=M(function(){a.$4c()},F||a.$2c||50))},d.disableDashFlow=function(){var T=this;x(T.$3c),delete T.$3c};var E=function(){var X=this,b=X._data,H=b instanceof z?"shape.":"edge.",m=b.s(H+"dash.pattern"),u=b.s(H+"dash.flow.reverse");if(m&&b.s(H+"dash")&&b.s(H+"dash.flow")&&X.$7c){var h=X.s(H+"dash.offset")||0,S=b.s(H+"dash.flow.step"),B=b.getStyleMap(),I=0;m.forEach(function(N){I+=N}),u&&(S=-S),h-=S,h%=I,B||(b._styleMap=B={}),B[H+"dash.offset"]=h}};o._80o=function(Q){B.call(this,Q),E.call(this)},k._80o=function(N){s.call(this,N),E.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);