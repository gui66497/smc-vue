!function(w,f,z){"use strict";var S="px",p="0",D="innerHTML",j="className",o=ht.Default,K=ht.Color,c=ht.Node,L="position",n="top",h="left",b=o.animate,F=o.getInternal(),v="width",p="0",U="none",G="max-height",_="font",X="background",Q="border-box",A="user-select",R="box-sizing",E="overflow",O=o.isTouchable,F=o.getInternal(),k=K.titleIconBackground,u=o.scrollBarInteractiveSize,W=/msie 9/.test(w.navigator?w.navigator.userAgent.toLowerCase():""),J=null,N=function(){return document},t=function(s){return N().createElement(s)},g=function(){return t("div")},Y=function(){var m=g(),x=m.style;return x.msTouchAction=U,x.cursor="default",O&&x.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",J),x.position="absolute",x.left=p,x.top=p,m},e=function(){return t("canvas")},d=function(){return document.body},V=function(n,T,Z){n.style.setProperty(T,Z,J)},i=function(w,t){w.style.removeProperty(t)},s=function(i,z,c){o.def(ht.widget[i],z,c)},x=function(O,F){O.appendChild(F)},y=function(e,C){e.removeChild(C)},T=function(K,q,V,b){K.addEventListener(q,V,!!b)};F.addMethod(o,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:k,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:k}]},paletteTitleLabelColor:o.labelSelectColor,paletteTitleLabelFont:o.labelFont,paletteContentLabelFont:o.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:o.widgetTitleHeight,paletteTitleBackground:K.titleBackground,paletteTitleHoverBackground:K.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:z,paletteItemHoverBorderColor:K.highlight,paletteItemSelectBackground:K.highlight},!0);var a=".palette-item:hover{border: 1px solid "+o.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+o.paletteTitleHoverBackground+" !important}",m=document.createElement("style");O||(m.styleSheet?m.styleSheet.cssText=a:m.appendChild(N().createTextNode(a))),N().getElementsByTagName("head")[0].appendChild(m);var q=function(h){var u=this;u.$22h=h,u.addListeners()};o.def(q,f,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var y=this;y.$36h&&d().removeChild(y.$36h),y.$23h=y.$24h=y.$25h=y.$35h=y.$36h=J},handle_touchstart:function(U){for(var u,n=this,s=n.$22h,v=U.target,H=s.sm(),y=s.dm(),R="palette-header",L="palette-header-tool",X="palette-item",m=!1,W=!1,d=!1;v&&(v[j]||"").indexOf(R)<0&&(v[j]||"").indexOf(X)<0;)v=v.parentNode;if(v&&v[j].indexOf(L)>=0?m=!0:v&&v[j].indexOf(R)>=0?d=!0:v&&v[j].indexOf(X)>=0&&(W=!0),o.isLeftButton(U))if(n.$27h(U))n.$24h=o.getClientPoint(U),n.$25h=s.ty();else if(m){o.preventDefault(U),u=v.parentNode.$11h;var I=y.getDataById(u),B=I.s("tools")[v.toolIndex];B.action&&B.action.call(s)}else if(d){o.preventDefault(U),u=v.$11h;var I=y.getDataById(u);I.isExpanded()?I.setExpanded(!1):I.setExpanded(!0)}else if(W){u=v.$11h;var c=y.getDataById(u);H.ss(c),s.handleDragAndDrop&&(o.preventDefault(U),c.s("draggable")&&(s.handleDragAndDrop(U,"prepare"),n.$35h=0)),c.s("draggable")||(o.preventDefault(U),n.$24h=o.getClientPoint(U),n.$25h=s.ty())}else o.preventDefault(U),n.$24h=o.getClientPoint(U),n.$25h=s.ty();else n.$26h(U)},handle_mousedown:function(h){this.handle_touchstart(h)},handle_mousewheel:function(v){this.handleScroll(v,v.wheelDelta/40,v.wheelDelta!==v.wheelDeltaX)},handle_DOMMouseScroll:function($){this.handleScroll($,-$.detail,1)},handleScroll:function(_,l,D){var e=this.$22h;o.preventDefault(_),D&&e._41o()&&e.ty(e.ty()+20*l)},handle_mouseup:function(O){this.handle_touchend(O)},handle_touchend:function(g){var J=this;J.$37h(g),J.$26h(g)},handleWindowMouseUp:function(D){this.handleWindowTouchEnd(D)},handleWindowTouchEnd:function(t){var Y=this;Y.$37h(t),Y.$26h(t)},$37h:function(f){var N=this,h=N.$22h;2===N.$35h&&(N.$35h=3,h.handleDragAndDrop(f,"end"))},handleWindowMouseMove:function(Q){this.handleWindowTouchMove(Q)},handleWindowTouchMove:function(u){var R=this,X=R.$22h,K=R.$23h,W=R.$24h,E=R.$25h,l=o.getClientPoint(u),p=X._29I,P=R.$36h;if(1===R.$35h||2===R.$35h){if(R.$35h=2,X.handleDragAndDrop(u,"between"),O){var e=u.touches[0];u=e?e:u.changedTouches[0]}P.style.left=u.pageX-parseInt(P.width)/2+S,P.style.top=u.pageY-parseInt(P.height)/2+S}else"p"===K?X.ty(E+l.y-W.y):"v"===K&&X.ty(E+(W.y-l.y)/p.height*X._59I)},handle_mousemove:function(o){this.handle_touchmove(o)},handle_touchmove:function(n){if(!o.isDragging()&&o.isLeftButton(n)){var h=this,Q=h.$22h,j=h.$27h(n);if(h.$24h){if(!h.$23h){if(o.getDistance(o.getClientPoint(n),h.$24h)<2)return;h.$23h=j?"v":"p",o.startDragging(h)}}else if(j)Q._43o();else if(0===h.$35h){if(h.$35h=1,Q.handleDragAndDrop(n,"begin"),O){var P=n.touches[0];n=P?P:n.changedTouches[0]}var K=h.$36h=new Image,q=Q.$10h[Q.sm().ld().getId()].querySelector(".image-box"),X=parseInt(q.style.width),u=parseInt(q.style.height);K.draggable=!1,K.src=q.toDataURL(),K.width=X,K.height=u,K.style.position="absolute",K.style.left=n.pageX-X/2+S,K.style.top=n.pageY-u/2+S,d().appendChild(K),o.startDragging(h)}}},$27h:function(P){var v=this.$22h,w=v.getView(),r=w.getBoundingClientRect(),$=v._29I,E=P.clientX-r.left+w.scrollLeft;return v._41o()&&$.x+$.width-E<u}}),ht.widget.Palette=function(N){var s=this,S=s._view=F.createView(null,s);s.$9h={},s.$10h={},s.$4h={},s._29I={x:0,y:0,width:0,height:0},s._59I=0,s.dm(N?N:new ht.DataModel),S[j]="ht-widget-palette",s.$29h=new q(s),V(S,X,o.paletteContentBackground),V(S,E,"auto"),V(S,R,Q),V(S,"-moz-"+R,Q),V(S,"-webkit-"+A,U),V(S,"-moz-"+A,U),V(S,"-ms-"+A,U),V(S,A,U),V(S,"position","absolute"),V(S,"overflow","hidden"),x(S,s._79O=Y()),T(S,"dragstart",function(z){z.dataTransfer&&(z.dataTransfer.setData("Text","nodeid:"+z.target.$11h),z.dataTransfer.effectAllowed="all",s.$29h.$26h())})},s("Palette",f,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:o.autoHideScrollBar,_scrollBarSize:o.scrollBarSize,_scrollBarColor:o.scrollBarColor,getViewRect:function(){return this._29I},ty:function(X){return X?(this.setTranslateY(X),void 0):this.getTranslateY()},setTranslateY:function($){if(this.$32h==J){var A=this,y=A.$33h($),N=A.$30h;A.$30h=y,A.fp("translateY",N,y)}},getTranslateY:function(){return this.$30h},setLayout:function(L){var z,E,k=this,G=k._layout;k._layout=L,"smallicons"===L?z=E=20:"iconsonly"===L?z=E=50:(z=70,E=50),k.setItemImageWidth(z),k.setItemImageHeight(E),k.setItemImagePadding(4),k.fp("layout",G,L)},getDataAt:function(B){for(var F=B.target;F&&F.$11h==J;)F=F.parentNode;return F&&F.$11h!=J?this.getDataModel().getDataById(F.$11h):void 0},$20h:function(){var m=16;return O&&(m*=1.2),m},$19h:function(){return o.paletteTitleHeight},$18h:function(){var d=o.paletteSeparatorWidth,R=o.paletteTitleBackground,l=o.paletteSeparatorColor||o.brighter(R);return d+S+" solid "+l},$17h:function(l){V(l,"cursor","pointer"),V(l,"display","inline-block"),V(l,"margin-right",(O?8:4)+S),V(l,"vertical-align",n)},$1h:function(c){var W=this,G=g(),$=g(),a=t("span");G[j]="palette-header",V(G,L,"relative"),V(G,X,o.paletteTitleBackground),V(G,"color",o.paletteTitleLabelColor),V(G,n,p),V(G,R,Q),V(G,"-moz-"+R,Q),V(G,"padding","0 5px 0 0"),V(G,"border-top",W.$18h()),V(G,v,"100%"),V(G,"cursor","pointer"),V(G,"white-space","nowrap"),V(G,E,"hidden"),V(G,_,o.paletteTitleLabelFont),V(G,"line-height",W.$19h()+S),G.$11h=c.getId();var N=e(),A=W.$19h(),d=W.$20h();W.$17h(N),F.setCanvas(N,d,A),x(G,N);var H=c.s("tools");if(H)for(var m=0;m<H.length;m++){var u=e();W.$17h(u),F.setCanvas(u,d,A),u[j]="palette-header-tool palette-header-tool"+c.getId()+"-"+m,u.style.position="absolute",u.style.right=(d+10)*m+"px",u.toolIndex=m,x(G,u)}return N[j]="palette-toggle-icon-"+c.getId(),$[j]="palette-content",V($,"max-height",0+S),V($,_,o.paletteContentLabelFont),V($,E,"hidden"),$.$11h=c.getId(),W.$9h[c.getId()]=$,a[D]=c.getName(),V(a,_,o.paletteTitleLabelFont),x(G,N),x(G,a),[G,$]},$2h:function(Z){var $=this,L=$._layout,E=W&&Z.s("draggable")?t("a"):g(),f=e(),y=g(),A=Z.getName()||"",Y=Z.s("title")||Z.getToolTip()||A,G=$._itemMargin;f[j]="image-box";var d=$.getItemImageWidth(),p=$.getItemImageHeight();return F.setCanvas(f,d,p),x(E,f),y[D]=A,y[j]="label-box","iconsonly"!==L&&x(E,y),E[j]="palette-item",V(E,"vertical-align",n),V(E,"cursor","pointer"),V(E,"border-radius",5+S),V(E,"border","1px solid transparent"),V(E,"text-align","center"),V(E,"display","inline-block"),V(E,"margin-left",G+S),V(E,"margin-top",G+S),V(E,"color",o.paletteContentLabelColor),"smallicons"===L?(V(f,"vertical-align","middle"),V(E,"margin-left",2+S),V(E,"margin-top",2+S),V(E,"padding",2+S),V(E,"text-align",h),V(y,"display","inline-block"),V(y,"min-width",$.$21h+$._itemMargin+S)):"largeicons"===L&&(V(y,"max-width",d+S),V(y,"overflow","hidden")),E.$11h=Z.getId(),Y&&(E.title=Y),Z.s("draggable")&&!$.handleDragAndDrop&&(W?(E.href="#",V(E,"text-decoration",U)):E.draggable="true"),E},$16h:function(g,Y,k,f){var Z=F.initContext(g);F.translateAndScale(Z,0,0,1),Z.clearRect(0,0,k,k);var R=(k-f)/2;o.drawStretchImage(Z,o.getImage(Y),"fill",0,R,f,f),Z.restore()},$15h:function(N){var _=this,G=N.getId(),x=_._view.querySelector(".palette-toggle-icon-"+G),Y=N.isExpanded()?o.paletteCollapseIcon:o.paletteExpandIcon;if(x&&Y){var b=_.$19h(),L=_.$20h();_.$16h(x,Y,b,L)}},_drawToolsIcon:function(Z){var N=this,P=Z.s("tools");if(P)for(var Y=0;Y<P.length;Y++){var B=N._view.querySelector(".palette-header-tool"+Z.getId()+"-"+Y),D=P[Y].icon,C=N.$19h(),s=N.$20h();N.$16h(B,D,C,s)}},$14h:function(O){var $=this,H=O.getId(),v=$.$10h[H].querySelector(".image-box"),I=O.getImage(),B=O.s("image.stretch");if(v&&I){var V=F.initContext(v),h=$.getItemImagePadding();h="smallicons"===$._layout?h/2:h;var w=$.getItemImageWidth()-2*h,f=$.getItemImageHeight()-2*h;F.translateAndScale(V,0,0,1),V.clearRect(0,0,w,f),o.drawStretchImage(V,o.getImage(I),B,h,h,w,f,O,$),V.restore()}},validateImpl:function(){var Q,M,h,e=this,s=e.$9h,E=e._layout,T=e.$10h,O=e.$4h,V=e._view,i=e.dm();if(e.$13h&&(delete e.$13h,O={},i.each(function(Y){O[Y.getId()]=Y})),"smallicons"===E)for(var L in O){var $=O[L];if($ instanceof c){var m=$.getName()||"",r=o.getTextSize(o.paletteContentLabelFont,m).width;e.$21h!=J&&e.$21h>r||(e.$21h=r)}}for(var L in O){h=O[L];var W,Y;if(i.contains(h)){if(h instanceof ht.Group){var g,n=e.$1h(h),d=T[h.getId()];d&&(g=d.nextSibling,y(V,g),y(V,d)),M=i.getSiblings(h).indexOf(h);var Z=V.children[2*M]||e._79O;Z&&Z.parentNode?(V.insertBefore(n[0],Z),V.insertBefore(g||n[1],Z)):(V.appendChild(n[0]),V.appendChild(g||n[1])),T[h.getId()]=n[0],Q=s[h.getId()]=g||n[1],Y=h.$12h;var C=h.s("promptText");Y||(h.$12h=t("div"),h.$12h[D]=C||"",Y=h.$12h),0===h.getChildren().size()?Q.contains(Y)||x(Q,Y):Q.contains(Y)&&y(Q,Y)}else if(W=h.getParent()){var I=e.$2h(h),N=T[h.getId()];Q=s[W.getId()],N&&y(N.parentNode,N),M=i.getSiblings(h).indexOf(h);var u=Q.children[M];u?Q.insertBefore(I,u):x(Q,I),T[h.getId()]=I,e.$14h(h)}}else{var A=T[h.getId()],k=A.parentNode;if(h instanceof ht.Group){var X=A.nextSibling;y(V,A),y(V,X),delete s[h.getId()]}else y(k,A),0===k.children.length&&(W=i.getDataById(k.$11h),Y=W.$12h,Y&&!k.contains(Y)&&x(k,Y));delete T[h.getId()]}}e.$4h={};var F=function(){var $=e._59I,M=0;e.$32h!=J&&(clearInterval(e.$32h),M=0,delete e.$32h),e.$32h=setInterval(function(){e.$31h(),$===e._59I?(M++,M>=2&&(clearInterval(e.$32h),delete e.$32h)):(M=0,$=e._59I)},30)};for(var P in s)if(Q=s[P],h=i.getDataById(s[P].$11h),e.$15h(h),e._drawToolsIcon(h),h.isExpanded()){if(Q.style.maxHeight===0+S){var U=Q.scrollHeight+e._itemMargin+S;b(Q).duration(200).set(G,U).set("padding-bottom",e._itemMargin+S).end(function(){return function(){F()}}(U))}else Q.style.maxHeight=Q.scrollHeight+S;Q.style.paddingBottom=e._itemMargin+S}else Q.style.maxHeight!==0+S&&b(Q).duration(200).set(G,p).set("padding-bottom",p).end(function(){return function(){F()}}(Q));e.$28h(),e.$31h()},$31h:function(){for(var z=this,K=z._view,t=0,c=K.children,N=0;N<c.length;N++){var _=c[N];_.className&&_.className.indexOf("palette-")>=0&&(t+=_.offsetHeight)}z._59I=t,z.$30h=z.$33h(z.ty());var w=z.ty();K.scrollTop=-w,z._29I={x:0,y:-w,width:K.clientWidth,height:K.clientHeight},V(z._79O,n,-w+S),z._93I()},$33h:function(h){var y=this,D=y._29I.height-y._59I;return D>h&&(h=D),h>0?0:Math.round(h)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(r){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(r.property)<0&&this.redraw(),"translateY"===r.property&&(this.iv(),this._43o())},findDataByName:function(x){for(var l=this.dm().getDatas(),I=0;I<l.size();I++){var O=l.get(I);if(O.getName()===x)return O}},setDataModel:function(j){var p=this,Z=p._dataModel,P=p._selectionModel;Z!==j&&(Z&&(Z.umm(p.$6h,p),Z.umd(p.$8h,p),Z.umh(p.$7h,p),P||Z.sm().ums(p.$28h,p)),p._dataModel=j,j.mm(p.$6h,p),j.md(p.$8h,p),j.mh(p.$7h,p),P?P._21I(j):j.sm().ms(p.$28h,p),p.sm().setSelectionMode("single"),p.fp("dataModel",Z,j))},$6h:function(b){var y=this,M=y._view,g=b.data,X=y.$4h;"add"===b.kind?X[g.getId()]=g:"remove"===b.kind?X[g.getId()]=g:"clear"===b.kind&&(y.$10h={},y.$9h={},y.$4h={},M[D]=""),y.iv()},$7h:function(I){var V=this,p=I.data;V.$4h[p.getId()]=p,V.iv()},$8h:function(K){var u=this,t=K.data,N=K.property;"expanded"===N?u.iv():(u.$4h[t.getId()]=t,u.iv())},$28h:function(){var S,h=this,s=h.sm(),n="palette-item",R=s.ld();this.dm().each(function(m){S=h.$10h[m.getId()],S&&S[j].indexOf(n)>=0&&(m===R?V(S,X,o.paletteItemSelectBackground):i(S,X))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);