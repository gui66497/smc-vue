!function(T){"use strict";var m="ht",W=T[m],Q=Math,p=Q.max,K=Q.min,o=Q.abs,d=Q.atan2,b=Q.cos,J=Q.sin,x=Q.ceil,G=W.Default,j=G.getInternal(),U=W.List,L=j.Mat,M=j.getNodeRect,q=j.intersectionLineRect,n=G.getDistance,y=G.setEdgeType,s="left",S="right",a="top",D="bottom",w="edge.type",Y="edge.gap",h="edge.center",z="edge.extend",R=function(o,G){return M(o,G).width},F=function(W,B){return M(W,B).height},Z=function(D,W){return j.getEdgeAgentPosition(D,W._40I,W.s("edge.source.position"),W.s("edge.source.offset.x"),W.s("edge.source.offset.y"),W.s("edge.source.anchor.x"),W.s("edge.source.anchor.y"))},r=function(A,i){return j.getEdgeAgentPosition(A,i._41I,i.s("edge.target.position"),i.s("edge.target.offset.x"),i.s("edge.target.offset.y"),i.s("edge.target.anchor.x"),i.s("edge.target.anchor.y"))},v=function(R,K){var h=R.s(w),z=R.getEdgeGroup();if(z){var I=0;if(z.eachSiblingEdge(function(D){K.isVisible(D)&&D.s(w)==h&&I++}),I>1)return R.s(Y)*(I-1)/2}return 0},k=function(x,O){var p=x.s(w),k=x.isLooped();if(!x.getEdgeGroup())return k?x.s(Y):0;var L,$=0,i=0,C=0;return x.getEdgeGroup().getSiblings().each(function(y){y.each(function(G){if(G._40I===x._40I&&G.s(w)==p&&O.isVisible(G)){var y=G.s(Y);L?(i+=C/2+y/2,C=y):(L=G,C=y),G===x&&($=i)}})}),k?i-$+C:$-i/2},P=function(S,X){var p=S.size(),V=X.s("edge.corner.radius");if(0===V)return{points:S,segments:new U([1,p])};if(0>V)return{points:S};var m,E=new U,O=new U,Z=S.get(0);E.add(Z),O.add(1);for(var N=1;p>N;N++)if(p>N+1){var a=S.get(N),o=S.get(N+1),q=Z.x,v=Z.y,_=a.x,t=a.y,g=t-v,u=_-q,C=d(g,u);m=K(.99*n(Z,a),V),E.add({x:_-m*b(C),y:t-m*J(C)}),E.add(a),q=a.x,v=a.y,_=o.x,t=o.y,g=t-v,u=_-q,C=d(g,u),m=K(.99*n(a,o),V),Z={x:q+m*b(C),y:v+m*J(C)},E.add(Z),O.addAll([2,3])}else E.add(S.get(N)),O.add(2);return{points:E,segments:O}};j.addMethod(W.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),y("boundary",function(s,R,I,k){k||(R=-R);var i,J=Z(I,s),H=r(I,s),Q=M(I,s._40I),S=M(I,s._41I),W=new L(d(H.y-J.y,H.x-J.x)),E=n(J,H),g=J.x,c=J.y;return i=W.tf(0,R),J={x:i.x+g,y:i.y+c},i=W.tf(E,R),H={x:i.x+g,y:i.y+c},i=q(J,H,Q),i&&(J={x:i[0],y:i[1]}),i=q(J,H,S),i&&(H={x:i[0],y:i[1]}),{points:new U([J,H])}}),y("ripple",function(b,f,i,N){N||(f=-f);var I=Z(i,b),w=r(i,b),_=n(I,w),e=K(b.s("edge.offset"),_/2),Q=b.s("edge.ripple.size"),j=b.s("edge.ripple.length"),X=b.s("edge.ripple.both"),M=b.s(h),W=b.s("edge.ripple.elevation"),s=new U,g=b.s("edge.ripple.straight")?null:new U,R=new L(d(w.y-I.y,w.x-I.x));N||(W=-W),_-=2*e,j>0&&(Q=x(_/j));var O=_/Q;g&&g.add(1);for(var k=0;Q>k;k++)g&&g.add(3),0===k?s.add({x:e+O*k,y:M?0:f}):s.add({x:e+O*k,y:f}),s.add({x:e+O*k+O/2,y:W+f}),X&&(W=-W);for(s.add({x:e+_,y:M?0:f}),k=0;k<s.size();k++){var J=R.tf(s.get(k));J.x+=I.x,J.y+=I.y,s.set(k,J)}return{points:s,segments:g}}),y("h.v",function(K,f,D){f=k(K,D);var H=new U,x=K.s(h),g=Z(D,K),V=g.x,M=g.y,L=r(D,K),I=L.x,v=L.y,w=0,T=0,X=I-V,n=v-M;return x||(w=R(D,K._40I)/2,T=F(D,K._41I)/2),X>=0&&0>=n?(H.add({x:V+w,y:M+f}),H.add({x:I+f,y:M+f}),H.add({x:I+f,y:v+T})):0>=X&&n>=0?(H.add({x:V-w,y:M+f}),H.add({x:I+f,y:M+f}),H.add({x:I+f,y:v-T})):X>=0&&n>=0?(H.add({x:V+w,y:M+f}),H.add({x:I-f,y:M+f}),H.add({x:I-f,y:v-T})):(H.add({x:V-w,y:M+f}),H.add({x:I-f,y:M+f}),H.add({x:I-f,y:v+T})),P(H,K)}),y("v.h",function(M,H,N){H=k(M,N);var p=new U,e=M.s(h),A=Z(N,M),x=A.x,B=A.y,S=r(N,M),$=S.x,G=S.y,E=0,n=0,Q=$-x,u=G-B;return e||(E=R(N,M._41I)/2,n=F(N,M._40I)/2),Q>=0&&0>=u?(p.add({x:x+H,y:B-n}),p.add({x:x+H,y:G+H}),p.add({x:$-E,y:G+H})):0>=Q&&u>=0?(p.add({x:x+H,y:B+n}),p.add({x:x+H,y:G+H}),p.add({x:$+E,y:G+H})):Q>=0&&u>=0?(p.add({x:x-H,y:B+n}),p.add({x:x-H,y:G+H}),p.add({x:$-E,y:G+H})):(p.add({x:x-H,y:B-n}),p.add({x:x-H,y:G+H}),p.add({x:$+E,y:G+H})),P(p,M)}),y("ortho",function(Q,W,j){var z=new U,J=Q.s(h),b=Q.s("edge.ortho"),H=Q._40I,c=Q._41I,s=Z(j,Q),v=s.x,q=s.y,B=r(j,Q),A=B.x,y=B.y,E=A-v,D=y-q,p=J?0:R(j,H)/2,g=J?0:F(j,H)/2,S=J?0:R(j,c)/2,M=J?0:F(j,c)/2,O=(E-(p+S)*(E>0?1:-1))*b,w=(D-(g+M)*(D>0?1:-1))*b;return o(E)<o(D)?E>=0&&0>=D?(z.add({x:v+W,y:q-g}),z.add({x:v+W,y:q+w+W-g}),z.add({x:A+W,y:q+w+W-g}),z.add({x:A+W,y:y+M})):0>=E&&D>=0?(z.add({x:v+W,y:q+g}),z.add({x:v+W,y:q+w+W+g}),z.add({x:A+W,y:q+w+W+g}),z.add({x:A+W,y:y-M})):E>=0&&D>=0?(z.add({x:v+W,y:q+g}),z.add({x:v+W,y:q+w-W+g}),z.add({x:A+W,y:q+w-W+g}),z.add({x:A+W,y:y-M})):(z.add({x:v+W,y:q-g}),z.add({x:v+W,y:q+w-W-g}),z.add({x:A+W,y:q+w-W-g}),z.add({x:A+W,y:y+M})):E>=0&&0>=D?(z.add({x:v+p,y:q+W}),z.add({x:v+O+W+p,y:q+W}),z.add({x:v+O+W+p,y:y+W}),z.add({x:A-S,y:y+W})):0>=E&&D>=0?(z.add({x:v-p,y:q+W}),z.add({x:v+O+W-p,y:q+W}),z.add({x:v+O+W-p,y:y+W}),z.add({x:A+S,y:y+W})):E>=0&&D>=0?(z.add({x:v+p,y:q+W}),z.add({x:v+O-W+p,y:q+W}),z.add({x:v+O-W+p,y:y+W}),z.add({x:A-S,y:y+W})):(z.add({x:v-p,y:q+W}),z.add({x:v+O-W-p,y:q+W}),z.add({x:v+O-W-p,y:y+W}),z.add({x:A+S,y:y+W})),P(z,Q)}),y("flex",function(N,M,x){var f=new U,e=N.s("edge.flex")+v(N,x),b=N.s(h),H=N._40I,Y=N._41I,K=Z(x,N),E=K.x,A=K.y,t=r(x,N),j=t.x,S=t.y,m=j-E,n=S-A,u=b?0:R(x,H)/2,$=b?0:F(x,H)/2,a=b?0:R(x,Y)/2,G=b?0:F(x,Y)/2,V=m>0?e:-e,B=n>0?e:-e;return o(m)<o(n)?m>=0&&0>=n?(f.add({x:E+M,y:A-$}),f.add({x:E+M,y:A+B+M-$}),f.add({x:j+M,y:S-B+M+G}),f.add({x:j+M,y:S+G})):0>=m&&n>=0?(f.add({x:E+M,y:A+$}),f.add({x:E+M,y:A+B+M+$}),f.add({x:j+M,y:S-B+M-G}),f.add({x:j+M,y:S-G})):m>=0&&n>=0?(f.add({x:E+M,y:A+$}),f.add({x:E+M,y:A+B-M+$}),f.add({x:j+M,y:S-B-M-G}),f.add({x:j+M,y:S-G})):(f.add({x:E+M,y:A-$}),f.add({x:E+M,y:A+B-M-$}),f.add({x:j+M,y:S-B-M+G}),f.add({x:j+M,y:S+G})):m>=0&&0>=n?(f.add({x:E+u,y:A+M}),f.add({x:E+V+M+u,y:A+M}),f.add({x:j-V+M-a,y:S+M}),f.add({x:j-a,y:S+M})):0>=m&&n>=0?(f.add({x:E-u,y:A+M}),f.add({x:E+V+M-u,y:A+M}),f.add({x:j-V+M+a,y:S+M}),f.add({x:j+a,y:S+M})):m>=0&&n>=0?(f.add({x:E+u,y:A+M}),f.add({x:E+V-M+u,y:A+M}),f.add({x:j-V-M-a,y:S+M}),f.add({x:j-a,y:S+M})):(f.add({x:E-u,y:A+M}),f.add({x:E+V-M-u,y:A+M}),f.add({x:j-V-M+a,y:S+M}),f.add({x:j+a,y:S+M})),P(f,N)}),y("extend.east",function(K,G,f){var H=new U,o=K.s(z)+v(K,f),X=K.s(h),I=Z(f,K),E=I.x+(X?0:R(f,K._40I)/2),e=I.y,s=r(f,K),B=s.x+(X?0:R(f,K._41I)/2),l=s.y,n=p(E,B)+o;return e>l?(H.add({x:E,y:e+G}),H.add({x:n+G,y:e+G}),H.add({x:n+G,y:l-G}),H.add({x:B,y:l-G})):(H.add({x:E,y:e-G}),H.add({x:n+G,y:e-G}),H.add({x:n+G,y:l+G}),H.add({x:B,y:l+G})),P(H,K)}),y("extend.west",function(e,p,D){var E=new U,M=e.s(z)+v(e,D),l=e.s(h),T=Z(D,e),c=T.x-(l?0:R(D,e._40I)/2),m=T.y,G=r(D,e),i=G.x-(l?0:R(D,e._41I)/2),A=G.y,g=K(c,i)-M;return m>A?(E.add({x:c,y:m+p}),E.add({x:g-p,y:m+p}),E.add({x:g-p,y:A-p}),E.add({x:i,y:A-p})):(E.add({x:c,y:m-p}),E.add({x:g-p,y:m-p}),E.add({x:g-p,y:A+p}),E.add({x:i,y:A+p})),P(E,e)}),y("extend.north",function(H,x,$){var f=new U,e=H.s(z)+v(H,$),i=H.s(h),W=Z($,H),O=W.x,G=W.y-(i?0:F($,H._40I)/2),k=r($,H),L=k.x,_=k.y-(i?0:F($,H._41I)/2),t=K(G,_)-e;return O>L?(f.add({y:G,x:O+x}),f.add({y:t-x,x:O+x}),f.add({y:t-x,x:L-x}),f.add({y:_,x:L-x})):(f.add({y:G,x:O-x}),f.add({y:t-x,x:O-x}),f.add({y:t-x,x:L+x}),f.add({y:_,x:L+x})),P(f,H)}),y("extend.south",function(J,x,q){var K=new U,V=J.s(z)+v(J,q),G=J.s(h),u=Z(q,J),W=u.x,$=u.y+(G?0:F(q,J._40I)/2),i=r(q,J),X=i.x,T=i.y+(G?0:F(q,J._41I)/2),b=p($,T)+V;return W>X?(K.add({y:$,x:W+x}),K.add({y:b+x,x:W+x}),K.add({y:b+x,x:X-x}),K.add({y:T,x:X-x})):(K.add({y:$,x:W-x}),K.add({y:b+x,x:W-x}),K.add({y:b+x,x:X+x}),K.add({y:T,x:X+x})),P(K,J)});var $=function(i,H,D,o,V){if(o.sort(function(F,k){var l=F.getSourceAgent()===H?F.getTargetAgent():F.getSourceAgent(),c=k.getSourceAgent()===H?k.getTargetAgent():k.getSourceAgent(),Q=l.p(),x=c.p();if(D===s||D===S){if(Q.y>x.y)return 1;if(Q.y<x.y)return-1}else{if(Q.x>x.x)return 1;if(Q.x<x.x)return-1}return G.sortFunc(F.getId(),k.getId())}),V){for(var w,O,N,h=i.getSourceAgent(),f=i.getTargetAgent(),a=0;a<o.size();a++){var M=o.get(a);M.getSourceAgent()===h&&M.getTargetAgent()===f||M.getTargetAgent()===h&&M.getSourceAgent()===f?(O||(O=new U),O.add(M,0)):O?(N||(N=new U),N.add(M)):(w||(w=new U),w.add(M))}o.clear(),w&&o.addAll(w),O&&o.addAll(O),N&&o.addAll(N)}var u=o.indexOf(i),P=o.size(),W=i.s(Y);return{side:D,index:u,size:P,offset:-W*(P-1)/2+W*u}},c=function(M,v,n,k,Q){var R=v.s(w);return $(v,n,k,n.getAgentEdges().toList(function(x){return M.isVisible(x)&&x.s(w)===R}),Q)},V=function(q,c){var I=q.getSourceAgent()===c?q.getTargetAgent():q.getSourceAgent(),C=c.p(),W=I.p(),X=W.x-C.x,v=W.y-C.y;return X>0&&o(v)<=X?S:0>X&&o(v)<=-X?s:v>0&&o(X)<=v?D:a},A=function(a,f,K){var S=f.s(w),j=V(f,K);return $(f,K,j,K.getAgentEdges().toList(function($){return a.isVisible($)&&$.s(w)===S&&V($,K)===j}))},g=function(h,e){var W=h.getSourceAgent()===e,k=W?h.getTargetAgent():h.getSourceAgent(),w=e.p(),R=k.p();return W?w.y>R.y?a:D:w.x<R.x?S:s},t=function(M,W,d){var l=W.s(w),A=g(W,d);return $(W,d,A,d.getAgentEdges().toList(function(t){return M.isVisible(t)&&t.s(w)===l&&g(t,d)===A}),A===S||A===D)},H=function(x,L){var K=x.getSourceAgent()===L,y=K?x.getTargetAgent():x.getSourceAgent(),G=L.p(),t=y.p();return K?G.x<t.x?S:s:G.y>t.y?a:D},C=function(R,I,b){var g=I.s(w),s=H(I,b);return $(I,b,s,b.getAgentEdges().toList(function(c){return R.isVisible(c)&&c.s(w)===g&&H(c,b)===s}),s===S||s===D)},I=function(i,q,V){var c=i.getSourceAgent(),I=i.getTargetAgent(),A=c.getId()>I.getId(),Z=A?I:c,J=A?c:I,T=Z.p(),v=J.p(),H=V(q,i,Z),L=V(q,i,J),W=i.s(h),o=W?0:R(q,Z)/2,C=W?0:R(q,J)/2,n=W?0:F(q,Z)/2,b=W?0:F(q,J)/2,E=H.offset,r=L.offset,y=H.side,t=L.side,K=new U;return y===a?(K.add({x:T.x+E,y:T.y-n}),K.add({x:T.x+E,y:v.y+r}),t===s?K.add({x:v.x-C,y:v.y+r}):K.add({x:v.x+C,y:v.y+r})):y===D?(K.add({x:T.x+E,y:T.y+n}),K.add({x:T.x+E,y:v.y+r}),t===s?K.add({x:v.x-C,y:v.y+r}):K.add({x:v.x+C,y:v.y+r})):y===s?(K.add({x:T.x-o,y:T.y+E}),K.add({x:v.x+r,y:T.y+E}),t===D?K.add({x:v.x+r,y:v.y+b}):K.add({x:v.x+r,y:v.y-b})):y===S&&(K.add({x:T.x+o,y:T.y+E}),K.add({x:v.x+r,y:T.y+E}),t===D?K.add({x:v.x+r,y:v.y+b}):K.add({x:v.x+r,y:v.y-b})),A&&K.reverse(),P(K,i)};y("ortho2",function(w,n,I){var J,Q,c=w.s(h),b=w.s("edge.ortho"),u=w.getSourceAgent(),y=w.getTargetAgent(),N=u.getId()>y.getId(),t=N?y:u,L=N?u:y,X=t.p(),E=L.p(),v=A(I,w,t),B=A(I,w,L),i=c?0:R(I,t)/2,d=c?0:F(I,t)/2,G=c?0:R(I,L)/2,q=c?0:F(I,L)/2,p=new U,j=v.offset,O=B.offset,Z=v.side;return Z===S?(J=E.y>X.y?-j:j,Q=X.x+i+(E.x-G-X.x-i)*b,p.add({x:X.x+i,y:X.y+j}),p.add({x:Q+J,y:X.y+j}),p.add({x:Q+J,y:E.y+O}),p.add({x:E.x-G,y:E.y+O})):Z===s?(J=E.y>X.y?-j:j,Q=X.x-i-(X.x-i-E.x-G)*b,p.add({x:X.x-i,y:X.y+j}),p.add({x:Q-J,y:X.y+j}),p.add({x:Q-J,y:E.y+O}),p.add({x:E.x+G,y:E.y+O})):Z===D?(J=E.x>X.x?-j:j,Q=X.y+d+(E.y-q-X.y-d)*b,p.add({x:X.x+j,y:X.y+d}),p.add({x:X.x+j,y:Q+J}),p.add({x:E.x+O,y:Q+J}),p.add({x:E.x+O,y:E.y-q})):Z===a&&(J=E.x>X.x?-j:j,Q=X.y-d-(X.y-d-E.y-q)*b,p.add({x:X.x+j,y:X.y-d}),p.add({x:X.x+j,y:Q-J}),p.add({x:E.x+O,y:Q-J}),p.add({x:E.x+O,y:E.y+q})),N&&p.reverse(),P(p,w)},!0),y("flex2",function(X,i,E){var x,C=X.getSourceAgent(),f=X.getTargetAgent(),J=C.getId()>f.getId(),l=J?f:C,W=J?C:f,N=l.p(),o=W.p(),y=A(E,X,l),m=A(E,X,W),I=X.s(h),e=X.s("edge.flex")+(y.size-1)/2*X.s(Y),Z=I?0:R(E,l)/2,u=I?0:F(E,l)/2,p=I?0:R(E,W)/2,r=I?0:F(E,W)/2,O=new U,g=y.offset,t=m.offset,$=y.side;return $===S?(x=o.y>N.y?-g:g,O.add({x:N.x+Z,y:N.y+g}),O.add({x:N.x+Z+e+x,y:N.y+g}),O.add({x:o.x-p-e+x,y:o.y+t}),O.add({x:o.x-p,y:o.y+t})):$===s?(x=o.y>N.y?-g:g,O.add({x:N.x-Z,y:N.y+g}),O.add({x:N.x-Z-e-x,y:N.y+g}),O.add({x:o.x+p+e-x,y:o.y+t}),O.add({x:o.x+p,y:o.y+t})):$===D?(x=o.x>N.x?-g:g,O.add({x:N.x+g,y:N.y+u}),O.add({x:N.x+g,y:N.y+u+e+x}),O.add({x:o.x+t,y:o.y-r-e+x}),O.add({x:o.x+t,y:o.y-r})):$===a&&(x=o.x>N.x?-g:g,O.add({x:N.x+g,y:N.y-u}),O.add({x:N.x+g,y:N.y-u-e-x}),O.add({x:o.x+t,y:o.y+r+e-x}),O.add({x:o.x+t,y:o.y+r})),J&&O.reverse(),P(O,X)},!0),y("extend.north2",function(j,e,r){var u=j.getSourceAgent(),M=j.getTargetAgent(),o=u.getId()>M.getId(),V=o?M:u,X=o?u:M,t=V.p(),y=X.p(),W=c(r,j,V,a),d=c(r,j,X,a,!0),f=j.s(h),i=f?0:F(r,V)/2,A=f?0:F(r,X)/2,k=W.offset,Z=d.offset,v=j.s(z)+(W.size-1)/2*j.s(Y),C=K(t.y-i,y.y-A)-v+(t.x<y.x?k:-k),x=new U;return x.add({x:t.x+k,y:t.y-i}),x.add({x:t.x+k,y:C}),x.add({x:y.x+Z,y:C}),x.add({x:y.x+Z,y:y.y-A}),o&&x.reverse(),P(x,j)},!0),y("extend.south2",function(b,R,B){var Q=b.getSourceAgent(),S=b.getTargetAgent(),x=Q.getId()>S.getId(),m=x?S:Q,j=x?Q:S,w=m.p(),q=j.p(),f=c(B,b,m,D),g=c(B,b,j,D,!0),V=b.s(h),I=V?0:F(B,m)/2,E=V?0:F(B,j)/2,i=f.offset,X=g.offset,_=b.s(z)+(f.size-1)/2*b.s(Y),N=p(w.y+I,q.y+E)+_+(w.x>q.x?i:-i),J=new U;return J.add({x:w.x+i,y:w.y+I}),J.add({x:w.x+i,y:N}),J.add({x:q.x+X,y:N}),J.add({x:q.x+X,y:q.y+E}),x&&J.reverse(),P(J,b)},!0),y("extend.west2",function(s,i,r){var N=s.getSourceAgent(),J=s.getTargetAgent(),M=N.getId()>J.getId(),E=M?J:N,q=M?N:J,v=E.p(),G=q.p(),t=c(r,s,E,a),u=c(r,s,q,a,!0),l=s.s(h),F=l?0:R(r,E)/2,I=l?0:R(r,q)/2,X=t.offset,L=u.offset,p=s.s(z)+(t.size-1)/2*s.s(Y),D=K(v.x-F,G.x-I)-p+(v.y<G.y?X:-X),f=new U;return f.add({x:v.x-F,y:v.y+X}),f.add({x:D,y:v.y+X}),f.add({x:D,y:G.y+L}),f.add({x:G.x-I,y:G.y+L}),M&&f.reverse(),P(f,s)},!0),y("extend.east2",function(l,O,b){var K=l.getSourceAgent(),q=l.getTargetAgent(),L=K.getId()>q.getId(),A=L?q:K,X=L?K:q,g=A.p(),M=X.p(),f=c(b,l,A,a),S=c(b,l,X,a,!0),u=l.s(h),I=u?0:R(b,A)/2,E=u?0:R(b,X)/2,_=f.offset,m=S.offset,y=l.s(z)+(f.size-1)/2*l.s(Y),V=p(g.x+I,M.x+E)+y+(g.y>M.y?_:-_),d=new U;return d.add({x:g.x+I,y:g.y+_}),d.add({x:V,y:g.y+_}),d.add({x:V,y:M.y+m}),d.add({x:M.x+E,y:M.y+m}),L&&d.reverse(),P(d,l)},!0),y("v.h2",function(J,N,Z){return I(J,Z,t)},!0),y("h.v2",function(i,v,r){return I(i,r,C)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);