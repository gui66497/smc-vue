!function(p,v){"use strict";var R="ht",K=R+".graph.",z=p[R],W=z.graph,V=z.Default,x=z.Color,h=null,q="px",c=V.getInternal(),o=c.getPinchDist,M=V.preventDefault,t=V.getTouchCount,Q=V.startDragging;c.addMethod(V,{overviewBackground:x.widgetBackground,overviewMaskBackground:x.transparent,overviewContentBorderColor:x.widgetBorder,overviewContentBackground:x.background},!0),W.Overview=function(g){var q=this,e=q._view=c.createView(1,q);q._canvas=c.createCanvas(e),e.style.background=V.overviewBackground,e.appendChild(q._mask=c.createDiv()),q.setGraphView(g),q.addListeners()},V.def(K+"Overview",v,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate"],_autoUpdate:!0,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:V.overviewMaskBackground,_contentBorderColor:V.overviewContentBorderColor,_contentBackground:V.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(u){var F=this;if(F.gv!==u){var d=F.gv;F.gv=u,d&&(d.removeViewListener(F.handleGraphViewChanged,F),d.ump(F.handleGraphViewPropertyChanged,F)),u&&(u.addViewListener(F.handleGraphViewChanged,F),u.mp(F.handleGraphViewPropertyChanged,F)),F.fp("graphView",d,u),F.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(S){this._autoUpdate&&"validate"===S.kind&&this.redraw()},handleGraphViewPropertyChanged:function(T){"canvasBackground"===T.property&&this.redraw()},redraw:function(){var X=this;X._redraw||(X._redraw=1,X.iv(50))},validateImpl:function(){var N=this,R=N.gv,$=N._canvas,r=N.getWidth(),y=N.getHeight(),k=N._redraw;if(R){var _=N._mask,b=_.style,F=R.getViewRect(),K=R.getScrollRect(),B=K.x,u=K.y,W=K.width,t=K.height,i=N._rate=Math.max(W/r,t/y),p=N._x=(r-W/i)/2,I=N._y=(y-t/i)/2;if(0!==F.width&&0!==F.height||N.hasRetry||(V.callLater(N.iv,N,h),N.hasRetry=!0),(r!==$.clientWidth||y!==$.clientHeight)&&(c.setCanvas($,r,y),k=1),c.isSameRect(K,N._scrollRect)||(N._scrollRect=K,k=1),k){var z=c.initContext($),a=R.getDataModel().getBackground()||N._contentBackground,H=N._contentBorderColor,O=V.devicePixelRatio;z.clearRect(0,0,r*O,y*O),a&&c.fillRect(z,p*O,I*O,W/i*O,t/i*O,a),c.translateAndScale(z,-B/i+p,-u/i+I,1/i),R._42(z),z.restore(),H&&c.drawBorder(z,H,p*O,I*O,W/i*O,t/i*O)}b.background=N._maskBackground,b.left=p+(F.x-B)/i+q,b.top=I+(F.y-u)/i+q,b.width=F.width/i+q,b.height=F.height/i+q,N._redraw=null}else if(k){var z=c.initContext($);z.clearRect(0,0,r,y),z.restore(),N._redraw=null}},center:function(u){var Y=this,D=Y.gv;if(D){var i=D._zoom,C=D._29I,O=Y._rate,G=Y._scrollRect,t=V.getLogicalPoint(u,Y._canvas),y=G.x+(t.x-Y._x)*O,B=G.y+(t.y-Y._y)*O;D.setTranslate((C.width/2-y)*i,(C.height/2-B)*i)}},handle_mousedown:function(r){this.handle_touchstart(r)},handleWindowMouseUp:function(H){this.handleWindowTouchEnd(H)},handleWindowMouseMove:function(M){this.handleWindowTouchMove(M)},handle_mousewheel:function(i){this.handleScroll(i,i.wheelDelta)},handle_DOMMouseScroll:function(v){2===v.axis&&this.handleScroll(v,-v.detail)},handleScroll:function(E,a){if(M(E),this.gv){var $=this.gv;a>0?$.scrollZoomIn():0>a&&$.scrollZoomOut()}},handle_touchstart:function(Z){if(M(Z),this.gv&&V.isLeftButton(Z)){var r=this,W=r.gv,U=t(Z);1===U?V.isDoubleClick(Z)&&W.isResettable()?W.reset():(r.center(Z),Q(r,Z)):2===U&&(r._dist=o(Z),Q(r,Z))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(M){if(this.gv){var G=this,e=G._dist,T=t(M);1===T?G.center(M):2===T&&e!=h&&G.gv.handlePinch(h,o(M),e)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);