!function(k,Y,T){"use strict";var K="ht",c=k[K],r=null,f=Math,t=f.PI,i=f.cos,y=f.sin,U=f.abs,b=f.max,j=f.sqrt,o=1e-5,d=c.Default,N=d.def,J=d.startAnim,s=d.createMatrix,q=d.transformVec,D=d.getInternal(),I=D.addMethod,m=D.superCall,E=D.toPointsArray,P=D.createNormals,n=D.toFloatArray,p=D.glMV,Q=D.batchShape,l=D.createNodeMatrix,u=D.getFaceInfo,$=D.transformAppend,A=D.drawFaceInfo,Z=D.createAnim,v=D.cube(),e=v.is,w=v.vs,C=v.uv,X=D.ui(),O=c.Node,S=c.Shape,H="h",h="v",F="front",g="back",M="left",V="right",L="top",W="bottom",x="dw.expanded",z=".expanded",B="dw.angle",R=".angle",G=function(P,C,O){N(K+"."+P,C,O)},a=function(N,o,t){t?N.push(o.x,o.y):N.push(o.x,o.y,o.z)},_=[1,0,0],th=function(U,k,T,e){var m,K,B,Z,o=0,L=[];if(e)for(m=e.length;m>o;o+=3)K=e[o],B=e[o+1],Z=e[o+2],L.push(new Sb([new _j([k[3*K],k[3*K+1],k[3*K+2]],_,T?[T[2*K],T[2*K+1],0]:r),new _j([k[3*B],k[3*B+1],k[3*B+2]],_,T?[T[2*B],T[2*B+1],0]:r),new _j([k[3*Z],k[3*Z+1],k[3*Z+2]],_,T?[T[2*Z],T[2*Z+1],0]:r)],U));else for(m=k.length;m>o;o+=3)K=o,B=o+1,Z=o+2,L.push(new Sb([new _j([k[3*K],k[3*K+1],k[3*K+2]],_,T?[T[2*K],T[2*K+1],0]:r),new _j([k[3*B],k[3*B+1],k[3*B+2]],_,T?[T[2*B],T[2*B+1],0]:r),new _j([k[3*Z],k[3*Z+1],k[3*Z+2]],_,T?[T[2*Z],T[2*Z+1],0]:r)],U));return L},gq=[M,F,V,g,L,W],bg=gq.concat("csg"),Ug=[0,6,12,18,24,30],Fm=function(B,I,b){for(var R=l(B),V=[],A=0;6>A;A++)for(var x=gq[A],s=Ug[A],P=b?I.getFaceUv(B,x):r,n=b?I.getFaceUvScale(B,x):r,c=b?I.getFaceUvOffset(B,x):r,t=0;2>t;t++){var d,U,K,u=e[s+3*t],$=e[s+3*t+1],j=e[s+3*t+2];if(b){if(P){var o=8*A;d=[P[2*u-o],P[2*u+1-o],0],U=[P[2*$-o],P[2*$+1-o],0],K=[P[2*j-o],P[2*j+1-o],0]}else d=[C[2*u],C[2*u+1],0],U=[C[2*$],C[2*$+1],0],K=[C[2*j],C[2*j+1],0];n&&(d[0]*=n[0],d[1]*=n[1],U[0]*=n[0],U[1]*=n[1],K[0]*=n[0],K[1]*=n[1]),c&&(d[0]+=c[0],d[1]+=c[1],U[0]+=c[0],U[1]+=c[1],K[0]+=c[0],K[1]+=c[1])}V.push(new Sb([new _j(q([w[3*u],w[3*u+1],w[3*u+2]],R),_,d),new _j(q([w[3*$],w[3*$+1],w[3*$+2]],R),_,U),new _j(q([w[3*j],w[3*j+1],w[3*j+2]],R),_,K)],B))}return rh.$15n(V)},zg=function(B,p){var t,F=B.data.getAttaches();if(F&&F.each(function(n){n instanceof de&&n.s("attach.operation")&&(t||(t=[]),t.push(n))}),t){var j;gq.forEach(function(x){var R=th(x,B[x].vs,B[x].tuv);j=j?j.concat(R):R}),j=rh.$15n(j),t.forEach(function(n){var h=n.s("attach.operation");j[h]&&(j=j[h](Fm(n,B.gv,B.csg.tuv)))}),gq.forEach(function(Y){Y=B[Y],Y.vs=[],Y.tuv&&(Y.tuv=[])}),j.$19n().forEach(function(j){var U=j.$10n;if(U instanceof de){if(U.s("attach.cull"))return;U="csg"}for(var Z=B[U],g=Z.vs,O=Z.tuv,M=j.$9n,r=2;r<M.length;r++)a(g,M[0].$24n),a(g,M[r-1].$24n),a(g,M[r].$24n),O&&(a(O,M[0].uv,!0),a(O,M[r-1].uv,!0),a(O,M[r].uv,!0))})}bg.forEach(function(J){var t=B[J];t.visible&&t.vs.length?(t.ns=P(t.vs),n(t,"vs"),n(t,"tuv")):delete B[J]}),p&&(Q(B,r,p),B.clear())};I(d,{createFrameModel:function(R,h,q,$){R=R==r?.07:R,h=h==r?R:h,q=q==r?R:q,$=$?$:{};var g=$.top,P=$.bottom,K=$.left,o=$.right,_=$.front,H=$.back,F=[],X=[];return _===!0?(F.push(-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5),X.push(0,0,0,1,1,1,1,1,1,0,0,0)):_===!1||(F.push(-.5,.5,.5,-.5,-.5,.5,-.5+R,-.5,.5,-.5+R,-.5,.5,-.5+R,.5,.5,-.5,.5,.5,.5-R,.5,.5,.5-R,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5-R,.5,.5,-.5+R,.5,.5,-.5+R,.5-h,.5,.5-R,.5-h,.5,.5-R,.5-h,.5,.5-R,.5,.5,-.5+R,.5,.5,-.5+R,-.5+h,.5,-.5+R,-.5,.5,.5-R,-.5,.5,.5-R,-.5,.5,.5-R,-.5+h,.5,-.5+R,-.5+h,.5),X.push(0,0,0,1,R,1,R,1,R,0,0,0,1-R,0,1-R,1,1,1,1,1,1,0,1-R,0,R,0,R,h,1-R,h,1-R,h,1-R,0,R,0,R,1-h,R,1,1-R,1,1-R,1,1-R,1-h,R,1-h)),H===!0?(F.push(-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5),X.push(1,0,0,1,1,1,0,1,1,0,0,0)):H===!1||(F.push(-.5,.5,-.5,-.5+R,-.5,-.5,-.5,-.5,-.5,-.5+R,-.5,-.5,-.5,.5,-.5,-.5+R,.5,-.5,.5-R,.5,-.5,.5,-.5,-.5,.5-R,-.5,-.5,.5,-.5,-.5,.5-R,.5,-.5,.5,.5,-.5,-.5+R,.5,-.5,.5-R,.5-h,-.5,-.5+R,.5-h,-.5,.5-R,.5-h,-.5,-.5+R,.5,-.5,.5-R,.5,-.5,-.5+R,-.5+h,-.5,.5-R,-.5,-.5,-.5+R,-.5,-.5,.5-R,-.5,-.5,-.5+R,-.5+h,-.5,.5-R,-.5+h,-.5),X.push(1,0,1-R,1,1,1,1-R,1,1,0,1-R,0,R,0,0,1,R,1,0,1,R,0,0,0,1-R,0,R,h,1-R,h,R,h,1-R,0,R,0,1-R,1-h,R,1,1-R,1,R,1,1-R,1-h,R,1-h)),K===!0?(F.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5),X.push(0,0,0,1,1,1,1,1,1,0,0,0)):K===!1||(F.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5+q,-.5,-.5,-.5+q,-.5,.5,-.5+q,-.5,.5,-.5,-.5,.5,.5-q,-.5,-.5,.5-q,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5-q,-.5,.5,-.5+q,-.5,.5-h,-.5+q,-.5,.5-h,.5-q,-.5,.5-h,.5-q,-.5,.5,.5-q,-.5,.5,-.5+q,-.5,-.5+h,-.5+q,-.5,-.5,-.5+q,-.5,-.5,.5-q,-.5,-.5,.5-q,-.5,-.5+h,.5-q,-.5,-.5+h,-.5+q),X.push(0,0,0,1,q,1,q,1,q,0,0,0,1-q,0,1-q,1,1,1,1,1,1,0,1-q,0,q,0,q,h,1-q,h,1-q,h,1-q,0,q,0,q,1-h,q,1,1-q,1,1-q,1,1-q,1-h,q,1-h)),o===!0?(F.push(.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5),X.push(1,0,0,1,1,1,0,1,1,0,0,0)):o===!1||(F.push(.5,.5,-.5,.5,-.5,-.5+q,.5,-.5,-.5,.5,-.5,-.5+q,.5,.5,-.5,.5,.5,-.5+q,.5,.5,.5-q,.5,-.5,.5,.5,-.5,.5-q,.5,-.5,.5,.5,.5,.5-q,.5,.5,.5,.5,.5,-.5+q,.5,.5-h,.5-q,.5,.5-h,-.5+q,.5,.5-h,.5-q,.5,.5,-.5+q,.5,.5,.5-q,.5,-.5+h,-.5+q,.5,-.5,.5-q,.5,-.5,-.5+q,.5,-.5,.5-q,.5,-.5+h,-.5+q,.5,-.5+h,.5-q),X.push(1,0,1-q,1,1,1,1-q,1,1,0,1-q,0,q,0,0,1,q,1,0,1,q,0,0,0,1-q,0,q,h,1-q,h,q,h,1-q,0,q,0,1-q,1-h,q,1,1-q,1,q,1,1-q,1-h,q,1-h)),g===!0?(F.push(.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5),X.push(1,1,1,0,0,0,0,0,0,1,1,1)):g===!1||(F.push(.5,.5,.5,.5,.5,-.5,.5-R,.5,-.5,.5-R,.5,-.5,.5-R,.5,.5,.5,.5,.5,-.5+R,.5,.5,-.5+R,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5+R,.5,.5,.5-R,.5,.5,.5-R,.5,.5-q,-.5+R,.5,.5-q,-.5+R,.5,.5-q,-.5+R,.5,.5,.5-R,.5,.5,.5-R,.5,-.5+q,.5-R,.5,-.5,-.5+R,.5,-.5,-.5+R,.5,-.5,-.5+R,.5,-.5+q,.5-R,.5,-.5+q),X.push(1,1,1,0,1-R,0,1-R,0,1-R,1,1,1,R,1,R,0,0,0,0,0,0,1,R,1,1-R,1,1-R,1-q,R,1-q,R,1-q,R,1,1-R,1,1-R,q,1-R,0,R,0,R,0,R,q,1-R,q)),P===!0?(F.push(.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5),X.push(1,0,0,1,1,1,0,1,1,0,0,0)):P===!1||(F.push(.5,-.5,.5,.5-R,-.5,-.5,.5,-.5,-.5,.5-R,-.5,-.5,.5,-.5,.5,.5-R,-.5,.5,-.5+R,-.5,.5,-.5,-.5,-.5,-.5+R,-.5,-.5,-.5,-.5,-.5,-.5+R,-.5,.5,-.5,-.5,.5,.5-R,-.5,.5,-.5+R,-.5,.5-q,.5-R,-.5,.5-q,-.5+R,-.5,.5-q,.5-R,-.5,.5,-.5+R,-.5,.5,.5-R,-.5,-.5+q,-.5+R,-.5,-.5,.5-R,-.5,-.5,-.5+R,-.5,-.5,.5-R,-.5,-.5+q,-.5+R,-.5,-.5+q),X.push(1,0,1-R,1,1,1,1-R,1,1,0,1-R,0,R,0,0,1,R,1,0,1,R,0,0,0,1-R,0,R,q,1-R,q,R,q,1-R,0,R,0,1-R,1-q,R,1,1-R,1,R,1,1-R,1-q,R,1-q)),{vs:F,uv:X}}}),I(c.Style,{"dw.flip":!1,"dw.s3":[.999,.999,.5],"dw.t3":T,"dw.expanded":!1,"dw.toggleable":!0,"dw.axis":"left","dw.start":0,"dw.end":t/2,"dw.angle":0,"attach.cull":!1,"attach.operation":"subtract"},!0),gq.forEach(function(v){var L={};L[v+z]=!1,L[v+".toggleable"]=!1,L[v+".axis"]=M,L[v+".start"]=0,L[v+".end"]=t/2,L[v+R]=0,I(c.Style,L,!0)});var rh=function(){this.$4n=[]};rh.$15n=function(m){var x=new rh;return x.$4n=m,x},rh.prototype={clone:function(){var V=new rh;return V.$4n=this.$4n.map(function(Y){return Y.clone()}),V},$19n:function(){return this.$4n},union:function(I){var c=new qh(this.clone().$4n),e=new qh(I.clone().$4n);return c.$3n(e),e.$3n(c),e.$6n(),e.$3n(c),e.$6n(),c.$7n(e.$2n()),rh.$15n(c.$2n())},subtract:function(A){var j=new qh(this.clone().$4n),u=new qh(A.clone().$4n);return j.$6n(),j.$3n(u),u.$3n(j),u.$6n(),u.$3n(j),u.$6n(),j.$7n(u.$2n()),j.$6n(),rh.$15n(j.$2n())},intersect:function(o){var x=new qh(this.clone().$4n),D=new qh(o.clone().$4n);return x.$6n(),D.$3n(x),D.$6n(),x.$3n(D),D.$3n(x),x.$7n(D.$2n()),x.$6n(),rh.$15n(x.$2n())},inverse:function(){var S=this.clone();return S.$4n.map(function(A){A.flip()}),S}},rh.cube=function(C){C=C||{};var s=new jq(C.center||[0,0,0]),W=C.radius?C.radius.length?C.radius:[C.radius,C.radius,C.radius]:[1,1,1];return rh.$15n([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(D){return new Sb(D[0].map(function(k){var J=new jq(s.x+W[0]*(2*!!(1&k)-1),s.y+W[1]*(2*!!(2&k)-1),s.z+W[2]*(2*!!(4&k)-1));return new _j(J,new jq(D[1]))}))}))},rh.sphere=function(F){function _(j,z){j*=2*t,z*=t;var R=new jq(i(j)*y(z),i(z),y(j)*y(z));s.push(new _j(Z.$20n(R.$21n(v)),R))}F=F||{};for(var s,Z=new jq(F.center||[0,0,0]),v=F.radius||1,G=F.slices||16,z=F.stacks||8,T=[],J=0;G>J;J++)for(var x=0;z>x;x++)s=[],_(J/G,x/z),x>0&&_((J+1)/G,x/z),z-1>x&&_((J+1)/G,(x+1)/z),_(J/G,(x+1)/z),T.push(new Sb(s));return rh.$15n(T)},rh.cylinder=function(u){function w(C,A,c){var I=2*A*t,s=Y.$21n(i(I)).$20n(N.$21n(y(I))),X=L.$20n(o.$21n(C)).$20n(s.$21n(J)),m=s.$21n(1-U(c)).$20n(W.$21n(c));return new _j(X,m)}u=u||{};for(var L=new jq(u.start||[0,-1,0]),f=new jq(u.end||[0,1,0]),o=f.$13n(L),J=u.radius||1,Z=u.slices||16,W=o.$14n(),D=U(W.y)>.5,Y=new jq(D,!D,0).$12n(W).$14n(),N=Y.$12n(W).$14n(),z=new _j(L,W.$11n()),n=new _j(f,W.$14n()),$=[],q=0;Z>q;q++){var d=q/Z,Q=(q+1)/Z;$.push(new Sb([z,w(0,d,-1),w(0,Q,-1)])),$.push(new Sb([w(0,Q,0),w(0,d,0),w(1,d,0),w(1,Q,0)])),$.push(new Sb([n,w(1,Q,1),w(1,d,1)]))}return rh.$15n($)};var jq=function(J,I,M){var F=this;3==arguments.length?(F.x=J,F.y=I,F.z=M):"x"in J?(F.x=J.x,F.y=J.y,F.z=J.z):(F.x=J[0],F.y=J[1],F.z=J[2])};jq.prototype={clone:function(){return new jq(this.x,this.y,this.z)},$11n:function(){return new jq(-this.x,-this.y,-this.z)},$20n:function(S){return new jq(this.x+S.x,this.y+S.y,this.z+S.z)},$13n:function(f){return new jq(this.x-f.x,this.y-f.y,this.z-f.z)},$21n:function(t){return new jq(this.x*t,this.y*t,this.z*t)},$16n:function(A){return new jq(this.x/A,this.y/A,this.z/A)},$23n:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lerp:function(V,t){return this.$20n(V.$13n(this).$21n(t))},length:function(){return j(this.$23n(this))},$14n:function(){return this.$16n(this.length())},$12n:function(D){var E=this;return new jq(E.y*D.z-E.z*D.y,E.z*D.x-E.x*D.z,E.x*D.y-E.y*D.x)}};var _j=function(G,U,s){var X=this;X.$24n=new jq(G),X.$22n=new jq(U),X.uv=s?new jq(s):null};_j.prototype={clone:function(){var v=this;return new _j(v.$24n.clone(),v.$22n.clone(),v.uv?v.uv.clone():null)},flip:function(){this.$22n=this.$22n.$11n()},$18n:function(F,z){var C=this;return new _j(C.$24n.lerp(F.$24n,z),C.$22n.lerp(F.$22n,z),C.uv?C.uv.lerp(F.uv,z):null)}};var In=function(k,s){this.$22n=k,this.w=s};In.$17n=function(n,v,l){var m=v.$13n(n).$12n(l.$13n(n)).$14n();return new In(m,m.$23n(n))},In.prototype={clone:function(){return new In(this.$22n.clone(),this.w)},flip:function(){var O=this;O.$22n=O.$22n.$11n(),O.w=-O.w},$5n:function(t,J,O,W,q){for(var M=this,R=0,n=1,z=2,c=3,u=0,y=[],_=0;_<t.$9n.length;_++){var F=M.$22n.$23n(t.$9n[_].$24n)-M.w,j=-o>F?z:F>o?n:R;u|=j,y.push(j)}switch(u){case R:(M.$22n.$23n(t.$8n.$22n)>0?J:O).push(t);break;case n:W.push(t);break;case z:q.push(t);break;case c:for(var g=[],X=[],_=0;_<t.$9n.length;_++){var K=(_+1)%t.$9n.length,i=y[_],V=y[K],D=t.$9n[_],C=t.$9n[K];if(i!=z&&g.push(D),i!=n&&X.push(i!=z?D.clone():D),(i|V)==c){var F=(M.w-this.$22n.$23n(D.$24n))/M.$22n.$23n(C.$24n.$13n(D.$24n)),v=D.$18n(C,F);g.push(v),X.push(v.clone())}}g.length>=3&&W.push(new Sb(g,t.$10n)),X.length>=3&&q.push(new Sb(X,t.$10n))}}};var Sb=function(r,I){var K=this;K.$9n=r,K.$10n=I,K.$8n=In.$17n(r[0].$24n,r[1].$24n,r[2].$24n)};Sb.prototype={clone:function(){var M=this.$9n.map(function(H){return H.clone()});return new Sb(M,this.$10n)},flip:function(){this.$9n.reverse().map(function(Y){Y.flip()}),this.$8n.flip()}};var qh=function(w){var O=this;O.$8n=null,O.front=null,O.back=null,O.$4n=[],w&&O.$7n(w)};qh.prototype={clone:function(){var _=this,w=new qh;return w.$8n=_.$8n&&_.$8n.clone(),w.front=_.front&&_.front.clone(),w.back=_.back&&_.back.clone(),w.$4n=_.$4n.map(function(D){return D.clone()}),w},$6n:function(){for(var P=this,F=0;F<P.$4n.length;F++)P.$4n[F].flip();P.$8n.flip(),P.front&&P.front.$6n(),P.back&&P.back.$6n();var C=P.front;P.front=P.back,P.back=C},$1n:function(P){var w=this;if(!w.$8n)return P.slice();for(var j=[],p=[],f=0;f<P.length;f++)w.$8n.$5n(P[f],j,p,j,p);return w.front&&(j=w.front.$1n(j)),p=w.back?w.back.$1n(p):[],j.concat(p)},$3n:function(D){var C=this;C.$4n=D.$1n(C.$4n),C.front&&C.front.$3n(D),C.back&&C.back.$3n(D)},$2n:function(){var R=this,g=R.$4n.slice();return R.front&&(g=g.concat(R.front.$2n())),R.back&&(g=g.concat(R.back.$2n())),g},$7n:function(T){var g=this;if(T.length){g.$8n||(g.$8n=T[0].$8n.clone());for(var j=[],Q=[],e=0;e<T.length;e++)this.$8n.$5n(T[e],g.$4n,g.$4n,j,Q);j.length&&(g.front||(g.front=new qh),this.front.$7n(j)),Q.length&&(g.back||(g.back=new qh),g.back.$7n(Q))}}};var _r="symbol",Of=c.Symbol=function(h,r,D){var n=this;m(Of,n),n.s3(20,20,20),n.s({"all.visible":!1,shape:"rect"}),n.setIcon(h,r,D)};G("Symbol",O,{setIcon:function(m,V,X){var a,L=this;return Of.superClass.setIcon.call(L,m),m?(a={for3d:!0,face:"center",position:44,names:[m]},X&&(a.transaprent=!0),V&&(a.autorotate=V),L.addStyleIcon(_r,a)):L.removeStyleIcon(_r),L.setWidth(D.getImageWidth(d.getImage(m),L)||20),a}});var de=c.CSGNode=function(){m(de,this),this.s({shape:"rect","attach.thickness":1.001})},fd={position:1,width:1,height:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,tall:1,elevation:1,"s:attach.cull":1,"s:attach.operation":1};G("CSGNode",O,{_22Q:function(){return Pj},onPropertyChanged:function(v){var D=this,q=D.getHost();de.superClass.onPropertyChanged.call(D,v),fd[v.property]&&(q instanceof ue||q instanceof de)&&q.fp("csgNodeChange",!0,!1)}});var Pj=function(w,O){m(Pj,this,[w,O])};N(Pj,X.Node3dUI,{_80o:function(U,s,H){var y=this;y._shape3d?Pj.superClass._80o.call(y,U,s,H):(p(y.gv),bg.forEach(function(i){A(y,U,s,y[i],H)}))},validate:function(s,j){var x=this,u=x.gv,g=x.data;if(g.s("shape3d"))return Pj.superClass.validate.call(x,s,j),x._shape3d=!0,void 0;x._shape3d=!1;var D=l(g,u.getMat(g)),B=s&&s.uv;x.vf2("csg",B);for(var K=0;6>K;K++)for(var q=gq[K],T=Ug[K],W=x.vf2(q,B,j),M=W.mat||D,k=W.vs,f=W.uv,O=W.tuv,U=0;2>U;U++){var H=e[T+3*U],G=e[T+3*U+1],r=e[T+3*U+2];if($(k,M,[w[3*H],w[3*H+1],w[3*H+2]]),$(k,M,[w[3*G],w[3*G+1],w[3*G+2]]),$(k,M,[w[3*r],w[3*r+1],w[3*r+2]]),O)if(f){var a=8*K;O.push(f[2*H-a],f[2*H+1-a],f[2*G-a],f[2*G+1-a],f[2*r-a],f[2*r+1-a])}else O.push(C[2*H],C[2*H+1],C[2*G],C[2*G+1],C[2*r],C[2*r+1])}zg(x,s,j)},vf2:function(C,F,Q){var x,T=this,P=T.gv.getFaceVisible(T.data,C);return x=u(T,C,Q),x.vs=[],x.tuv=P&&(x.texture||F)?[]:r,x.visible=P,x}});var ue=c.CSGShape=function(){var _=this;m(ue,_),_.s({"shape.background":r,"shape.border.width":8}),_.setTall(240),_.setElevation(120),_.setThickness(14)};G("CSGShape",S,{IRotatable:!1,_22Q:function(){return Mi},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setSegments:function(){}});var Mi=function(T,_){m(Mi,this,[T,_])};N(Mi,X.Shape3dUI,{_80o:function(c,o,P){var k=this;k.undrawable||(p(k.gv),bg.forEach(function(g){A(k,c,o,k[g],P)}))},validate:function(j,q){var w=this,k=w.data,H=k.getPoints();if(w.undrawable=H.size()<2)return w.clear(),void 0;var R=k.isClosePath(),A=b(k._thickness/2,o),G=E(H,r,r,R);bg.forEach(function(E){w.vf(E,j&&j.uv,!0,q)}),R&&(w.left.visible=!1,w.right.visible=!1),w._12O(G,A),w._20Q(G),zg(w,j,q)}});var fk=c.DoorWindow=function(){var Y=this;m(fk,Y),Y.setElevation(100),Y.s3(100,200,14)};G("DoorWindow",de,{IDoorWindow:!0,toggle:function(U){this.setExpanded(!this.s(x),U)},isExpanded:function(){return this.s(x)},setExpanded:function(s,f){var c,t=this,K=t.$25n,l=t.getDataModel(),U=t.s(x);if(l&&(c=l.getHistoryManager()),K&&(K.stop(!0),delete t.$25n),U!==s){c&&c.beginInteraction();var Q=s?t.s("dw.end"):t.s("dw.start");t.s(x,s),f=Z(f),f?(U=t.s(B),f.action=function(m){t.s(B,U+(Q-U)*m)},f.finishFunc=function(){c&&c.endInteraction()},t.$25n=J(f)):(t.s(B,Q),c&&c.endInteraction())}},getMat:function(){var X=this,e=X.s("dw.s3"),$=X.s("dw.t3"),o=X.s("dw.flip"),w=X.s(B);if(e||w||$||o){var G=[];if(o&&G.push({r3:[0,t,0]}),e&&G.push({s3:e}),w){e=X.s3();var T=X.s("dw.axis"),Z=e[0]/2,S=e[1]/2;e[2]/2,T===M?G.push({t3:[Z,0,0]},{r3:[0,-w,0]},{t3:[-Z,0,0]}):T===V?G.push({t3:[-Z,0,0]},{r3:[0,w,0]},{t3:[Z,0,0]}):T===L?G.push({t3:[0,-S,0]},{r3:[-w,0,0]},{t3:[0,S,0]}):T===W?G.push({t3:[0,S,0]},{r3:[w,0,0]},{t3:[0,-S,0]}):T===h?G.push({r3:[0,w,0]}):T===H&&G.push({r3:[w,0,0]})}return $&&G.push({t3:$}),s(G)}return r}});var Lg=c.CSGBox=function(){var A=this;m(Lg,A),A.setElevation(100),A.s3(100,200,100)};G("CSGBox",de,{ICSGBox:!0,toggleFace:function(B,t){this.setFaceExpanded(B,!this.s(B+z),t)},isFaceExpanded:function(i){return this.s(i+z)},setFaceExpanded:function(P,x,I){var V=this,w=V.$25n,D=V.s(P+z);if(w&&(w.stop(!0),delete V.$25n),D!==x){var H=x?V.s(P+".end"):V.s(P+".start");V.s(P+z,x),I=Z(I),I?(D=V.s(P+R),I.action=function(Z){V.s(P+R,D+(H-D)*Z)},V.$25n=J(I)):V.s(P+R,H)}},getFaceMat:function(J){var n=this,q=n.s(J+R);if(!q)return r;var T=n.s(J+".axis"),l=n.s3(),$=l[0]/2,f=l[1]/2,w=l[2]/2,t=[];return J===F&&(T===M?t.push({t3:[$,0,-w]},{r3:[0,-q,0]},{t3:[-$,0,w]}):T===V?t.push({t3:[-$,0,-w]},{r3:[0,q,0]},{t3:[$,0,w]}):T===L?t.push({t3:[0,-f,-w]},{r3:[-q,0,0]},{t3:[0,f,w]}):T===W?t.push({t3:[0,f,-w]},{r3:[q,0,0]},{t3:[0,-f,w]}):T===h?t.push({t3:[0,0,-w]},{r3:[0,q,0]},{t3:[0,0,w]}):T===H&&t.push({t3:[0,0,-w]},{r3:[q,0,0]},{t3:[0,0,w]})),J===g&&(T===M?t.push({t3:[-$,0,w]},{r3:[0,-q,0]},{t3:[$,0,-w]}):T===V?t.push({t3:[$,0,w]},{r3:[0,q,0]},{t3:[-$,0,-w]}):T===L?t.push({t3:[0,-f,w]},{r3:[q,0,0]},{t3:[0,f,-w]}):T===W?t.push({t3:[0,f,w]},{r3:[-q,0,0]},{t3:[0,-f,-w]}):T===h?t.push({t3:[0,0,w]},{r3:[0,q,0]},{t3:[0,0,-w]}):T===H&&t.push({t3:[0,0,w]},{r3:[q,0,0]},{t3:[0,0,-w]})),J===M&&(T===M?t.push({t3:[$,0,w]},{r3:[0,-q,0]},{t3:[-$,0,-w]}):T===V?t.push({t3:[$,0,-w]},{r3:[0,q,0]},{t3:[-$,0,w]}):T===L?t.push({t3:[$,-f,0]},{r3:[0,0,-q]},{t3:[-$,f,0]}):T===W?t.push({t3:[$,f,0]},{r3:[0,0,q]},{t3:[-$,-f,0]}):T===h?t.push({t3:[$,0,0]},{r3:[0,q,0]},{t3:[-$,0,0]}):T===H&&t.push({t3:[$,0,0]},{r3:[0,0,q]},{t3:[-$,0,0]})),J===V&&(T===M?t.push({t3:[-$,0,-w]},{r3:[0,-q,0]},{t3:[$,0,w]}):T===V?t.push({t3:[-$,0,w]},{r3:[0,q,0]},{t3:[$,0,-w]}):T===L?t.push({t3:[-$,-f,0]},{r3:[0,0,q]},{t3:[$,f,0]}):T===W?t.push({t3:[-$,f,0]},{r3:[0,0,-q]},{t3:[$,-f,0]}):T===h?t.push({t3:[-$,0,0]},{r3:[0,q,0]},{t3:[$,0,0]}):T===H&&t.push({t3:[-$,0,0]},{r3:[0,0,q]},{t3:[$,0,0]})),J===L&&(T===M?t.push({t3:[$,-f,0]},{r3:[0,0,q]},{t3:[-$,f,0]}):T===V?t.push({t3:[-$,-f,0]},{r3:[0,0,-q]},{t3:[$,f,0]}):T===L?t.push({t3:[0,-f,w]},{r3:[-q,0,0]},{t3:[0,f,-w]}):T===W?t.push({t3:[0,-f,-w]},{r3:[q,0,0]},{t3:[0,f,w]}):T===h?t.push({t3:[0,-f,0]},{r3:[0,0,q]},{t3:[0,f,0]}):T===H&&t.push({t3:[0,-f,0]},{r3:[q,0,0]},{t3:[0,f,0]})),J===W&&(T===M?t.push({t3:[$,f,0]},{r3:[0,0,-q]},{t3:[-$,-f,0]}):T===V?t.push({t3:[-$,f,0]},{r3:[0,0,q]},{t3:[$,-f,0]}):T===L?t.push({t3:[0,f,-w]},{r3:[-q,0,0]},{t3:[0,-f,w]}):T===W?t.push({t3:[0,f,w]},{r3:[q,0,0]},{t3:[0,-f,-w]}):T===h?t.push({t3:[0,f,0]},{r3:[0,0,q]},{t3:[0,-f,0]}):T===H&&t.push({t3:[0,f,0]},{r3:[q,0,0]},{t3:[0,-f,0]})),s(t)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);